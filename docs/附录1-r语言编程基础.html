<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 附录1 R语言编程基础 | 生态统计学</title>
  <meta name="description" content="3 附录1 R语言编程基础 | 生态统计学课程教材，涵盖从基础到高级的生态数据分析方法" />
  <meta name="generator" content="bookdown 0.44 and GitBook 2.6.7" />

  <meta property="og:title" content="3 附录1 R语言编程基础 | 生态统计学" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="3 附录1 R语言编程基础 | 生态统计学课程教材，涵盖从基础到高级的生态数据分析方法" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 附录1 R语言编程基础 | 生态统计学" />
  
  <meta name="twitter:description" content="3 附录1 R语言编程基础 | 生态统计学课程教材，涵盖从基础到高级的生态数据分析方法" />
  

<meta name="author" content="沈国春、李勤" />


<meta name="date" content="2025-09-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="概率与分布.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7cbaf067c715044120ee231397e9ace3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">生态统计学</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#为什么要学生态统计"><i class="fa fa-check"></i><b>0.1</b> 为什么要学生态统计</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#在不确定的世界中寻找规律"><i class="fa fa-check"></i><b>0.1.1</b> 在不确定的世界中寻找规律</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#ai时代的机遇与陷阱"><i class="fa fa-check"></i><b>0.1.2</b> AI时代的机遇与陷阱</a></li>
</ul></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#本书介绍"><i class="fa fa-check"></i><b>0.2</b> 本书介绍</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#课程在线资源"><i class="fa fa-check"></i><b>0.3</b> 课程在线资源</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#学习方式"><i class="fa fa-check"></i><b>0.4</b> 学习方式</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="统计编程基础.html"><a href="统计编程基础.html"><i class="fa fa-check"></i><b>1</b> 统计编程基础</a>
<ul>
<li class="chapter" data-level="1.1" data-path="统计编程基础.html"><a href="统计编程基础.html#引言"><i class="fa fa-check"></i><b>1.1</b> 引言</a></li>
<li class="chapter" data-level="1.2" data-path="统计编程基础.html"><a href="统计编程基础.html#核心能力培养框架"><i class="fa fa-check"></i><b>1.2</b> 核心能力培养框架</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="统计编程基础.html"><a href="统计编程基础.html#高阶思维与问题解决能力"><i class="fa fa-check"></i><b>1.2.1</b> 高阶思维与问题解决能力</a></li>
<li class="chapter" data-level="1.2.2" data-path="统计编程基础.html"><a href="统计编程基础.html#与llm协同工作的能力"><i class="fa fa-check"></i><b>1.2.2</b> 与LLM协同工作的能力</a></li>
<li class="chapter" data-level="1.2.3" data-path="统计编程基础.html"><a href="统计编程基础.html#传统但愈发重要的软技能"><i class="fa fa-check"></i><b>1.2.3</b> 传统但愈发重要的软技能</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="统计编程基础.html"><a href="统计编程基础.html#模块一通用编程思维基础"><i class="fa fa-check"></i><b>1.3</b> 模块一：通用编程思维基础</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="统计编程基础.html"><a href="统计编程基础.html#编程核心概念"><i class="fa fa-check"></i><b>1.3.1</b> 编程核心概念</a></li>
<li class="chapter" data-level="1.3.2" data-path="统计编程基础.html"><a href="统计编程基础.html#算法复杂度"><i class="fa fa-check"></i><b>1.3.2</b> 算法复杂度</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="统计编程基础.html"><a href="统计编程基础.html#模块二ai协同编程技能"><i class="fa fa-check"></i><b>1.4</b> 模块二：AI协同编程技能</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="统计编程基础.html"><a href="统计编程基础.html#ai编程模块安装"><i class="fa fa-check"></i><b>1.4.1</b> AI编程模块安装</a></li>
<li class="chapter" data-level="1.4.2" data-path="统计编程基础.html"><a href="统计编程基础.html#精准提问技巧"><i class="fa fa-check"></i><b>1.4.2</b> 精准提问技巧</a></li>
<li class="chapter" data-level="1.4.3" data-path="统计编程基础.html"><a href="统计编程基础.html#代码审查能力"><i class="fa fa-check"></i><b>1.4.3</b> 代码审查能力</a></li>
<li class="chapter" data-level="1.4.4" data-path="统计编程基础.html"><a href="统计编程基础.html#调试与错误处理"><i class="fa fa-check"></i><b>1.4.4</b> 调试与错误处理</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="统计编程基础.html"><a href="统计编程基础.html#总结"><i class="fa fa-check"></i><b>1.5</b> 总结</a></li>
<li class="chapter" data-level="1.6" data-path="统计编程基础.html"><a href="统计编程基础.html#综合练习"><i class="fa fa-check"></i><b>1.6</b> 综合练习</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="统计编程基础.html"><a href="统计编程基础.html#练习1"><i class="fa fa-check"></i><b>1.6.1</b> 练习1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="概率与分布.html"><a href="概率与分布.html"><i class="fa fa-check"></i><b>2</b> 概率与分布</a>
<ul>
<li class="chapter" data-level="2.1" data-path="概率与分布.html"><a href="概率与分布.html#蚂蚱午餐与概率"><i class="fa fa-check"></i><b>2.1</b> 蚂蚱午餐与概率</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="概率与分布.html"><a href="概率与分布.html#一只蚱蜢的午餐"><i class="fa fa-check"></i><b>2.1.1</b> 一只蚱蜢的午餐</a></li>
<li class="chapter" data-level="2.1.2" data-path="概率与分布.html"><a href="概率与分布.html#理想的猜测古典概率"><i class="fa fa-check"></i><b>2.1.2</b> 理想的猜测——古典概率</a></li>
<li class="chapter" data-level="2.1.3" data-path="概率与分布.html"><a href="概率与分布.html#数据的语言频率概率"><i class="fa fa-check"></i><b>2.1.3</b> 数据的语言——频率概率</a></li>
<li class="chapter" data-level="2.1.4" data-path="概率与分布.html"><a href="概率与分布.html#动态的更新贝叶斯概率"><i class="fa fa-check"></i><b>2.1.4</b> 动态的更新——贝叶斯概率</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="概率与分布.html"><a href="概率与分布.html#随机变量与分布"><i class="fa fa-check"></i><b>2.2</b> 随机变量与分布</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="概率与分布.html"><a href="概率与分布.html#概率分布"><i class="fa fa-check"></i><b>2.2.1</b> 概率分布</a></li>
<li class="chapter" data-level="2.2.2" data-path="概率与分布.html"><a href="概率与分布.html#累积概率分布从可能性到确定性"><i class="fa fa-check"></i><b>2.2.2</b> 累积概率分布：从可能性到确定性</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="概率与分布.html"><a href="概率与分布.html#午餐菜单离散随机变量的分布家族"><i class="fa fa-check"></i><b>2.3</b> 午餐菜单：离散随机变量的分布家族</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="概率与分布.html"><a href="概率与分布.html#伯努利分布一个是或否的终极问题"><i class="fa fa-check"></i><b>2.3.1</b> 伯努利分布：一个”是”或”否”的终极问题</a></li>
<li class="chapter" data-level="2.3.2" data-path="概率与分布.html"><a href="概率与分布.html#二项分布重复是非题的计数法则"><i class="fa fa-check"></i><b>2.3.2</b> 二项分布：重复”是非题”的计数法则</a></li>
<li class="chapter" data-level="2.3.3" data-path="概率与分布.html"><a href="概率与分布.html#多项式分布多元选择的全景图"><i class="fa fa-check"></i><b>2.3.3</b> 多项式分布：多元选择的”全景图”</a></li>
<li class="chapter" data-level="2.3.4" data-path="概率与分布.html"><a href="概率与分布.html#泊松分布罕见事件的低语者"><i class="fa fa-check"></i><b>2.3.4</b> 泊松分布：罕见事件的”低语者”</a></li>
<li class="chapter" data-level="2.3.5" data-path="概率与分布.html"><a href="概率与分布.html#几何分布等待第一次成功的耐心"><i class="fa fa-check"></i><b>2.3.5</b> 几何分布：等待”第一次成功”的耐心</a></li>
<li class="chapter" data-level="2.3.6" data-path="概率与分布.html"><a href="概率与分布.html#负二项分布等待最后一次成功的耐心"><i class="fa fa-check"></i><b>2.3.6</b> 负二项分布：等待”最后一次成功”的耐心</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="概率与分布.html"><a href="概率与分布.html#午餐法则连续随机变量的分布家族"><i class="fa fa-check"></i><b>2.4</b> 午餐法则：连续随机变量的分布家族</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="概率与分布.html"><a href="概率与分布.html#均匀分布纯粹的平等"><i class="fa fa-check"></i><b>2.4.1</b> 均匀分布：纯粹的平等</a></li>
<li class="chapter" data-level="2.4.2" data-path="概率与分布.html"><a href="概率与分布.html#指数分布等待的艺术"><i class="fa fa-check"></i><b>2.4.2</b> 指数分布：等待的艺术</a></li>
<li class="chapter" data-level="2.4.3" data-path="概率与分布.html"><a href="概率与分布.html#正态分布高斯分布自然界的钟形法则"><i class="fa fa-check"></i><b>2.4.3</b> 正态分布（高斯分布）：自然界的”钟形”法则</a></li>
<li class="chapter" data-level="2.4.4" data-path="概率与分布.html"><a href="概率与分布.html#威布尔分布生存分析的时间法则"><i class="fa fa-check"></i><b>2.4.4</b> 威布尔分布：生存分析的”时间法则”</a></li>
<li class="chapter" data-level="2.4.5" data-path="概率与分布.html"><a href="概率与分布.html#伽马分布更一般的等待时间模型"><i class="fa fa-check"></i><b>2.4.5</b> 伽马分布：更一般的等待时间模型</a></li>
<li class="chapter" data-level="2.4.6" data-path="概率与分布.html"><a href="概率与分布.html#贝塔分布比例变量的天然选择"><i class="fa fa-check"></i><b>2.4.6</b> 贝塔分布：比例变量的天然选择</a></li>
<li class="chapter" data-level="2.4.7" data-path="概率与分布.html"><a href="概率与分布.html#正态的魔力中心极限定理"><i class="fa fa-check"></i><b>2.4.7</b> 正态的魔力：中心极限定理</a></li>
<li class="chapter" data-level="2.4.8" data-path="概率与分布.html"><a href="概率与分布.html#生态学应用实例"><i class="fa fa-check"></i><b>2.4.8</b> 生态学应用实例</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="概率与分布.html"><a href="概率与分布.html#混合分布处理异质性数据"><i class="fa fa-check"></i><b>2.5</b> 混合分布：处理异质性数据</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="概率与分布.html"><a href="概率与分布.html#零膨胀分布处理零值过多的数据"><i class="fa fa-check"></i><b>2.5.1</b> 零膨胀分布：处理零值过多的数据</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html"><i class="fa fa-check"></i><b>3</b> 附录1 R语言编程基础</a>
<ul>
<li class="chapter" data-level="3.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言介绍"><i class="fa fa-check"></i><b>3.1</b> R语言介绍</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#为什么生态学专业需要学习r"><i class="fa fa-check"></i><b>3.1.1</b> 为什么生态学专业需要学习R？</a></li>
<li class="chapter" data-level="3.1.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言简介与趣味应用"><i class="fa fa-check"></i><b>3.1.2</b> R语言简介与趣味应用</a></li>
<li class="chapter" data-level="3.1.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#环境设置和配置"><i class="fa fa-check"></i><b>3.1.3</b> 环境设置和配置</a></li>
<li class="chapter" data-level="3.1.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#项目文件夹结构设置"><i class="fa fa-check"></i><b>3.1.4</b> 项目文件夹结构设置</a></li>
<li class="chapter" data-level="3.1.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#基本包管理"><i class="fa fa-check"></i><b>3.1.5</b> 基本包管理</a></li>
<li class="chapter" data-level="3.1.6" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#工作目录设置"><i class="fa fa-check"></i><b>3.1.6</b> 工作目录设置</a></li>
<li class="chapter" data-level="3.1.7" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课前准备检查清单"><i class="fa fa-check"></i><b>3.1.7</b> 课前准备检查清单</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#数值向量创建与基本统计计算"><i class="fa fa-check"></i><b>3.2</b> 数值向量创建与基本统计计算</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景"><i class="fa fa-check"></i><b>3.2.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.2.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据"><i class="fa fa-check"></i><b>3.2.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.2.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程"><i class="fa fa-check"></i><b>3.2.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.2.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解"><i class="fa fa-check"></i><b>3.2.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.2.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习"><i class="fa fa-check"></i><b>3.2.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#字符型数据处理与向量索引操作"><i class="fa fa-check"></i><b>3.3</b> 字符型数据处理与向量索引操作</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-1"><i class="fa fa-check"></i><b>3.3.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.3.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据-1"><i class="fa fa-check"></i><b>3.3.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.3.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-1"><i class="fa fa-check"></i><b>3.3.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.3.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-1"><i class="fa fa-check"></i><b>3.3.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.3.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-1"><i class="fa fa-check"></i><b>3.3.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#数据框结构理解与多类型数据管理"><i class="fa fa-check"></i><b>3.4</b> 数据框结构理解与多类型数据管理</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-2"><i class="fa fa-check"></i><b>3.4.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.4.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据-2"><i class="fa fa-check"></i><b>3.4.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.4.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-2"><i class="fa fa-check"></i><b>3.4.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.4.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-2"><i class="fa fa-check"></i><b>3.4.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.4.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-2"><i class="fa fa-check"></i><b>3.4.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#列表数据结构与数据分组管理"><i class="fa fa-check"></i><b>3.5</b> 列表数据结构与数据分组管理</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-3"><i class="fa fa-check"></i><b>3.5.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.5.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据-3"><i class="fa fa-check"></i><b>3.5.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.5.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-3"><i class="fa fa-check"></i><b>3.5.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.5.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-3"><i class="fa fa-check"></i><b>3.5.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.5.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-3"><i class="fa fa-check"></i><b>3.5.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#外部数据导入与条件筛选分析"><i class="fa fa-check"></i><b>3.6</b> 外部数据导入与条件筛选分析</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-4"><i class="fa fa-check"></i><b>3.6.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.6.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据文件bird_monitoring.csv"><i class="fa fa-check"></i><b>3.6.2</b> 演示数据文件（bird_monitoring.csv）</a></li>
<li class="chapter" data-level="3.6.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-4"><i class="fa fa-check"></i><b>3.6.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.6.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-4"><i class="fa fa-check"></i><b>3.6.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.6.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-4"><i class="fa fa-check"></i><b>3.6.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#缺失值和异常值的识别处理"><i class="fa fa-check"></i><b>3.7</b> 缺失值和异常值的识别处理</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-5"><i class="fa fa-check"></i><b>3.7.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.7.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据-4"><i class="fa fa-check"></i><b>3.7.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.7.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-5"><i class="fa fa-check"></i><b>3.7.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.7.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-5"><i class="fa fa-check"></i><b>3.7.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.7.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-5"><i class="fa fa-check"></i><b>3.7.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#描述性统计分析与基础数据可视化"><i class="fa fa-check"></i><b>3.8</b> 描述性统计分析与基础数据可视化</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-6"><i class="fa fa-check"></i><b>3.8.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.8.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据-5"><i class="fa fa-check"></i><b>3.8.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.8.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-6"><i class="fa fa-check"></i><b>3.8.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.8.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-6"><i class="fa fa-check"></i><b>3.8.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.8.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-6"><i class="fa fa-check"></i><b>3.8.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#条件判断循环结构与函数编程"><i class="fa fa-check"></i><b>3.9</b> 条件判断、循环结构与函数编程</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-7"><i class="fa fa-check"></i><b>3.9.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.9.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据-6"><i class="fa fa-check"></i><b>3.9.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.9.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-7"><i class="fa fa-check"></i><b>3.9.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.9.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-7"><i class="fa fa-check"></i><b>3.9.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.9.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-7"><i class="fa fa-check"></i><b>3.9.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#现代数据科学工具包应用"><i class="fa fa-check"></i><b>3.10</b> 现代数据科学工具包应用</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-8"><i class="fa fa-check"></i><b>3.10.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.10.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据-7"><i class="fa fa-check"></i><b>3.10.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.10.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-8"><i class="fa fa-check"></i><b>3.10.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.10.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-8"><i class="fa fa-check"></i><b>3.10.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.10.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-8"><i class="fa fa-check"></i><b>3.10.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#图形语法与科学绘图"><i class="fa fa-check"></i><b>3.11</b> 图形语法与科学绘图</a>
<ul>
<li class="chapter" data-level="3.11.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#生态学背景-9"><i class="fa fa-check"></i><b>3.11.1</b> 生态学背景</a></li>
<li class="chapter" data-level="3.11.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#演示数据-8"><i class="fa fa-check"></i><b>3.11.2</b> 演示数据</a></li>
<li class="chapter" data-level="3.11.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课堂演示过程-9"><i class="fa fa-check"></i><b>3.11.3</b> 课堂演示过程</a></li>
<li class="chapter" data-level="3.11.4" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#r语言知识点详解-9"><i class="fa fa-check"></i><b>3.11.4</b> R语言知识点详解</a></li>
<li class="chapter" data-level="3.11.5" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#课后练习-9"><i class="fa fa-check"></i><b>3.11.5</b> 课后练习</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#综合练习-1"><i class="fa fa-check"></i><b>3.12</b> 综合练习</a>
<ul>
<li class="chapter" data-level="3.12.1" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#练习1-1"><i class="fa fa-check"></i><b>3.12.1</b> 练习1</a></li>
<li class="chapter" data-level="3.12.2" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#练习2"><i class="fa fa-check"></i><b>3.12.2</b> 练习2</a></li>
<li class="chapter" data-level="3.12.3" data-path="附录1-r语言编程基础.html"><a href="附录1-r语言编程基础.html#练习3"><i class="fa fa-check"></i><b>3.12.3</b> 练习3</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://gitee.com/gcshen/ecological-statistics" target="blank">Gitee</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">生态统计学</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="附录1-r语言编程基础" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> 附录1 R语言编程基础<a href="附录1-r语言编程基础.html#附录1-r语言编程基础" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="r语言介绍" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> R语言介绍<a href="附录1-r语言编程基础.html#r语言介绍" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>理解为什么生态学专业需要学习R语言</li>
<li>掌握R和RStudio的安装和配置</li>
<li>建立良好的项目文件组织习惯</li>
<li>了解R包管理的基本方法</li>
</ul>
<div id="为什么生态学专业需要学习r" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> 为什么生态学专业需要学习R？<a href="附录1-r语言编程基础.html#为什么生态学专业需要学习r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="数据分析能力的必要性" class="section level4 hasAnchor" number="3.1.1.1">
<h4><span class="header-section-number">3.1.1.1</span> 数据分析能力的必要性<a href="附录1-r语言编程基础.html#数据分析能力的必要性" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>现代生态学研究产生海量数据：野外调查数据、实验室测量数据、遥感影像数据、基因序列数据等。传统的Excel已无法满足复杂的统计分析需求，而R语言提供了完整的数据科学工具链。</p>
</div>
<div id="可重现研究的科学要求" class="section level4 hasAnchor" number="3.1.1.2">
<h4><span class="header-section-number">3.1.1.2</span> 可重现研究的科学要求<a href="附录1-r语言编程基础.html#可重现研究的科学要求" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>重现性危机</strong>：越来越多的科学研究无法被重现，影响科学可信度</li>
<li><strong>R脚本的优势</strong>：
<ul>
<li>每一步分析都有记录，任何人都可以重现你的分析过程</li>
<li>错误检查：代码可以被审查，减少人为错误</li>
<li>版本控制：分析过程的每次修改都有记录</li>
</ul></li>
</ul>
</div>
<div id="职业发展的核心竞争力" class="section level4 hasAnchor" number="3.1.1.3">
<h4><span class="header-section-number">3.1.1.3</span> 职业发展的核心竞争力<a href="附录1-r语言编程基础.html#职业发展的核心竞争力" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>学术界要求</strong>：顶级期刊越来越要求提供数据和代码</li>
<li><strong>就业市场需求</strong>：环保部门、研究院所、咨询公司都需要数据分析能力</li>
<li><strong>跨学科合作</strong>：与计算机科学、统计学等领域合作的桥梁</li>
<li><strong>终身学习</strong>：编程思维有助于快速学习新的分析方法</li>
</ul>
</div>
<div id="开源免费的经济优势" class="section level4 hasAnchor" number="3.1.1.4">
<h4><span class="header-section-number">3.1.1.4</span> 开源免费的经济优势<a href="附录1-r语言编程基础.html#开源免费的经济优势" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>成本优势</strong>：SPSS单机版数万元，SAS更昂贵，R完全免费</li>
<li><strong>功能更新</strong>：商业软件更新缓慢，R社区每天都有新功能</li>
<li><strong>全球社区</strong>：遇到问题可以在全球社区寻求帮助</li>
<li><strong>未来保障</strong>：开源软件不会因为公司倒闭而消失</li>
</ul>
</div>
<div id="学术发表的必要工具" class="section level4 hasAnchor" number="3.1.1.5">
<h4><span class="header-section-number">3.1.1.5</span> 学术发表的必要工具<a href="附录1-r语言编程基础.html#学术发表的必要工具" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>期刊要求</strong>：Nature、Science等顶级期刊要求提供分析代码</li>
<li><strong>同行评议</strong>：审稿人可以检查你的分析方法是否正确</li>
<li><strong>引用优势</strong>：提供代码的论文被引用次数更高</li>
<li><strong>学术诚信</strong>：透明的分析过程展现严谨的科学态度</li>
</ul>
</div>
<div id="国际交流的通用语言" class="section level4 hasAnchor" number="3.1.1.6">
<h4><span class="header-section-number">3.1.1.6</span> 国际交流的通用语言<a href="附录1-r语言编程基础.html#国际交流的通用语言" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>国际会议</strong>：生态学国际会议上，R是数据分析的主流工具</li>
<li><strong>合作研究</strong>：与国外学者合作时，R是共同的工作语言</li>
<li><strong>在线学习</strong>：全球最优秀的生态学分析教程都使用R</li>
<li><strong>职业流动</strong>：掌握R可以在全球范围内寻求工作机会</li>
</ul>
</div>
</div>
<div id="r语言简介与趣味应用" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> R语言简介与趣味应用<a href="附录1-r语言编程基础.html#r语言简介与趣味应用" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="什么是r语言" class="section level4 hasAnchor" number="3.1.2.1">
<h4><span class="header-section-number">3.1.2.1</span> 什么是R语言？<a href="附录1-r语言编程基础.html#什么是r语言" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>统计计算语言</strong>：专门为统计分析和数据可视化设计的编程语言</li>
<li><strong>开源免费</strong>：由全球统计学家共同维护发展</li>
<li><strong>交互式环境</strong>：可以立即看到代码执行结果</li>
<li><strong>扩展性强</strong>：超过18,000个专业扩展包</li>
</ul>
</div>
<div id="如何获取帮助" class="section level4 hasAnchor" number="3.1.2.2">
<h4><span class="header-section-number">3.1.2.2</span> 如何获取帮助？<a href="附录1-r语言编程基础.html#如何获取帮助" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="附录1-r语言编程基础.html#cb155-1" tabindex="-1"></a><span class="co"># 查看函数帮助文档</span></span>
<span id="cb155-2"><a href="附录1-r语言编程基础.html#cb155-2" tabindex="-1"></a>?plot</span>
<span id="cb155-3"><a href="附录1-r语言编程基础.html#cb155-3" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb155-4"><a href="附录1-r语言编程基础.html#cb155-4" tabindex="-1"></a></span>
<span id="cb155-5"><a href="附录1-r语言编程基础.html#cb155-5" tabindex="-1"></a><span class="co"># 搜索帮助文档</span></span>
<span id="cb155-6"><a href="附录1-r语言编程基础.html#cb155-6" tabindex="-1"></a>??<span class="st">&quot;regression&quot;</span></span>
<span id="cb155-7"><a href="附录1-r语言编程基础.html#cb155-7" tabindex="-1"></a></span>
<span id="cb155-8"><a href="附录1-r语言编程基础.html#cb155-8" tabindex="-1"></a><span class="co"># 示例代码演示</span></span>
<span id="cb155-9"><a href="附录1-r语言编程基础.html#cb155-9" tabindex="-1"></a><span class="fu">example</span>(plot)</span>
<span id="cb155-10"><a href="附录1-r语言编程基础.html#cb155-10" tabindex="-1"></a><span class="fu">example</span>(lm)</span>
<span id="cb155-11"><a href="附录1-r语言编程基础.html#cb155-11" tabindex="-1"></a><span class="fu">demo</span>(persp)</span>
<span id="cb155-12"><a href="附录1-r语言编程基础.html#cb155-12" tabindex="-1"></a><span class="fu">demo</span>(graphics)</span>
<span id="cb155-13"><a href="附录1-r语言编程基础.html#cb155-13" tabindex="-1"></a><span class="fu">demo</span>(Hershey)</span>
<span id="cb155-14"><a href="附录1-r语言编程基础.html#cb155-14" tabindex="-1"></a><span class="fu">demo</span>(plotmath)</span>
<span id="cb155-15"><a href="附录1-r语言编程基础.html#cb155-15" tabindex="-1"></a></span>
<span id="cb155-16"><a href="附录1-r语言编程基础.html#cb155-16" tabindex="-1"></a></span>
<span id="cb155-17"><a href="附录1-r语言编程基础.html#cb155-17" tabindex="-1"></a><span class="co"># 在线资源：</span></span>
<span id="cb155-18"><a href="附录1-r语言编程基础.html#cb155-18" tabindex="-1"></a><span class="co"># - R官方文档：https://cran.r-project.org/manuals.html</span></span>
<span id="cb155-19"><a href="附录1-r语言编程基础.html#cb155-19" tabindex="-1"></a><span class="co"># - RStudio社区：https://community.rstudio.com</span></span></code></pre></div>
</div>
<div id="r语言的趣味应用示例" class="section level4 hasAnchor" number="3.1.2.3">
<h4><span class="header-section-number">3.1.2.3</span> R语言的趣味应用示例<a href="附录1-r语言编程基础.html#r语言的趣味应用示例" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="生态数据动态可视化" class="section level5 hasAnchor" number="3.1.2.3.1">
<h5><span class="header-section-number">3.1.2.3.1</span> 生态数据动态可视化<a href="附录1-r语言编程基础.html#生态数据动态可视化" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="附录1-r语言编程基础.html#cb156-1" tabindex="-1"></a><span class="co"># 安装必要包(首次需要)</span></span>
<span id="cb156-2"><a href="附录1-r语言编程基础.html#cb156-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;gganimate&quot;</span>, <span class="st">&quot;gapminder&quot;</span>))</span>
<span id="cb156-3"><a href="附录1-r语言编程基础.html#cb156-3" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb156-4"><a href="附录1-r语言编程基础.html#cb156-4" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb156-5"><a href="附录1-r语言编程基础.html#cb156-5" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb156-6"><a href="附录1-r语言编程基础.html#cb156-6" tabindex="-1"></a></span>
<span id="cb156-7"><a href="附录1-r语言编程基础.html#cb156-7" tabindex="-1"></a><span class="co"># 使用gapminder数据集(包含各国多年生态经济数据)</span></span>
<span id="cb156-8"><a href="附录1-r语言编程基础.html#cb156-8" tabindex="-1"></a><span class="co"># 绘制动态变化图</span></span>
<span id="cb156-9"><a href="附录1-r语言编程基础.html#cb156-9" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">size =</span> pop, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb156-10"><a href="附录1-r语言编程基础.html#cb156-10" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb156-11"><a href="附录1-r语言编程基础.html#cb156-11" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb156-12"><a href="附录1-r语言编程基础.html#cb156-12" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb156-13"><a href="附录1-r语言编程基础.html#cb156-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;年份: {frame_time}&#39;</span>, <span class="at">x =</span> <span class="st">&#39;人均GDP&#39;</span>, <span class="at">y =</span> <span class="st">&#39;预期寿命&#39;</span>) <span class="sc">+</span></span>
<span id="cb156-14"><a href="附录1-r语言编程基础.html#cb156-14" tabindex="-1"></a>  <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb156-15"><a href="附录1-r语言编程基础.html#cb156-15" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">&#39;linear&#39;</span>)</span>
<span id="cb156-16"><a href="附录1-r语言编程基础.html#cb156-16" tabindex="-1"></a></span>
<span id="cb156-17"><a href="附录1-r语言编程基础.html#cb156-17" tabindex="-1"></a><span class="co"># 渲染并保存动画</span></span>
<span id="cb156-18"><a href="附录1-r语言编程基础.html#cb156-18" tabindex="-1"></a><span class="co"># 需要先安装gifski包: install.packages(&quot;gifski&quot;)</span></span>
<span id="cb156-19"><a href="附录1-r语言编程基础.html#cb156-19" tabindex="-1"></a><span class="fu">animate</span>(fig, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(<span class="st">&quot;./imgs/gapminder_animation.gif&quot;</span>), </span>
<span id="cb156-20"><a href="附录1-r语言编程基础.html#cb156-20" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">800</span>, <span class="at">height =</span> <span class="dv">600</span>, <span class="at">fps =</span> <span class="dv">10</span>, <span class="at">duration =</span> <span class="dv">15</span>)</span>
<span id="cb156-21"><a href="附录1-r语言编程基础.html#cb156-21" tabindex="-1"></a></span>
<span id="cb156-22"><a href="附录1-r语言编程基础.html#cb156-22" tabindex="-1"></a><span class="co"># 提示：运行后会生成展示生态经济数据随时间变化的动画</span></span>
<span id="cb156-23"><a href="附录1-r语言编程基础.html#cb156-23" tabindex="-1"></a><span class="co"># 可以清楚地看到不同大陆国家生态经济指标的变化趋势</span></span></code></pre></div>
</div>
</div>
<div id="电子水母" class="section level4 hasAnchor" number="3.1.2.4">
<h4><span class="header-section-number">3.1.2.4</span> 电子水母<a href="附录1-r语言编程基础.html#电子水母" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="附录1-r语言编程基础.html#cb157-1" tabindex="-1"></a><span class="co"># 加载必要的包</span></span>
<span id="cb157-2"><a href="附录1-r语言编程基础.html#cb157-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb157-3"><a href="附录1-r语言编程基础.html#cb157-3" tabindex="-1"></a><span class="fu">library</span>(gganimate) <span class="co"># 用于创建动画</span></span>
<span id="cb157-4"><a href="附录1-r语言编程基础.html#cb157-4" tabindex="-1"></a><span class="fu">library</span>(dplyr)     <span class="co"># 用于数据处理</span></span>
<span id="cb157-5"><a href="附录1-r语言编程基础.html#cb157-5" tabindex="-1"></a></span>
<span id="cb157-6"><a href="附录1-r语言编程基础.html#cb157-6" tabindex="-1"></a><span class="co"># 设置参数 - 减少点数提高性能</span></span>
<span id="cb157-7"><a href="附录1-r语言编程基础.html#cb157-7" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2000</span>  <span class="co"># 从10000减少到2000个点</span></span>
<span id="cb157-8"><a href="附录1-r语言编程基础.html#cb157-8" tabindex="-1"></a>x <span class="ot">&lt;-</span> i <span class="sc">%%</span> <span class="dv">200</span>      <span class="co"># R中的模运算</span></span>
<span id="cb157-9"><a href="附录1-r语言编程基础.html#cb157-9" tabindex="-1"></a>y <span class="ot">&lt;-</span> i <span class="sc">/</span> <span class="dv">43</span></span>
<span id="cb157-10"><a href="附录1-r语言编程基础.html#cb157-10" tabindex="-1"></a></span>
<span id="cb157-11"><a href="附录1-r语言编程基础.html#cb157-11" tabindex="-1"></a><span class="co"># 预计算固定变量（不依赖于t）</span></span>
<span id="cb157-12"><a href="附录1-r语言编程基础.html#cb157-12" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="sc">*</span> <span class="fu">cos</span>(x<span class="sc">/</span><span class="dv">14</span>) <span class="sc">*</span> <span class="fu">cos</span>(y<span class="sc">/</span><span class="dv">30</span>)</span>
<span id="cb157-13"><a href="附录1-r语言编程基础.html#cb157-13" tabindex="-1"></a>e <span class="ot">&lt;-</span> y<span class="sc">/</span><span class="dv">8</span> <span class="sc">-</span> <span class="dv">13</span></span>
<span id="cb157-14"><a href="附录1-r语言编程基础.html#cb157-14" tabindex="-1"></a>d <span class="ot">&lt;-</span> (k<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> e<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">59</span> <span class="sc">+</span> <span class="dv">4</span></span>
<span id="cb157-15"><a href="附录1-r语言编程基础.html#cb157-15" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">atan2</span>(k, e)   <span class="co"># 注意R中atan2的参数顺序是(y,x)</span></span>
<span id="cb157-16"><a href="附录1-r语言编程基础.html#cb157-16" tabindex="-1"></a></span>
<span id="cb157-17"><a href="附录1-r语言编程基础.html#cb157-17" tabindex="-1"></a><span class="co"># 预计算所有帧数据（向量化操作）</span></span>
<span id="cb157-18"><a href="附录1-r语言编程基础.html#cb157-18" tabindex="-1"></a>t_values <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span> <span class="sc">*</span> pi, <span class="at">by =</span> pi <span class="sc">/</span> <span class="dv">10</span>)  <span class="co"># 减少帧数：从20π到10π，步长从π/20到π/10</span></span>
<span id="cb157-19"><a href="附录1-r语言编程基础.html#cb157-19" tabindex="-1"></a></span>
<span id="cb157-20"><a href="附录1-r语言编程基础.html#cb157-20" tabindex="-1"></a><span class="co"># 使用矩阵运算代替循环</span></span>
<span id="cb157-21"><a href="附录1-r语言编程基础.html#cb157-21" tabindex="-1"></a>c_val_matrix <span class="ot">&lt;-</span> <span class="fu">outer</span>(d <span class="sc">/</span> <span class="dv">2</span> <span class="sc">+</span> e <span class="sc">/</span> <span class="dv">99</span>, <span class="sc">-</span>t_values <span class="sc">/</span> <span class="dv">18</span>, <span class="st">&quot;+&quot;</span>)</span>
<span id="cb157-22"><a href="附录1-r语言编程基础.html#cb157-22" tabindex="-1"></a>q_matrix <span class="ot">&lt;-</span> <span class="dv">60</span> <span class="sc">-</span> <span class="dv">3</span> <span class="sc">*</span> <span class="fu">sin</span>(a <span class="sc">*</span> e) <span class="sc">+</span> <span class="fu">outer</span>(k <span class="sc">*</span> (<span class="dv">3</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">/</span> d), <span class="fu">sin</span>(d <span class="sc">^</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> t_values), <span class="st">&quot;*&quot;</span>)</span>
<span id="cb157-23"><a href="附录1-r语言编程基础.html#cb157-23" tabindex="-1"></a></span>
<span id="cb157-24"><a href="附录1-r语言编程基础.html#cb157-24" tabindex="-1"></a>x_matrix <span class="ot">&lt;-</span> q_matrix <span class="sc">*</span> <span class="fu">sin</span>(c_val_matrix) <span class="sc">+</span> <span class="dv">200</span></span>
<span id="cb157-25"><a href="附录1-r语言编程基础.html#cb157-25" tabindex="-1"></a>y_matrix <span class="ot">&lt;-</span> (q_matrix <span class="sc">+</span> <span class="dv">9</span> <span class="sc">*</span> d) <span class="sc">*</span> <span class="fu">cos</span>(c_val_matrix) <span class="sc">+</span> <span class="dv">200</span></span>
<span id="cb157-26"><a href="附录1-r语言编程基础.html#cb157-26" tabindex="-1"></a></span>
<span id="cb157-27"><a href="附录1-r语言编程基础.html#cb157-27" tabindex="-1"></a><span class="co"># 创建数据框（更高效的方式）</span></span>
<span id="cb157-28"><a href="附录1-r语言编程基础.html#cb157-28" tabindex="-1"></a>all_frames <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb157-29"><a href="附录1-r语言编程基础.html#cb157-29" tabindex="-1"></a>  <span class="at">t =</span> <span class="fu">rep</span>(t_values, <span class="at">each =</span> <span class="fu">length</span>(i)),</span>
<span id="cb157-30"><a href="附录1-r语言编程基础.html#cb157-30" tabindex="-1"></a>  <span class="at">X =</span> <span class="fu">as.vector</span>(x_matrix),</span>
<span id="cb157-31"><a href="附录1-r语言编程基础.html#cb157-31" tabindex="-1"></a>  <span class="at">Y =</span> <span class="fu">as.vector</span>(y_matrix)</span>
<span id="cb157-32"><a href="附录1-r语言编程基础.html#cb157-32" tabindex="-1"></a>)</span>
<span id="cb157-33"><a href="附录1-r语言编程基础.html#cb157-33" tabindex="-1"></a></span>
<span id="cb157-34"><a href="附录1-r语言编程基础.html#cb157-34" tabindex="-1"></a><span class="co"># 创建动画</span></span>
<span id="cb157-35"><a href="附录1-r语言编程基础.html#cb157-35" tabindex="-1"></a>anim <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(all_frames, <span class="fu">aes</span>(X, Y)) <span class="sc">+</span></span>
<span id="cb157-36"><a href="附录1-r语言编程基础.html#cb157-36" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb157-37"><a href="附录1-r语言编程基础.html#cb157-37" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb157-38"><a href="附录1-r语言编程基础.html#cb157-38" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb157-39"><a href="附录1-r语言编程基础.html#cb157-39" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb157-40"><a href="附录1-r语言编程基础.html#cb157-40" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">400</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">400</span>)) <span class="sc">+</span></span>
<span id="cb157-41"><a href="附录1-r语言编程基础.html#cb157-41" tabindex="-1"></a>  <span class="fu">transition_time</span>(t) <span class="sc">+</span></span>
<span id="cb157-42"><a href="附录1-r语言编程基础.html#cb157-42" tabindex="-1"></a>  <span class="fu">shadow_mark</span>(<span class="at">past =</span> <span class="cn">FALSE</span>, <span class="at">alpha =</span> <span class="fl">0.05</span>)  <span class="co"># 保留轨迹痕迹</span></span>
<span id="cb157-43"><a href="附录1-r语言编程基础.html#cb157-43" tabindex="-1"></a></span>
<span id="cb157-44"><a href="附录1-r语言编程基础.html#cb157-44" tabindex="-1"></a><span class="co"># 渲染动画（可能需要几分钟时间）</span></span>
<span id="cb157-45"><a href="附录1-r语言编程基础.html#cb157-45" tabindex="-1"></a><span class="fu">animate</span>(anim, </span>
<span id="cb157-46"><a href="附录1-r语言编程基础.html#cb157-46" tabindex="-1"></a>        <span class="at">fps =</span> <span class="dv">20</span>, </span>
<span id="cb157-47"><a href="附录1-r语言编程基础.html#cb157-47" tabindex="-1"></a>        <span class="at">duration =</span> <span class="dv">30</span>, </span>
<span id="cb157-48"><a href="附录1-r语言编程基础.html#cb157-48" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">900</span>, </span>
<span id="cb157-49"><a href="附录1-r语言编程基础.html#cb157-49" tabindex="-1"></a>        <span class="at">height =</span> <span class="dv">900</span>,</span>
<span id="cb157-50"><a href="附录1-r语言编程基础.html#cb157-50" tabindex="-1"></a>        <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>())</span>
<span id="cb157-51"><a href="附录1-r语言编程基础.html#cb157-51" tabindex="-1"></a></span>
<span id="cb157-52"><a href="附录1-r语言编程基础.html#cb157-52" tabindex="-1"></a><span class="co"># 保存动画（可选）</span></span>
<span id="cb157-53"><a href="附录1-r语言编程基础.html#cb157-53" tabindex="-1"></a><span class="co"># anim_save(&quot;animation.gif&quot;, animation = last_animation())</span></span></code></pre></div>
<div id="生成音乐" class="section level5 hasAnchor" number="3.1.2.4.1">
<h5><span class="header-section-number">3.1.2.4.1</span> 生成音乐<a href="附录1-r语言编程基础.html#生成音乐" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="附录1-r语言编程基础.html#cb158-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;audio&quot;</span>)</span>
<span id="cb158-2"><a href="附录1-r语言编程基础.html#cb158-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb158-3"><a href="附录1-r语言编程基础.html#cb158-3" tabindex="-1"></a><span class="fu">library</span>(audio)</span>
<span id="cb158-4"><a href="附录1-r语言编程基础.html#cb158-4" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb158-5"><a href="附录1-r语言编程基础.html#cb158-5" tabindex="-1"></a>notes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">A =</span> <span class="dv">0</span>, <span class="at">B =</span> <span class="dv">2</span>, <span class="at">C =</span> <span class="dv">3</span>, <span class="at">D =</span> <span class="dv">5</span>, <span class="at">E =</span> <span class="dv">7</span>, <span class="at">F =</span> <span class="dv">8</span>, <span class="at">G =</span> <span class="dv">10</span>)</span>
<span id="cb158-6"><a href="附录1-r语言编程基础.html#cb158-6" tabindex="-1"></a>pitch <span class="ot">&lt;-</span> <span class="st">&quot;D D E D G F# D D E D A G D D D5 B G F# E C5 C5 B G A G&quot;</span></span>
<span id="cb158-7"><a href="附录1-r语言编程基础.html#cb158-7" tabindex="-1"></a>duration <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.25</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dv">2</span>),</span>
<span id="cb158-8"><a href="附录1-r语言编程基础.html#cb158-8" tabindex="-1"></a>              <span class="fl">0.75</span>, <span class="fl">0.25</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">0.75</span>, <span class="fl">0.25</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb158-9"><a href="附录1-r语言编程基础.html#cb158-9" tabindex="-1"></a>bday <span class="ot">&lt;-</span> <span class="fu">data_frame</span>(<span class="at">pitch =</span> <span class="fu">strsplit</span>(pitch, <span class="st">&quot; &quot;</span>)[[<span class="dv">1</span>]],</span>
<span id="cb158-10"><a href="附录1-r语言编程基础.html#cb158-10" tabindex="-1"></a>                   <span class="at">duration =</span> duration)</span>
<span id="cb158-11"><a href="附录1-r语言编程基础.html#cb158-11" tabindex="-1"></a></span>
<span id="cb158-12"><a href="附录1-r语言编程基础.html#cb158-12" tabindex="-1"></a>bday <span class="ot">&lt;-</span></span>
<span id="cb158-13"><a href="附录1-r语言编程基础.html#cb158-13" tabindex="-1"></a>  bday <span class="sc">%&gt;%</span></span>
<span id="cb158-14"><a href="附录1-r语言编程基础.html#cb158-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">octave =</span> <span class="fu">substring</span>(pitch, <span class="fu">nchar</span>(pitch)) <span class="sc">%&gt;%</span></span>
<span id="cb158-15"><a href="附录1-r语言编程基础.html#cb158-15" tabindex="-1"></a>  {<span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(.))} <span class="sc">%&gt;%</span></span>
<span id="cb158-16"><a href="附录1-r语言编程基础.html#cb158-16" tabindex="-1"></a>    <span class="fu">ifelse</span>(<span class="fu">is.na</span>(.), <span class="dv">4</span>, .),</span>
<span id="cb158-17"><a href="附录1-r语言编程基础.html#cb158-17" tabindex="-1"></a>  <span class="at">note =</span> notes[<span class="fu">substr</span>(pitch, <span class="dv">1</span>, <span class="dv">1</span>)],</span>
<span id="cb158-18"><a href="附录1-r语言编程基础.html#cb158-18" tabindex="-1"></a>  <span class="at">note =</span> note <span class="sc">+</span> <span class="fu">grepl</span>(<span class="st">&quot;#&quot;</span>, pitch) <span class="sc">-</span></span>
<span id="cb158-19"><a href="附录1-r语言编程基础.html#cb158-19" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">&quot;b&quot;</span>, pitch) <span class="sc">+</span> octave <span class="sc">*</span> <span class="dv">12</span> <span class="sc">+</span></span>
<span id="cb158-20"><a href="附录1-r语言编程基础.html#cb158-20" tabindex="-1"></a>    <span class="dv">12</span> <span class="sc">*</span> (note <span class="sc">&lt;</span> <span class="dv">3</span>),</span>
<span id="cb158-21"><a href="附录1-r语言编程基础.html#cb158-21" tabindex="-1"></a>  <span class="at">freq =</span> <span class="dv">2</span> <span class="sc">^</span> ((note <span class="sc">-</span> <span class="dv">60</span>) <span class="sc">/</span> <span class="dv">12</span>) <span class="sc">*</span> <span class="dv">440</span>)</span>
<span id="cb158-22"><a href="附录1-r语言编程基础.html#cb158-22" tabindex="-1"></a></span>
<span id="cb158-23"><a href="附录1-r语言编程基础.html#cb158-23" tabindex="-1"></a>tempo <span class="ot">&lt;-</span> <span class="dv">120</span></span>
<span id="cb158-24"><a href="附录1-r语言编程基础.html#cb158-24" tabindex="-1"></a>sample_rate <span class="ot">&lt;-</span> <span class="dv">44100</span></span>
<span id="cb158-25"><a href="附录1-r语言编程基础.html#cb158-25" tabindex="-1"></a></span>
<span id="cb158-26"><a href="附录1-r语言编程基础.html#cb158-26" tabindex="-1"></a>make_sine <span class="ot">&lt;-</span> <span class="cf">function</span>(freq, duration) {</span>
<span id="cb158-27"><a href="附录1-r语言编程基础.html#cb158-27" tabindex="-1"></a>  wave <span class="ot">&lt;-</span> <span class="fu">sin</span>(<span class="fu">seq</span>(<span class="dv">0</span>, duration <span class="sc">/</span> tempo <span class="sc">*</span> <span class="dv">60</span>, <span class="dv">1</span> <span class="sc">/</span> sample_rate) <span class="sc">*</span></span>
<span id="cb158-28"><a href="附录1-r语言编程基础.html#cb158-28" tabindex="-1"></a>                freq <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> pi)</span>
<span id="cb158-29"><a href="附录1-r语言编程基础.html#cb158-29" tabindex="-1"></a>  fade <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">50</span> <span class="sc">/</span> sample_rate)</span>
<span id="cb158-30"><a href="附录1-r语言编程基础.html#cb158-30" tabindex="-1"></a>  wave <span class="sc">*</span> <span class="fu">c</span>(fade, <span class="fu">rep</span>(<span class="dv">1</span>, <span class="fu">length</span>(wave) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">length</span>(fade)), <span class="fu">rev</span>(fade))</span>
<span id="cb158-31"><a href="附录1-r语言编程基础.html#cb158-31" tabindex="-1"></a>}</span>
<span id="cb158-32"><a href="附录1-r语言编程基础.html#cb158-32" tabindex="-1"></a></span>
<span id="cb158-33"><a href="附录1-r语言编程基础.html#cb158-33" tabindex="-1"></a>bday_wave <span class="ot">&lt;-</span></span>
<span id="cb158-34"><a href="附录1-r语言编程基础.html#cb158-34" tabindex="-1"></a>  <span class="fu">mapply</span>(make_sine, bday<span class="sc">$</span>freq, bday<span class="sc">$</span>duration) <span class="sc">%&gt;%</span></span>
<span id="cb158-35"><a href="附录1-r语言编程基础.html#cb158-35" tabindex="-1"></a>  <span class="fu">do.call</span>(<span class="st">&quot;c&quot;</span>, .)</span>
<span id="cb158-36"><a href="附录1-r语言编程基础.html#cb158-36" tabindex="-1"></a></span>
<span id="cb158-37"><a href="附录1-r语言编程基础.html#cb158-37" tabindex="-1"></a><span class="fu">play</span>(bday_wave)</span></code></pre></div>
</div>
<div id="更多有趣功能" class="section level5 hasAnchor" number="3.1.2.4.2">
<h5><span class="header-section-number">3.1.2.4.2</span> 更多有趣功能<a href="附录1-r语言编程基础.html#更多有趣功能" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>动态报告</strong>：用R Markdown生成可交互报告</li>
<li><strong>网络爬虫</strong>：抓取生态监测站数据</li>
<li><strong>地图绘制</strong>：可视化物种分布</li>
<li><strong>机器学习</strong>：预测生态变化趋势</li>
</ul>
</div>
</div>
</div>
<div id="环境设置和配置" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> 环境设置和配置<a href="附录1-r语言编程基础.html#环境设置和配置" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="r语言安装" class="section level4 hasAnchor" number="3.1.3.1">
<h4><span class="header-section-number">3.1.3.1</span> R语言安装<a href="附录1-r语言编程基础.html#r语言安装" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="下载和安装r" class="section level5 hasAnchor" number="3.1.3.1.1">
<h5><span class="header-section-number">3.1.3.1.1</span> 下载和安装R<a href="附录1-r语言编程基础.html#下载和安装r" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><strong>Windows系统:</strong></p>
<ol style="list-style-type: decimal">
<li><p>访问 <a href="https://cran.r-project.org/bin/windows/base/" class="uri">https://cran.r-project.org/bin/windows/base/</a></p></li>
<li><p>下载最新版R安装包(.exe)</p></li>
<li><p>右键以管理员身份运行安装程序</p></li>
<li><p>安装路径不要包含中文或空格</p></li>
<li><p>勾选”创建桌面快捷方式”</p></li>
</ol>
<p><strong>macOS系统:</strong></p>
<ol style="list-style-type: decimal">
<li><p>访问 <a href="https://cran.r-project.org/bin/macosx/" class="uri">https://cran.r-project.org/bin/macosx/</a></p></li>
<li><p>下载最新版R安装包(.pkg)</p></li>
<li><p>双击安装，可能需要右键”打开”绕过Gatekeeper限制</p></li>
<li><p>或通过Homebrew安装: <code>brew install --cask r</code></p></li>
</ol>
<p><strong>Linux系统:</strong><br />
- Ubuntu/Debian: <code>sudo apt-get install r-base</code><br />
- CentOS/RHEL: <code>sudo yum install R</code></p>
</div>
<div id="下载和安装rstudio" class="section level5 hasAnchor" number="3.1.3.1.2">
<h5><span class="header-section-number">3.1.3.1.2</span> 下载和安装RStudio<a href="附录1-r语言编程基础.html#下载和安装rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ol style="list-style-type: decimal">
<li><p>访问 <a href="https://www.rstudio.com/products/rstudio/download/" class="uri">https://www.rstudio.com/products/rstudio/download/</a></p></li>
<li><p>选择适合你系统的RStudio Desktop免费版</p></li>
<li><p>安装注意事项:</p>
<ul>
<li>Windows: 确保已安装R后再安装RStudio</li>
<li>macOS: 可能需要允许来自”未识别开发者”的应用</li>
<li>Linux: 可能需要安装依赖库<code>libssl-dev</code>等</li>
</ul></li>
</ol>
</div>
<div id="常见安装问题解决" class="section level5 hasAnchor" number="3.1.3.1.3">
<h5><span class="header-section-number">3.1.3.1.3</span> 常见安装问题解决<a href="附录1-r语言编程基础.html#常见安装问题解决" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>中文路径问题</strong>: 安装路径和用户名不要包含中文</p></li>
<li><p><strong>防火墙拦截</strong>: 临时关闭防火墙或添加R/RStudio为例外</p></li>
<li><p><strong>镜像源设置</strong>: 安装后运行:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="附录1-r语言编程基础.html#cb159-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN=</span><span class="st">&quot;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&quot;</span>))</span></code></pre></div></li>
<li><p><strong>依赖缺失</strong>:</p>
<ul>
<li>Windows: 安装Rtools</li>
<li>macOS: 安装Xcode命令行工具</li>
<li>Linux: 安装开发工具链</li>
</ul></li>
</ul>
</div>
<div id="验证安装" class="section level5 hasAnchor" number="3.1.3.1.4">
<h5><span class="header-section-number">3.1.3.1.4</span> 验证安装<a href="附录1-r语言编程基础.html#验证安装" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="附录1-r语言编程基础.html#cb160-1" tabindex="-1"></a><span class="co"># 在RStudio中运行这行代码，应该显示R的版本信息</span></span>
<span id="cb160-2"><a href="附录1-r语言编程基础.html#cb160-2" tabindex="-1"></a>R.version.string</span>
<span id="cb160-3"><a href="附录1-r语言编程基础.html#cb160-3" tabindex="-1"></a></span>
<span id="cb160-4"><a href="附录1-r语言编程基础.html#cb160-4" tabindex="-1"></a><span class="co"># 检查基本功能是否正常</span></span>
<span id="cb160-5"><a href="附录1-r语言编程基础.html#cb160-5" tabindex="-1"></a><span class="dv">1</span><span class="sc">+</span><span class="dv">1</span></span>
<span id="cb160-6"><a href="附录1-r语言编程基础.html#cb160-6" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
</div>
<div id="在vscode中配置r环境" class="section level5 hasAnchor" number="3.1.3.1.5">
<h5><span class="header-section-number">3.1.3.1.5</span> 在VSCode中配置R环境<a href="附录1-r语言编程基础.html#在vscode中配置r环境" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><strong>为什么选择VSCode？</strong><br />
- <strong>轻量高效</strong>：启动速度快，占用资源少<br />
- <strong>扩展性强</strong>：丰富的扩展生态系统<br />
- <strong>多语言支持</strong>：同时支持R、Python、Markdown等多种语言<br />
- <strong>版本控制集成</strong>：内置Git支持，便于代码管理<br />
- <strong>远程开发</strong>：支持SSH、容器、WSL等远程开发环境</p>
<p><strong>VSCode安装和配置步骤：</strong></p>
<ol style="list-style-type: decimal">
<li><strong>安装VSCode</strong>
<ul>
<li>访问 <a href="https://code.visualstudio.com/" class="uri">https://code.visualstudio.com/</a></li>
<li>下载适合你操作系统的版本并安装</li>
</ul></li>
<li><strong>安装R扩展</strong>
<ul>
<li>打开VSCode，点击左侧扩展图标（或按Ctrl+Shift+X）</li>
<li>搜索 “R” 并安装 “R” 扩展（由REditorSupport开发）</li>
<li>搜索 “R Debugger” 并安装调试器扩展</li>
</ul></li>
<li><strong>基本配置</strong>
<ul>
<li><p>打开设置（Ctrl+,）</p></li>
<li><p>搜索 “r.rterm” 设置R执行路径</p></li>
<li><p>搜索 “r.rpath” 设置R语言服务器路径</p></li>
<li><p>推荐设置：</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb161-1"><a href="附录1-r语言编程基础.html#cb161-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb161-2"><a href="附录1-r语言编程基础.html#cb161-2" tabindex="-1"></a>  <span class="dt">&quot;r.rterm.windows&quot;</span><span class="fu">:</span> <span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Program Files</span><span class="ch">\\</span><span class="st">R</span><span class="ch">\\</span><span class="st">R-4.3.1</span><span class="ch">\\</span><span class="st">bin</span><span class="ch">\\</span><span class="st">x64</span><span class="ch">\\</span><span class="st">R.exe&quot;</span><span class="fu">,</span></span>
<span id="cb161-3"><a href="附录1-r语言编程基础.html#cb161-3" tabindex="-1"></a>  <span class="dt">&quot;r.rterm.mac&quot;</span><span class="fu">:</span> <span class="st">&quot;/usr/local/bin/R&quot;</span><span class="fu">,</span></span>
<span id="cb161-4"><a href="附录1-r语言编程基础.html#cb161-4" tabindex="-1"></a>  <span class="dt">&quot;r.rterm.linux&quot;</span><span class="fu">:</span> <span class="st">&quot;/usr/bin/R&quot;</span><span class="fu">,</span></span>
<span id="cb161-5"><a href="附录1-r语言编程基础.html#cb161-5" tabindex="-1"></a>  <span class="dt">&quot;r.lsp.path&quot;</span><span class="fu">:</span> <span class="st">&quot;/usr/lib/R/bin/R&quot;</span><span class="fu">,</span></span>
<span id="cb161-6"><a href="附录1-r语言编程基础.html#cb161-6" tabindex="-1"></a>  <span class="dt">&quot;r.sessionWatcher&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb161-7"><a href="附录1-r语言编程基础.html#cb161-7" tabindex="-1"></a>  <span class="dt">&quot;r.bracketedPaste&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb161-8"><a href="附录1-r语言编程基础.html#cb161-8" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
</ul></li>
<li><strong>常用功能</strong>
<ul>
<li><strong>代码执行</strong>：Ctrl+Enter 执行当前行或选中代码</li>
<li><strong>代码补全</strong>：自动提供函数和参数建议</li>
<li><strong>语法高亮</strong>：彩色显示代码结构</li>
<li><strong>调试功能</strong>：设置断点，逐步调试代码</li>
<li><strong>绘图查看</strong>：内置绘图查看器</li>
<li><strong>Markdown支持</strong>：直接编写和预览R Markdown文档</li>
</ul></li>
<li><strong>推荐扩展</strong>
<ul>
<li><strong>Rainbow CSV</strong>：彩色显示CSV文件</li>
<li><strong>GitLens</strong>：增强的Git功能</li>
<li><strong>Bracket Pair Colorizer</strong>：彩色匹配括号</li>
<li><strong>Project Manager</strong>：项目管理工具</li>
<li><strong>Live Share</strong>：实时协作编程</li>
</ul></li>
<li><strong>优势对比</strong>
<ul>
<li><strong>相比RStudio</strong>：更轻量，启动更快，扩展更多</li>
<li><strong>相比纯文本编辑器</strong>：提供完整的IDE功能</li>
<li><strong>适合场景</strong>：大型项目、多语言开发、远程开发</li>
</ul></li>
</ol>
<p><strong>注意事项：</strong><br />
- 确保已安装R后再配置VSCode<br />
- 路径设置需要根据实际安装位置调整<br />
- 首次使用可能需要安装相关依赖包</p>
</div>
</div>
</div>
<div id="项目文件夹结构设置" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> 项目文件夹结构设置<a href="附录1-r语言编程基础.html#项目文件夹结构设置" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>建立良好的文件组织习惯是数据分析的基础：</p>
<pre><code>生态学R语言课程/
├── 第01课-森林调查/
│   ├── 数据/
│   ├── 脚本/
│   └── 结果/
├── 第02课-物种名称/
│   ├── 数据/
│   ├── 脚本/
│   └── 结果/
├── ...
└── 参考资料/</code></pre>
</div>
<div id="基本包管理" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> 基本包管理<a href="附录1-r语言编程基础.html#基本包管理" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="r包的概念" class="section level4 hasAnchor" number="3.1.5.1">
<h4><span class="header-section-number">3.1.5.1</span> R包的概念<a href="附录1-r语言编程基础.html#r包的概念" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>什么是R包</strong>：R包是扩展R功能的代码、数据和文档集合</li>
<li><strong>包的作用</strong>：提供专业统计方法、可视化工具、数据导入等功能</li>
<li><strong>生态学常用包</strong>：vegan(群落分析)、ggplot2(可视化)、dplyr(数据处理)等</li>
</ul>
</div>
<div id="rtools的作用" class="section level4 hasAnchor" number="3.1.5.2">
<h4><span class="header-section-number">3.1.5.2</span> Rtools的作用<a href="附录1-r语言编程基础.html#rtools的作用" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>Windows专用</strong>：用于编译需要C/C++/Fortran代码的R包</li>
<li><strong>适用场景</strong>：
<ul>
<li>安装需要编译的包(如部分生态学模型包)</li>
<li>开发自己的R包</li>
<li>使用某些高性能计算功能</li>
</ul></li>
<li><strong>安装方法</strong>：从CRAN下载对应R版本的Rtools安装包</li>
</ul>
</div>
<div id="包管理基础" class="section level4 hasAnchor" number="3.1.5.3">
<h4><span class="header-section-number">3.1.5.3</span> 包管理基础<a href="附录1-r语言编程基础.html#包管理基础" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="附录1-r语言编程基础.html#cb163-1" tabindex="-1"></a><span class="co"># 检查已安装的包</span></span>
<span id="cb163-2"><a href="附录1-r语言编程基础.html#cb163-2" tabindex="-1"></a><span class="fu">installed.packages</span>()</span>
<span id="cb163-3"><a href="附录1-r语言编程基础.html#cb163-3" tabindex="-1"></a></span>
<span id="cb163-4"><a href="附录1-r语言编程基础.html#cb163-4" tabindex="-1"></a><span class="co"># 安装新包(从CRAN)</span></span>
<span id="cb163-5"><a href="附录1-r语言编程基础.html#cb163-5" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>) </span>
<span id="cb163-6"><a href="附录1-r语言编程基础.html#cb163-6" tabindex="-1"></a></span>
<span id="cb163-7"><a href="附录1-r语言编程基础.html#cb163-7" tabindex="-1"></a><span class="co"># 从GitHub安装开发版包</span></span>
<span id="cb163-8"><a href="附录1-r语言编程基础.html#cb163-8" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb163-9"><a href="附录1-r语言编程基础.html#cb163-9" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;作者/包名&quot;)</span></span>
<span id="cb163-10"><a href="附录1-r语言编程基础.html#cb163-10" tabindex="-1"></a></span>
<span id="cb163-11"><a href="附录1-r语言编程基础.html#cb163-11" tabindex="-1"></a><span class="co"># 加载包</span></span>
<span id="cb163-12"><a href="附录1-r语言编程基础.html#cb163-12" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb163-13"><a href="附录1-r语言编程基础.html#cb163-13" tabindex="-1"></a></span>
<span id="cb163-14"><a href="附录1-r语言编程基础.html#cb163-14" tabindex="-1"></a><span class="co"># 更新所有包</span></span>
<span id="cb163-15"><a href="附录1-r语言编程基础.html#cb163-15" tabindex="-1"></a><span class="fu">update.packages</span>()</span>
<span id="cb163-16"><a href="附录1-r语言编程基础.html#cb163-16" tabindex="-1"></a></span>
<span id="cb163-17"><a href="附录1-r语言编程基础.html#cb163-17" tabindex="-1"></a><span class="co"># 查看包帮助文档</span></span>
<span id="cb163-18"><a href="附录1-r语言编程基础.html#cb163-18" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package=</span><span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
</div>
<div id="如何寻找合适的包" class="section level4 hasAnchor" number="3.1.5.4">
<h4><span class="header-section-number">3.1.5.4</span> 如何寻找合适的包<a href="附录1-r语言编程基础.html#如何寻找合适的包" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>CRAN任务视图</strong>：<a href="https://cran.r-project.org/web/views/" class="uri">https://cran.r-project.org/web/views/</a>
<ul>
<li>如Environmetrics任务视图包含生态学相关包</li>
</ul></li>
<li><strong>RStudio包推荐</strong>：通过RStudio的Packages面板浏览</li>
<li><strong>学术文献</strong>：参考领域内论文使用的方法和包</li>
<li><strong>社区推荐</strong>：R-bloggers、Stack Overflow等平台</li>
</ul>
</div>
</div>
<div id="工作目录设置" class="section level3 hasAnchor" number="3.1.6">
<h3><span class="header-section-number">3.1.6</span> 工作目录设置<a href="附录1-r语言编程基础.html#工作目录设置" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="什么是工作目录" class="section level4 hasAnchor" number="3.1.6.1">
<h4><span class="header-section-number">3.1.6.1</span> 什么是工作目录？<a href="附录1-r语言编程基础.html#什么是工作目录" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>简单理解</strong>：就像你办公桌上的文件夹，R会默认从这个文件夹里找文件</li>
<li><strong>作用</strong>：告诉R在哪里读取数据和保存结果</li>
<li><strong>类比</strong>：就像在图书馆找书需要知道书架位置一样</li>
</ul>
</div>
<div id="为什么要设置工作目录" class="section level4 hasAnchor" number="3.1.6.2">
<h4><span class="header-section-number">3.1.6.2</span> 为什么要设置工作目录？<a href="附录1-r语言编程基础.html#为什么要设置工作目录" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>方便管理</strong>：所有课程文件可以分类存放</li>
<li><strong>避免错误</strong>：R能准确找到你的数据文件</li>
<li><strong>提高效率</strong>：不用每次都输入完整文件路径</li>
</ul>
</div>
<div id="基本操作" class="section level4 hasAnchor" number="3.1.6.3">
<h4><span class="header-section-number">3.1.6.3</span> 基本操作<a href="附录1-r语言编程基础.html#基本操作" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="附录1-r语言编程基础.html#cb164-1" tabindex="-1"></a><span class="co"># 查看当前工作目录(就像查看你现在在哪个文件夹)</span></span>
<span id="cb164-2"><a href="附录1-r语言编程基础.html#cb164-2" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb164-3"><a href="附录1-r语言编程基础.html#cb164-3" tabindex="-1"></a></span>
<span id="cb164-4"><a href="附录1-r语言编程基础.html#cb164-4" tabindex="-1"></a><span class="co"># 设置工作目录(告诉R使用哪个文件夹)</span></span>
<span id="cb164-5"><a href="附录1-r语言编程基础.html#cb164-5" tabindex="-1"></a><span class="co"># 注意：路径中的斜杠方向</span></span>
<span id="cb164-6"><a href="附录1-r语言编程基础.html#cb164-6" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:/Users/你的用户名/生态学R语言课程&quot;</span>) </span>
<span id="cb164-7"><a href="附录1-r语言编程基础.html#cb164-7" tabindex="-1"></a></span>
<span id="cb164-8"><a href="附录1-r语言编程基础.html#cb164-8" tabindex="-1"></a><span class="co"># 列出当前目录下的文件(看看这个文件夹里有什么)</span></span>
<span id="cb164-9"><a href="附录1-r语言编程基础.html#cb164-9" tabindex="-1"></a><span class="fu">list.files</span>()</span>
<span id="cb164-10"><a href="附录1-r语言编程基础.html#cb164-10" tabindex="-1"></a></span>
<span id="cb164-11"><a href="附录1-r语言编程基础.html#cb164-11" tabindex="-1"></a><span class="co"># 小技巧：在RStudio中可以通过菜单设置工作目录更简单：</span></span>
<span id="cb164-12"><a href="附录1-r语言编程基础.html#cb164-12" tabindex="-1"></a><span class="co"># Session → Set Working Directory → Choose Directory</span></span></code></pre></div>
</div>
<div id="注意事项" class="section level4 hasAnchor" number="3.1.6.4">
<h4><span class="header-section-number">3.1.6.4</span> 注意事项<a href="附录1-r语言编程基础.html#注意事项" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>路径中不要有中文</li>
<li>Windows系统使用正斜杠”/“或双反斜杠”\”</li>
<li>建议为每节课创建单独的子文件夹</li>
</ul>
</div>
</div>
<div id="课前准备检查清单" class="section level3 hasAnchor" number="3.1.7">
<h3><span class="header-section-number">3.1.7</span> 课前准备检查清单<a href="附录1-r语言编程基础.html#课前准备检查清单" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul class="task-list">
<li><label><input type="checkbox" />R软件安装成功</label></li>
<li><label><input type="checkbox" />能够运行简单的R代码</label></li>
<li><label><input type="checkbox" />创建了课程文件夹结构</label></li>
<li><label><input type="checkbox" />理解了学习R语言的重要性</label></li>
<li><label><input type="checkbox" />准备好投入时间学习编程思维</label></li>
</ul>
</div>
</div>
<div id="数值向量创建与基本统计计算" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> 数值向量创建与基本统计计算<a href="附录1-r语言编程基础.html#数值向量创建与基本统计计算" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在野外森林调查中，测量树木胸径（DBH，距地面1.3米处的直径）是评估森林生长状况的基本方法。我们需要计算样地内树木的平均胸径来了解林分特征。</p>
</div>
<div id="演示数据" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="附录1-r语言编程基础.html#cb165-1" tabindex="-1"></a><span class="co"># 某样地内10棵马尾松的胸径测量值（单位：厘米）</span></span>
<span id="cb165-2"><a href="附录1-r语言编程基础.html#cb165-2" tabindex="-1"></a>tree_dbh <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">15.2</span>, <span class="fl">18.7</span>, <span class="fl">22.1</span>, <span class="fl">19.5</span>, <span class="fl">16.8</span>, <span class="fl">20.3</span>, <span class="fl">17.9</span>, <span class="fl">21.4</span>, <span class="fl">19.2</span>, <span class="fl">18.6</span>)</span></code></pre></div>
</div>
<div id="课堂演示过程" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="附录1-r语言编程基础.html#cb166-1" tabindex="-1"></a><span class="co"># 1. 创建胸径数据向量</span></span>
<span id="cb166-2"><a href="附录1-r语言编程基础.html#cb166-2" tabindex="-1"></a>tree_dbh <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">15.2</span>, <span class="fl">18.7</span>, <span class="fl">22.1</span>, <span class="fl">19.5</span>, <span class="fl">16.8</span>, <span class="fl">20.3</span>, <span class="fl">17.9</span>, <span class="fl">21.4</span>, <span class="fl">19.2</span>, <span class="fl">18.6</span>)</span>
<span id="cb166-3"><a href="附录1-r语言编程基础.html#cb166-3" tabindex="-1"></a></span>
<span id="cb166-4"><a href="附录1-r语言编程基础.html#cb166-4" tabindex="-1"></a><span class="co"># 2. 查看数据</span></span>
<span id="cb166-5"><a href="附录1-r语言编程基础.html#cb166-5" tabindex="-1"></a>tree_dbh</span>
<span id="cb166-6"><a href="附录1-r语言编程基础.html#cb166-6" tabindex="-1"></a><span class="fu">length</span>(tree_dbh)  <span class="co"># 查看测量了多少棵树</span></span>
<span id="cb166-7"><a href="附录1-r语言编程基础.html#cb166-7" tabindex="-1"></a></span>
<span id="cb166-8"><a href="附录1-r语言编程基础.html#cb166-8" tabindex="-1"></a><span class="co"># 3. 计算平均胸径</span></span>
<span id="cb166-9"><a href="附录1-r语言编程基础.html#cb166-9" tabindex="-1"></a>mean_dbh <span class="ot">&lt;-</span> <span class="fu">mean</span>(tree_dbh)</span>
<span id="cb166-10"><a href="附录1-r语言编程基础.html#cb166-10" tabindex="-1"></a>mean_dbh</span>
<span id="cb166-11"><a href="附录1-r语言编程基础.html#cb166-11" tabindex="-1"></a></span>
<span id="cb166-12"><a href="附录1-r语言编程基础.html#cb166-12" tabindex="-1"></a><span class="co"># 4. 计算总树数</span></span>
<span id="cb166-13"><a href="附录1-r语言编程基础.html#cb166-13" tabindex="-1"></a>tree_count <span class="ot">&lt;-</span> <span class="fu">length</span>(tree_dbh)</span>
<span id="cb166-14"><a href="附录1-r语言编程基础.html#cb166-14" tabindex="-1"></a>tree_count</span>
<span id="cb166-15"><a href="附录1-r语言编程基础.html#cb166-15" tabindex="-1"></a></span>
<span id="cb166-16"><a href="附录1-r语言编程基础.html#cb166-16" tabindex="-1"></a><span class="co"># 5. 简单的数学运算</span></span>
<span id="cb166-17"><a href="附录1-r语言编程基础.html#cb166-17" tabindex="-1"></a>max_dbh <span class="ot">&lt;-</span> <span class="fu">max</span>(tree_dbh)  <span class="co"># 最大胸径</span></span>
<span id="cb166-18"><a href="附录1-r语言编程基础.html#cb166-18" tabindex="-1"></a>min_dbh <span class="ot">&lt;-</span> <span class="fu">min</span>(tree_dbh)  <span class="co"># 最小胸径</span></span>
<span id="cb166-19"><a href="附录1-r语言编程基础.html#cb166-19" tabindex="-1"></a>total_dbh <span class="ot">&lt;-</span> <span class="fu">sum</span>(tree_dbh)  <span class="co"># 胸径总和</span></span></code></pre></div>
</div>
<div id="r语言知识点详解" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="向量创建函数-c" class="section level4 hasAnchor" number="3.2.4.1">
<h4><span class="header-section-number">3.2.4.1</span> 向量创建函数 <code>c()</code><a href="附录1-r语言编程基础.html#向量创建函数-c" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>是什么</strong>：<code>c()</code> 是combine的缩写，用于将多个值组合成一个向量</li>
<li><strong>语法</strong>：<code>c(值1, 值2, 值3, ...)</code></li>
<li><strong>重要特点</strong>：
<ul>
<li>向量中的所有元素必须是同一类型（数值、字符或逻辑）</li>
<li>如果混合不同类型，R会自动转换为最通用的类型</li>
<li>向量是R中最基本的数据结构</li>
</ul></li>
<li><strong>常见错误</strong>：忘记加逗号分隔值，如<code>c(1 2 3)</code>是错误的</li>
<li><strong>最佳实践</strong>：给向量起有意义的名字，如<code>tree_dbh</code>而不是<code>x</code></li>
</ul>
</div>
<div id="变量赋值操作符--" class="section level4 hasAnchor" number="3.2.4.2">
<h4><span class="header-section-number">3.2.4.2</span> 变量赋值操作符 <code>&lt;-</code><a href="附录1-r语言编程基础.html#变量赋值操作符--" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>是什么</strong>：将右边的值赋给左边的变量名</li>
<li><strong>语法</strong>：<code>变量名 &lt;- 值</code></li>
<li><strong>为什么用 <code>&lt;-</code> 而不是 <code>=</code></strong>：
<ul>
<li><code>&lt;-</code> 是R的传统赋值符号，更清晰地表示赋值方向</li>
<li><code>=</code> 也可以用，但在某些情况下可能引起混淆</li>
<li>建议统一使用 <code>&lt;-</code> 保持代码风格一致</li>
</ul></li>
<li><strong>变量命名规则</strong>：
<ul>
<li>只能包含字母、数字、点(.)和下划线(_)</li>
<li>不能以数字开头</li>
<li>区分大小写</li>
<li>建议使用有意义的名称</li>
</ul></li>
</ul>
</div>
<div id="基本统计函数" class="section level4 hasAnchor" number="3.2.4.3">
<h4><span class="header-section-number">3.2.4.3</span> 基本统计函数<a href="附录1-r语言编程基础.html#基本统计函数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="mean---计算平均值" class="section level5 hasAnchor" number="3.2.4.3.1">
<h5><span class="header-section-number">3.2.4.3.1</span> <code>mean()</code> - 计算平均值<a href="附录1-r语言编程基础.html#mean---计算平均值" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>mean(x, na.rm = FALSE)</code></li>
<li><strong>参数说明</strong>：
<ul>
<li><code>x</code>：数值向量</li>
<li><code>na.rm</code>：是否移除缺失值，默认FALSE</li>
</ul></li>
<li><strong>返回值</strong>：数值，向量的算术平均数</li>
<li><strong>注意事项</strong>：如果向量包含NA值，结果会是NA，除非设置<code>na.rm = TRUE</code></li>
</ul>
</div>
<div id="length---计算向量长度" class="section level5 hasAnchor" number="3.2.4.3.2">
<h5><span class="header-section-number">3.2.4.3.2</span> <code>length()</code> - 计算向量长度<a href="附录1-r语言编程基础.html#length---计算向量长度" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>length(x)</code></li>
<li><strong>作用</strong>：返回向量中元素的个数</li>
<li><strong>应用场景</strong>：统计样本数量、检查数据完整性</li>
</ul>
</div>
<div id="max-和-min---最大值和最小值" class="section level5 hasAnchor" number="3.2.4.3.3">
<h5><span class="header-section-number">3.2.4.3.3</span> <code>max()</code> 和 <code>min()</code> - 最大值和最小值<a href="附录1-r语言编程基础.html#max-和-min---最大值和最小值" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>max(x, na.rm = FALSE)</code>，<code>min(x, na.rm = FALSE)</code></li>
<li><strong>作用</strong>：找出向量中的最大值和最小值</li>
<li><strong>参数</strong>：与mean()相同，可以设置na.rm参数</li>
</ul>
</div>
<div id="sum---求和" class="section level5 hasAnchor" number="3.2.4.3.4">
<h5><span class="header-section-number">3.2.4.3.4</span> <code>sum()</code> - 求和<a href="附录1-r语言编程基础.html#sum---求和" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>sum(x, na.rm = FALSE)</code></li>
<li><strong>作用</strong>：计算向量所有元素的总和</li>
<li><strong>应用</strong>：计算总量、累计值等</li>
</ul>
</div>
</div>
<div id="数据查看" class="section level4 hasAnchor" number="3.2.4.4">
<h4><span class="header-section-number">3.2.4.4</span> 数据查看<a href="附录1-r语言编程基础.html#数据查看" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>直接输入变量名</strong>：最简单的查看方式，直接显示变量内容</li>
<li><strong>自动打印机制</strong>：R会自动显示表达式的结果</li>
<li><strong>向量显示格式</strong>：会显示<code>[1]</code>表示第一个元素的位置</li>
</ul>
</div>
</div>
<div id="课后练习" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某湿地调查中测量了8棵柳树的树高（单位：米）： <code>tree_height &lt;- c(4.2, 5.1, 3.8, 4.7, 5.3, 4.9, 4.1, 4.6)</code></p>
<p>请完成（仅使用本课学过的向量和基本统计函数）： 1. 创建树高向量并查看数据</p>
<ol start="2" style="list-style-type: decimal">
<li><p>计算平均树高</p></li>
<li><p>找出最高的树有多高</p></li>
<li><p>统计总共测量了多少棵树</p></li>
<li><p>计算所有树的总高度</p></li>
<li><p>计算树高的标准差（提示：使用sd()函数）</p></li>
</ol>
</div>
</div>
<div id="字符型数据处理与向量索引操作" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> 字符型数据处理与向量索引操作<a href="附录1-r语言编程基础.html#字符型数据处理与向量索引操作" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-1" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在野外鸟类观察中，需要记录观察到的鸟类物种名单，这是生物多样性调查的基础工作。我们要学会如何在R中管理物种名称数据。</p>
</div>
<div id="演示数据-1" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="附录1-r语言编程基础.html#cb167-1" tabindex="-1"></a><span class="co"># 某公园早晨观察到的鸟类物种</span></span>
<span id="cb167-2"><a href="附录1-r语言编程基础.html#cb167-2" tabindex="-1"></a>bird_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;白头鹎&quot;</span>, <span class="st">&quot;麻雀&quot;</span>, <span class="st">&quot;喜鹊&quot;</span>, <span class="st">&quot;乌鸦&quot;</span>, <span class="st">&quot;红嘴蓝鹊&quot;</span>, <span class="st">&quot;大山雀&quot;</span>)</span></code></pre></div>
</div>
<div id="课堂演示过程-1" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="附录1-r语言编程基础.html#cb168-1" tabindex="-1"></a><span class="co"># 1. 创建鸟类物种名单</span></span>
<span id="cb168-2"><a href="附录1-r语言编程基础.html#cb168-2" tabindex="-1"></a>bird_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;白头鹎&quot;</span>, <span class="st">&quot;麻雀&quot;</span>, <span class="st">&quot;喜鹊&quot;</span>, <span class="st">&quot;乌鸦&quot;</span>, <span class="st">&quot;红嘴蓝鹊&quot;</span>, <span class="st">&quot;大山雀&quot;</span>)</span>
<span id="cb168-3"><a href="附录1-r语言编程基础.html#cb168-3" tabindex="-1"></a></span>
<span id="cb168-4"><a href="附录1-r语言编程基础.html#cb168-4" tabindex="-1"></a><span class="co"># 2. 查看物种名单</span></span>
<span id="cb168-5"><a href="附录1-r语言编程基础.html#cb168-5" tabindex="-1"></a>bird_species</span>
<span id="cb168-6"><a href="附录1-r语言编程基础.html#cb168-6" tabindex="-1"></a><span class="fu">print</span>(bird_species)  <span class="co"># 另一种显示方法</span></span>
<span id="cb168-7"><a href="附录1-r语言编程基础.html#cb168-7" tabindex="-1"></a></span>
<span id="cb168-8"><a href="附录1-r语言编程基础.html#cb168-8" tabindex="-1"></a><span class="co"># 3. 统计观察到的物种数量</span></span>
<span id="cb168-9"><a href="附录1-r语言编程基础.html#cb168-9" tabindex="-1"></a>species_count <span class="ot">&lt;-</span> <span class="fu">length</span>(bird_species)</span>
<span id="cb168-10"><a href="附录1-r语言编程基础.html#cb168-10" tabindex="-1"></a>species_count</span>
<span id="cb168-11"><a href="附录1-r语言编程基础.html#cb168-11" tabindex="-1"></a></span>
<span id="cb168-12"><a href="附录1-r语言编程基础.html#cb168-12" tabindex="-1"></a><span class="co"># 4. 访问特定位置的物种</span></span>
<span id="cb168-13"><a href="附录1-r语言编程基础.html#cb168-13" tabindex="-1"></a>bird_species[<span class="dv">1</span>]  <span class="co"># 第一个物种</span></span>
<span id="cb168-14"><a href="附录1-r语言编程基础.html#cb168-14" tabindex="-1"></a>bird_species[<span class="dv">3</span>]  <span class="co"># 第三个物种</span></span>
<span id="cb168-15"><a href="附录1-r语言编程基础.html#cb168-15" tabindex="-1"></a></span>
<span id="cb168-16"><a href="附录1-r语言编程基础.html#cb168-16" tabindex="-1"></a><span class="co"># 5. 添加新观察到的物种</span></span>
<span id="cb168-17"><a href="附录1-r语言编程基础.html#cb168-17" tabindex="-1"></a>bird_species <span class="ot">&lt;-</span> <span class="fu">c</span>(bird_species, <span class="st">&quot;燕子&quot;</span>)</span>
<span id="cb168-18"><a href="附录1-r语言编程基础.html#cb168-18" tabindex="-1"></a>bird_species</span>
<span id="cb168-19"><a href="附录1-r语言编程基础.html#cb168-19" tabindex="-1"></a></span>
<span id="cb168-20"><a href="附录1-r语言编程基础.html#cb168-20" tabindex="-1"></a><span class="co"># 6. 字符串操作</span></span>
<span id="cb168-21"><a href="附录1-r语言编程基础.html#cb168-21" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;今天观察到&quot;</span>, <span class="fu">length</span>(bird_species), <span class="st">&quot;种鸟类&quot;</span>)</span></code></pre></div>
</div>
<div id="r语言知识点详解-1" class="section level3 hasAnchor" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="字符型数据character-data" class="section level4 hasAnchor" number="3.3.4.1">
<h4><span class="header-section-number">3.3.4.1</span> 字符型数据（Character Data）<a href="附录1-r语言编程基础.html#字符型数据character-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>是什么</strong>：用引号包围的文本数据，R中的基本数据类型之一</li>
<li><strong>语法</strong>：<code>"文本内容"</code> 或 <code>'文本内容'</code></li>
<li><strong>重要特点</strong>：
<ul>
<li>单引号和双引号都可以，但要成对使用</li>
<li>如果文本中包含引号，需要转义或使用另一种引号包围</li>
<li>字符型数据在R中以向量形式存储</li>
</ul></li>
<li><strong>与数值的区别</strong>：
<ul>
<li>字符型：<code>"123"</code> - 这是文本，不能进行数学运算</li>
<li>数值型：<code>123</code> - 这是数字，可以进行数学运算</li>
</ul></li>
<li><strong>编码注意</strong>：中文字符需要确保R的编码设置正确</li>
</ul>
</div>
<div id="向量索引vector-indexing" class="section level4 hasAnchor" number="3.3.4.2">
<h4><span class="header-section-number">3.3.4.2</span> 向量索引（Vector Indexing）<a href="附录1-r语言编程基础.html#向量索引vector-indexing" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>是什么</strong>：通过位置编号访问向量中特定元素的方法</li>
<li><strong>语法</strong>：<code>向量名[位置]</code></li>
<li><strong>索引规则</strong>：
<ul>
<li>R的索引从1开始（不是0！）</li>
<li>可以使用负数排除特定位置：<code>bird_species[-1]</code>（排除第一个）</li>
<li>可以一次访问多个位置：<code>bird_species[c(1,3,5)]</code></li>
</ul></li>
<li><strong>超出范围</strong>：如果索引超出向量长度，返回NA</li>
<li><strong>实际应用</strong>：在生态学中用于提取特定样本、物种等</li>
</ul>
</div>
<div id="数据显示函数" class="section level4 hasAnchor" number="3.3.4.3">
<h4><span class="header-section-number">3.3.4.3</span> 数据显示函数<a href="附录1-r语言编程基础.html#数据显示函数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="print-函数" class="section level5 hasAnchor" number="3.3.4.3.1">
<h5><span class="header-section-number">3.3.4.3.1</span> <code>print()</code> 函数<a href="附录1-r语言编程基础.html#print-函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>print(x)</code></li>
<li><strong>与直接输入变量名的区别</strong>：
<ul>
<li>直接输入：仅在交互模式下显示</li>
<li><code>print()</code>：在脚本和函数中也会显示，更可控</li>
</ul></li>
<li><strong>应用场景</strong>：在循环、函数中需要显示结果时</li>
</ul>
</div>
</div>
<div id="向量合并和扩展" class="section level4 hasAnchor" number="3.3.4.4">
<h4><span class="header-section-number">3.3.4.4</span> 向量合并和扩展<a href="附录1-r语言编程基础.html#向量合并和扩展" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>添加元素</strong>：<code>c(原向量, 新元素)</code></li>
<li><strong>重要概念</strong>：R中的向量是不可变的，每次”添加”实际上是创建新向量</li>
<li><strong>效率考虑</strong>：频繁添加元素效率较低，大量数据建议预先分配空间</li>
<li><strong>实际应用</strong>：野外调查中动态添加新发现的物种</li>
</ul>
</div>
<div id="字符串连接函数-paste" class="section level4 hasAnchor" number="3.3.4.5">
<h4><span class="header-section-number">3.3.4.5</span> 字符串连接函数 <code>paste()</code><a href="附录1-r语言编程基础.html#字符串连接函数-paste" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>语法</strong>：<code>paste(..., sep = " ", collapse = NULL)</code></li>
<li><strong>参数详解</strong>：
<ul>
<li><code>...</code>：要连接的多个元素</li>
<li><code>sep</code>：分隔符，默认是空格</li>
<li><code>collapse</code>：如果提供，将结果向量合并为单个字符串</li>
</ul></li>
<li><strong>相关函数</strong>：
<ul>
<li><code>paste0()</code>：等同于<code>paste(..., sep = "")</code>，不使用分隔符</li>
<li><code>sprintf()</code>：格式化字符串，类似其他语言的printf</li>
</ul></li>
<li><strong>实际应用</strong>：生成报告文本、标签、文件名等</li>
</ul>
</div>
</div>
<div id="课后练习-1" class="section level3 hasAnchor" number="3.3.5">
<h3><span class="header-section-number">3.3.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某湿地调查中记录的水生植物： <code>water_plants &lt;- c("荷花", "芦苇", "菖蒲", "水葫芦", "睡莲")</code></p>
<p>请完成（使用向量、字符串操作、索引等已学内容）： 1. 创建植物名称向量并显示所有植物名称</p>
<ol start="2" style="list-style-type: decimal">
<li><p>计算记录了多少种植物（使用length()函数）</p></li>
<li><p>显示第2种和第4种植物的名称（使用向量索引）</p></li>
<li><p>添加”慈姑”到植物名单中（使用c()函数合并）</p></li>
<li><p>用paste()函数创建一句完整的调查报告</p></li>
<li><p>尝试查找”芦苇”在向量中的位置（提示：使用which()函数和==运算符）</p></li>
</ol>
</div>
</div>
<div id="数据框结构理解与多类型数据管理" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> 数据框结构理解与多类型数据管理<a href="附录1-r语言编程基础.html#数据框结构理解与多类型数据管理" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-2" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在植物群落调查中，需要同时记录多种信息：样方编号、物种名称、株高、是否存活等。这些不同类型的数据需要组织在一个表格中，这就需要用到数据框。</p>
</div>
<div id="演示数据-2" class="section level3 hasAnchor" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="附录1-r语言编程基础.html#cb169-1" tabindex="-1"></a><span class="co"># 某山坡5个样方的植物调查数据</span></span>
<span id="cb169-2"><a href="附录1-r语言编程基础.html#cb169-2" tabindex="-1"></a>plot_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb169-3"><a href="附录1-r语言编程基础.html#cb169-3" tabindex="-1"></a>  <span class="at">plot_id =</span> <span class="fu">c</span>(<span class="st">&quot;S001&quot;</span>, <span class="st">&quot;S002&quot;</span>, <span class="st">&quot;S003&quot;</span>, <span class="st">&quot;S004&quot;</span>, <span class="st">&quot;S005&quot;</span>),</span>
<span id="cb169-4"><a href="附录1-r语言编程基础.html#cb169-4" tabindex="-1"></a>  <span class="at">species =</span> <span class="fu">c</span>(<span class="st">&quot;马尾松&quot;</span>, <span class="st">&quot;杉木&quot;</span>, <span class="st">&quot;樟树&quot;</span>, <span class="st">&quot;栎树&quot;</span>, <span class="st">&quot;枫香&quot;</span>),</span>
<span id="cb169-5"><a href="附录1-r语言编程基础.html#cb169-5" tabindex="-1"></a>  <span class="at">height_m =</span> <span class="fu">c</span>(<span class="fl">12.5</span>, <span class="fl">8.3</span>, <span class="fl">15.2</span>, <span class="fl">10.7</span>, <span class="fl">9.8</span>),</span>
<span id="cb169-6"><a href="附录1-r语言编程基础.html#cb169-6" tabindex="-1"></a>  <span class="at">diameter_cm =</span> <span class="fu">c</span>(<span class="fl">18.2</span>, <span class="fl">12.5</span>, <span class="fl">22.1</span>, <span class="fl">16.8</span>, <span class="fl">14.3</span>),</span>
<span id="cb169-7"><a href="附录1-r语言编程基础.html#cb169-7" tabindex="-1"></a>  <span class="at">alive =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb169-8"><a href="附录1-r语言编程基础.html#cb169-8" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="课堂演示过程-2" class="section level3 hasAnchor" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="附录1-r语言编程基础.html#cb170-1" tabindex="-1"></a><span class="co"># 1. 创建植物调查数据框</span></span>
<span id="cb170-2"><a href="附录1-r语言编程基础.html#cb170-2" tabindex="-1"></a>plot_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb170-3"><a href="附录1-r语言编程基础.html#cb170-3" tabindex="-1"></a>  <span class="at">plot_id =</span> <span class="fu">c</span>(<span class="st">&quot;S001&quot;</span>, <span class="st">&quot;S002&quot;</span>, <span class="st">&quot;S003&quot;</span>, <span class="st">&quot;S004&quot;</span>, <span class="st">&quot;S005&quot;</span>),</span>
<span id="cb170-4"><a href="附录1-r语言编程基础.html#cb170-4" tabindex="-1"></a>  <span class="at">species =</span> <span class="fu">c</span>(<span class="st">&quot;马尾松&quot;</span>, <span class="st">&quot;杉木&quot;</span>, <span class="st">&quot;樟树&quot;</span>, <span class="st">&quot;栎树&quot;</span>, <span class="st">&quot;枫香&quot;</span>),</span>
<span id="cb170-5"><a href="附录1-r语言编程基础.html#cb170-5" tabindex="-1"></a>  <span class="at">height_m =</span> <span class="fu">c</span>(<span class="fl">12.5</span>, <span class="fl">8.3</span>, <span class="fl">15.2</span>, <span class="fl">10.7</span>, <span class="fl">9.8</span>),</span>
<span id="cb170-6"><a href="附录1-r语言编程基础.html#cb170-6" tabindex="-1"></a>  <span class="at">diameter_cm =</span> <span class="fu">c</span>(<span class="fl">18.2</span>, <span class="fl">12.5</span>, <span class="fl">22.1</span>, <span class="fl">16.8</span>, <span class="fl">14.3</span>),</span>
<span id="cb170-7"><a href="附录1-r语言编程基础.html#cb170-7" tabindex="-1"></a>  <span class="at">alive =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb170-8"><a href="附录1-r语言编程基础.html#cb170-8" tabindex="-1"></a>)</span>
<span id="cb170-9"><a href="附录1-r语言编程基础.html#cb170-9" tabindex="-1"></a></span>
<span id="cb170-10"><a href="附录1-r语言编程基础.html#cb170-10" tabindex="-1"></a><span class="co"># 2. 查看数据框</span></span>
<span id="cb170-11"><a href="附录1-r语言编程基础.html#cb170-11" tabindex="-1"></a>plot_data</span>
<span id="cb170-12"><a href="附录1-r语言编程基础.html#cb170-12" tabindex="-1"></a><span class="fu">print</span>(plot_data)</span>
<span id="cb170-13"><a href="附录1-r语言编程基础.html#cb170-13" tabindex="-1"></a></span>
<span id="cb170-14"><a href="附录1-r语言编程基础.html#cb170-14" tabindex="-1"></a><span class="co"># 3. 查看数据框结构</span></span>
<span id="cb170-15"><a href="附录1-r语言编程基础.html#cb170-15" tabindex="-1"></a><span class="fu">str</span>(plot_data)  <span class="co"># 显示每列的数据类型</span></span>
<span id="cb170-16"><a href="附录1-r语言编程基础.html#cb170-16" tabindex="-1"></a></span>
<span id="cb170-17"><a href="附录1-r语言编程基础.html#cb170-17" tabindex="-1"></a><span class="co"># 4. 查看数据框维度</span></span>
<span id="cb170-18"><a href="附录1-r语言编程基础.html#cb170-18" tabindex="-1"></a><span class="fu">nrow</span>(plot_data)  <span class="co"># 行数</span></span>
<span id="cb170-19"><a href="附录1-r语言编程基础.html#cb170-19" tabindex="-1"></a><span class="fu">ncol</span>(plot_data)  <span class="co"># 列数</span></span>
<span id="cb170-20"><a href="附录1-r语言编程基础.html#cb170-20" tabindex="-1"></a><span class="fu">dim</span>(plot_data)   <span class="co"># 行数和列数</span></span>
<span id="cb170-21"><a href="附录1-r语言编程基础.html#cb170-21" tabindex="-1"></a></span>
<span id="cb170-22"><a href="附录1-r语言编程基础.html#cb170-22" tabindex="-1"></a><span class="co"># 5. 查看前几行和后几行</span></span>
<span id="cb170-23"><a href="附录1-r语言编程基础.html#cb170-23" tabindex="-1"></a><span class="fu">head</span>(plot_data, <span class="dv">3</span>)  <span class="co"># 前3行</span></span>
<span id="cb170-24"><a href="附录1-r语言编程基础.html#cb170-24" tabindex="-1"></a><span class="fu">tail</span>(plot_data, <span class="dv">2</span>)   <span class="co"># 后2行</span></span>
<span id="cb170-25"><a href="附录1-r语言编程基础.html#cb170-25" tabindex="-1"></a></span>
<span id="cb170-26"><a href="附录1-r语言编程基础.html#cb170-26" tabindex="-1"></a><span class="co"># 6. 访问特定列</span></span>
<span id="cb170-27"><a href="附录1-r语言编程基础.html#cb170-27" tabindex="-1"></a>plot_data<span class="sc">$</span>species    <span class="co"># 物种列</span></span>
<span id="cb170-28"><a href="附录1-r语言编程基础.html#cb170-28" tabindex="-1"></a>plot_data<span class="sc">$</span>height_m   <span class="co"># 高度列</span></span>
<span id="cb170-29"><a href="附录1-r语言编程基础.html#cb170-29" tabindex="-1"></a></span>
<span id="cb170-30"><a href="附录1-r语言编程基础.html#cb170-30" tabindex="-1"></a><span class="co"># 7. 计算统计量</span></span>
<span id="cb170-31"><a href="附录1-r语言编程基础.html#cb170-31" tabindex="-1"></a><span class="fu">mean</span>(plot_data<span class="sc">$</span>height_m)  <span class="co"># 平均高度</span></span>
<span id="cb170-32"><a href="附录1-r语言编程基础.html#cb170-32" tabindex="-1"></a><span class="fu">sum</span>(plot_data<span class="sc">$</span>alive)      <span class="co"># 存活植物数量</span></span></code></pre></div>
</div>
<div id="r语言知识点详解-2" class="section level3 hasAnchor" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="数据框data-frame" class="section level4 hasAnchor" number="3.4.4.1">
<h4><span class="header-section-number">3.4.4.1</span> 数据框（Data Frame）<a href="附录1-r语言编程基础.html#数据框data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>是什么</strong>：R中最重要的数据结构，类似于Excel表格或数据库表</li>
<li><strong>语法</strong>：<code>data.frame(列名1 = 向量1, 列名2 = 向量2, ...)</code></li>
<li><strong>核心特点</strong>：
<ul>
<li>每列可以是不同的数据类型（数值、字符、逻辑）</li>
<li>但每列内部必须是相同类型</li>
<li>所有列必须有相同的长度（行数）</li>
<li>每行代表一个观察单位，每列代表一个变量</li>
</ul></li>
<li><strong>与矩阵的区别</strong>：
<ul>
<li>矩阵：所有元素必须是相同类型</li>
<li>数据框：不同列可以是不同类型</li>
</ul></li>
<li><strong>生态学应用</strong>：完美适合存储野外调查数据</li>
</ul>
</div>
<div id="r中的数据类型系统" class="section level4 hasAnchor" number="3.4.4.2">
<h4><span class="header-section-number">3.4.4.2</span> R中的数据类型系统<a href="附录1-r语言编程基础.html#r中的数据类型系统" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="数值型numericdouble" class="section level5 hasAnchor" number="3.4.4.2.1">
<h5><span class="header-section-number">3.4.4.2.1</span> 数值型（Numeric/Double）<a href="附录1-r语言编程基础.html#数值型numericdouble" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>特点</strong>：包含任何形式的数字，如整数、小数、科学计数法等</li>
<li><strong>示例</strong>：<code>12</code>, <code>8.3</code>, <code>15.2e-2</code></li>
<li><strong>用途</strong>：测量值、计数、比例等</li>
</ul>
</div>
<div id="字符型character" class="section level5 hasAnchor" number="3.4.4.2.2">
<h5><span class="header-section-number">3.4.4.2.2</span> 字符型（Character）<a href="附录1-r语言编程基础.html#字符型character" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>特点</strong>：文本数据，用引号包围</li>
<li><strong>示例</strong>：<code>"S001"</code>, <code>"马尾松"</code>, <code>"杉木"</code></li>
<li><strong>用途</strong>：名称、标识符、分类标签</li>
</ul>
</div>
<div id="逻辑型logical" class="section level5 hasAnchor" number="3.4.4.2.3">
<h5><span class="header-section-number">3.4.4.2.3</span> 逻辑型（Logical）<a href="附录1-r语言编程基础.html#逻辑型logical" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>特点</strong>：只有两个值：TRUE和FALSE</li>
<li><strong>示例</strong>：<code>TRUE</code>, <code>FALSE</code></li>
<li><strong>用途</strong>：是/否判断、条件标记</li>
<li><strong>运算</strong>：可以进行数学运算（TRUE=1, FALSE=0）</li>
</ul>
</div>
</div>
<div id="数据框结构查看函数" class="section level4 hasAnchor" number="3.4.4.3">
<h4><span class="header-section-number">3.4.4.3</span> 数据框结构查看函数<a href="附录1-r语言编程基础.html#数据框结构查看函数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="str---structure函数" class="section level5 hasAnchor" number="3.4.4.3.1">
<h5><span class="header-section-number">3.4.4.3.1</span> <code>str()</code> - Structure函数<a href="附录1-r语言编程基础.html#str---structure函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：显示数据框的完整结构信息</li>
<li><strong>显示内容</strong>：
<ul>
<li>数据框类型和维度</li>
<li>每列的数据类型</li>
<li>前几个值的预览</li>
</ul></li>
<li><strong>读法技巧</strong>：
<ul>
<li><code>'data.frame': 5 obs. of 5 variables</code> - 5行5列的数据框</li>
<li><code>$ plot_id : chr</code> - plot_id列是字符型</li>
<li><code>$ height_m: num</code> - height_m列是数值型</li>
</ul></li>
</ul>
</div>
<div id="head-和-tail" class="section level5 hasAnchor" number="3.4.4.3.2">
<h5><span class="header-section-number">3.4.4.3.2</span> <code>head()</code> 和 <code>tail()</code><a href="附录1-r语言编程基础.html#head-和-tail" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>head(x, n = 6)</code>, <code>tail(x, n = 6)</code></li>
<li><strong>作用</strong>：查看数据框的开头或结尾几行</li>
<li><strong>参数</strong>：n指定显示的行数，默认6行</li>
<li><strong>应用场景</strong>：
<ul>
<li>快速了解数据格式</li>
<li>检查数据导入是否正确</li>
<li>大数据集的初步查看</li>
</ul></li>
</ul>
</div>
<div id="维度函数" class="section level5 hasAnchor" number="3.4.4.3.3">
<h5><span class="header-section-number">3.4.4.3.3</span> 维度函数<a href="附录1-r语言编程基础.html#维度函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>nrow()</code></strong>：返回行数（观察数量）</li>
<li><strong><code>ncol()</code></strong>：返回列数（变量数量）</li>
<li><strong><code>dim()</code></strong>：返回维度向量c(行数, 列数)</li>
<li><strong><code>names()</code> 或 <code>colnames()</code></strong>：返回列名</li>
</ul>
</div>
</div>
<div id="数据框列访问" class="section level4 hasAnchor" number="3.4.4.4">
<h4><span class="header-section-number">3.4.4.4</span> 数据框列访问<a href="附录1-r语言编程基础.html#数据框列访问" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="美元符号-操作符" class="section level5 hasAnchor" number="3.4.4.4.1">
<h5><span class="header-section-number">3.4.4.4.1</span> 美元符号 <code>$</code> 操作符<a href="附录1-r语言编程基础.html#美元符号-操作符" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>数据框名$列名</code></li>
<li><strong>特点</strong>：
<ul>
<li>返回该列的向量</li>
<li>支持名称自动补全（在RStudio中）</li>
<li>最常用的列访问方式</li>
</ul></li>
<li><strong>注意</strong>：列名不需要引号</li>
</ul>
</div>
<div id="双括号-操作符" class="section level5 hasAnchor" number="3.4.4.4.2">
<h5><span class="header-section-number">3.4.4.4.2</span> 双括号 <code>[[]]</code> 操作符<a href="附录1-r语言编程基础.html#双括号-操作符" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>数据框名[["列名"]]</code> 或 <code>数据框名[[列位置]]</code></li>
<li><strong>与$的区别</strong>：
<ul>
<li>支持变量名作为列名：<code>df[[var_name]]</code></li>
<li>可以使用数字索引：<code>df[[1]]</code></li>
</ul></li>
</ul>
</div>
<div id="单括号-操作符" class="section level5 hasAnchor" number="3.4.4.4.3">
<h5><span class="header-section-number">3.4.4.4.3</span> 单括号 <code>[]</code> 操作符<a href="附录1-r语言编程基础.html#单括号-操作符" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>数据框名[行, 列]</code></li>
<li><strong>特点</strong>：返回数据框（保持原结构）</li>
<li><strong>示例</strong>：<code>plot_data[, "species"]</code> - 选择species列但保持数据框格式</li>
</ul>
</div>
</div>
</div>
<div id="课后练习-2" class="section level3 hasAnchor" number="3.4.5">
<h3><span class="header-section-number">3.4.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某河流生态调查数据：</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="附录1-r语言编程基础.html#cb171-1" tabindex="-1"></a>river_survey <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb171-2"><a href="附录1-r语言编程基础.html#cb171-2" tabindex="-1"></a>  <span class="at">site_id =</span> <span class="fu">c</span>(<span class="st">&quot;R01&quot;</span>, <span class="st">&quot;R02&quot;</span>, <span class="st">&quot;R03&quot;</span>, <span class="st">&quot;R04&quot;</span>),</span>
<span id="cb171-3"><a href="附录1-r语言编程基础.html#cb171-3" tabindex="-1"></a>  <span class="at">fish_species =</span> <span class="fu">c</span>(<span class="st">&quot;草鱼&quot;</span>, <span class="st">&quot;鲤鱼&quot;</span>, <span class="st">&quot;鲫鱼&quot;</span>, <span class="st">&quot;青鱼&quot;</span>),</span>
<span id="cb171-4"><a href="附录1-r语言编程基础.html#cb171-4" tabindex="-1"></a>  <span class="at">length_cm =</span> <span class="fu">c</span>(<span class="fl">25.3</span>, <span class="fl">18.7</span>, <span class="fl">12.4</span>, <span class="fl">31.2</span>),</span>
<span id="cb171-5"><a href="附录1-r语言编程基础.html#cb171-5" tabindex="-1"></a>  <span class="at">weight_g =</span> <span class="fu">c</span>(<span class="dv">680</span>, <span class="dv">420</span>, <span class="dv">180</span>, <span class="dv">1200</span>),</span>
<span id="cb171-6"><a href="附录1-r语言编程基础.html#cb171-6" tabindex="-1"></a>  <span class="at">mature =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb171-7"><a href="附录1-r语言编程基础.html#cb171-7" tabindex="-1"></a>)</span></code></pre></div>
<p>请完成（使用数据框操作、向量计算等已学内容）：</p>
<ol style="list-style-type: decimal">
<li><p>创建数据框并显示整个数据框</p></li>
<li><p>使用str()函数查看数据框的结构</p></li>
<li><p>计算鱼类的平均长度和平均重量（使用mean()和$操作符）</p></li>
<li><p>统计有多少条成熟的鱼（使用sum()和逻辑值运算）</p></li>
<li><p>显示所有鱼类的名称（使用$操作符）</p></li>
<li><p>计算最大和最小的鱼重量（使用max()和min()函数）</p></li>
<li><p>创建一个包含调查总结的字符串（使用paste()函数）</p></li>
</ol>
</div>
</div>
<div id="列表数据结构与数据分组管理" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> 列表数据结构与数据分组管理<a href="附录1-r语言编程基础.html#列表数据结构与数据分组管理" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-3" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>不同栖息地类型的物种多样性差异很大。我们需要比较森林、草地、湿地三种生境中的物种数量，这种多组数据的管理需要用到列表结构。</p>
</div>
<div id="演示数据-3" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="附录1-r语言编程基础.html#cb172-1" tabindex="-1"></a><span class="co"># 不同栖息地的物种数量调查（每个生境调查了4个样点）</span></span>
<span id="cb172-2"><a href="附录1-r语言编程基础.html#cb172-2" tabindex="-1"></a>forest_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">28</span>, <span class="dv">32</span>)</span>
<span id="cb172-3"><a href="附录1-r语言编程基础.html#cb172-3" tabindex="-1"></a>grassland_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">16</span>)  </span>
<span id="cb172-4"><a href="附录1-r语言编程基础.html#cb172-4" tabindex="-1"></a>wetland_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">11</span>, <span class="dv">13</span>)</span></code></pre></div>
</div>
<div id="课堂演示过程-3" class="section level3 hasAnchor" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="附录1-r语言编程基础.html#cb173-1" tabindex="-1"></a><span class="co"># 1. 创建各栖息地物种数据</span></span>
<span id="cb173-2"><a href="附录1-r语言编程基础.html#cb173-2" tabindex="-1"></a>forest_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">28</span>, <span class="dv">32</span>)</span>
<span id="cb173-3"><a href="附录1-r语言编程基础.html#cb173-3" tabindex="-1"></a>grassland_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">16</span>)  </span>
<span id="cb173-4"><a href="附录1-r语言编程基础.html#cb173-4" tabindex="-1"></a>wetland_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">11</span>, <span class="dv">13</span>)</span>
<span id="cb173-5"><a href="附录1-r语言编程基础.html#cb173-5" tabindex="-1"></a></span>
<span id="cb173-6"><a href="附录1-r语言编程基础.html#cb173-6" tabindex="-1"></a><span class="co"># 2. 创建栖息地数据列表</span></span>
<span id="cb173-7"><a href="附录1-r语言编程基础.html#cb173-7" tabindex="-1"></a>habitats <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb173-8"><a href="附录1-r语言编程基础.html#cb173-8" tabindex="-1"></a>  <span class="at">forest =</span> forest_species,</span>
<span id="cb173-9"><a href="附录1-r语言编程基础.html#cb173-9" tabindex="-1"></a>  <span class="at">grassland =</span> grassland_species,  </span>
<span id="cb173-10"><a href="附录1-r语言编程基础.html#cb173-10" tabindex="-1"></a>  <span class="at">wetland =</span> wetland_species</span>
<span id="cb173-11"><a href="附录1-r语言编程基础.html#cb173-11" tabindex="-1"></a>)</span>
<span id="cb173-12"><a href="附录1-r语言编程基础.html#cb173-12" tabindex="-1"></a></span>
<span id="cb173-13"><a href="附录1-r语言编程基础.html#cb173-13" tabindex="-1"></a><span class="co"># 3. 查看列表内容</span></span>
<span id="cb173-14"><a href="附录1-r语言编程基础.html#cb173-14" tabindex="-1"></a>habitats</span>
<span id="cb173-15"><a href="附录1-r语言编程基础.html#cb173-15" tabindex="-1"></a><span class="fu">str</span>(habitats)  <span class="co"># 查看列表结构</span></span>
<span id="cb173-16"><a href="附录1-r语言编程基础.html#cb173-16" tabindex="-1"></a></span>
<span id="cb173-17"><a href="附录1-r语言编程基础.html#cb173-17" tabindex="-1"></a><span class="co"># 4. 访问列表中的元素</span></span>
<span id="cb173-18"><a href="附录1-r语言编程基础.html#cb173-18" tabindex="-1"></a>habitats<span class="sc">$</span>forest      <span class="co"># 使用$访问</span></span>
<span id="cb173-19"><a href="附录1-r语言编程基础.html#cb173-19" tabindex="-1"></a>habitats[[<span class="st">&quot;forest&quot;</span>]] <span class="co"># 使用[[]]访问</span></span>
<span id="cb173-20"><a href="附录1-r语言编程基础.html#cb173-20" tabindex="-1"></a>habitats[[<span class="dv">1</span>]]        <span class="co"># 使用位置索引</span></span>
<span id="cb173-21"><a href="附录1-r语言编程基础.html#cb173-21" tabindex="-1"></a></span>
<span id="cb173-22"><a href="附录1-r语言编程基础.html#cb173-22" tabindex="-1"></a><span class="co"># 5. 计算各生境的平均物种数</span></span>
<span id="cb173-23"><a href="附录1-r语言编程基础.html#cb173-23" tabindex="-1"></a>forest_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(habitats<span class="sc">$</span>forest)</span>
<span id="cb173-24"><a href="附录1-r语言编程基础.html#cb173-24" tabindex="-1"></a>grassland_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(habitats<span class="sc">$</span>grassland)</span>
<span id="cb173-25"><a href="附录1-r语言编程基础.html#cb173-25" tabindex="-1"></a>wetland_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(habitats<span class="sc">$</span>wetland)</span>
<span id="cb173-26"><a href="附录1-r语言编程基础.html#cb173-26" tabindex="-1"></a></span>
<span id="cb173-27"><a href="附录1-r语言编程基础.html#cb173-27" tabindex="-1"></a><span class="co"># 6. 创建结果向量</span></span>
<span id="cb173-28"><a href="附录1-r语言编程基础.html#cb173-28" tabindex="-1"></a>habitat_means <span class="ot">&lt;-</span> <span class="fu">c</span>(forest_mean, grassland_mean, wetland_mean)</span>
<span id="cb173-29"><a href="附录1-r语言编程基础.html#cb173-29" tabindex="-1"></a><span class="fu">names</span>(habitat_means) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;森林&quot;</span>, <span class="st">&quot;草地&quot;</span>, <span class="st">&quot;湿地&quot;</span>)</span>
<span id="cb173-30"><a href="附录1-r语言编程基础.html#cb173-30" tabindex="-1"></a></span>
<span id="cb173-31"><a href="附录1-r语言编程基础.html#cb173-31" tabindex="-1"></a><span class="co"># 7. 比较结果</span></span>
<span id="cb173-32"><a href="附录1-r语言编程基础.html#cb173-32" tabindex="-1"></a>habitat_means</span>
<span id="cb173-33"><a href="附录1-r语言编程基础.html#cb173-33" tabindex="-1"></a><span class="fu">max</span>(habitat_means)  <span class="co"># 哪个生境物种最多</span></span>
<span id="cb173-34"><a href="附录1-r语言编程基础.html#cb173-34" tabindex="-1"></a><span class="fu">which.max</span>(habitat_means)  <span class="co"># 物种最多的生境位置</span></span></code></pre></div>
</div>
<div id="r语言知识点详解-3" class="section level3 hasAnchor" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="列表list数据结构" class="section level4 hasAnchor" number="3.5.4.1">
<h4><span class="header-section-number">3.5.4.1</span> 列表（List）数据结构<a href="附录1-r语言编程基础.html#列表list数据结构" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>是什么</strong>：R中最灵活的数据结构，可以存储不同类型、不同长度的数据</li>
<li><strong>语法</strong>：<code>list(名称1 = 数据1, 名称2 = 数据2, ...)</code></li>
<li><strong>核心特点</strong>：
<ul>
<li>每个元素可以是不同的数据类型（向量、数据框、甚至其他列表）</li>
<li>每个元素可以有不同的长度</li>
<li>元素可以有名称，也可以没有</li>
<li>是递归数据结构（可以包含其他列表）</li>
</ul></li>
<li><strong>与向量、数据框的区别</strong>：
<ul>
<li>向量：同类型，一维</li>
<li>数据框：不同列可以不同类型，但同列必须同类型，二维表格</li>
<li>列表：最灵活，可以存储任何类型的R对象</li>
</ul></li>
</ul>
</div>
<div id="列表元素访问方法" class="section level4 hasAnchor" number="3.5.4.2">
<h4><span class="header-section-number">3.5.4.2</span> 列表元素访问方法<a href="附录1-r语言编程基础.html#列表元素访问方法" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="美元符号-访问推荐" class="section level5 hasAnchor" number="3.5.4.2.1">
<h5><span class="header-section-number">3.5.4.2.1</span> 美元符号 <code>$</code> 访问（推荐）<a href="附录1-r语言编程基础.html#美元符号-访问推荐" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>列表名$元素名</code></li>
<li><strong>特点</strong>：
<ul>
<li>最直观、最常用的方法</li>
<li>只能用于有名称的元素</li>
<li>支持RStudio中的自动补全</li>
<li>返回元素的原始类型</li>
</ul></li>
</ul>
</div>
<div id="双括号-访问" class="section level5 hasAnchor" number="3.5.4.2.2">
<h5><span class="header-section-number">3.5.4.2.2</span> 双括号 <code>[[]]</code> 访问<a href="附录1-r语言编程基础.html#双括号-访问" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>语法</strong>：<code>列表名[["元素名"]]</code> 或 <code>列表名[[位置]]</code></p></li>
<li><p><strong>特点</strong>：</p>
<ul>
<li>更灵活，可以使用变量作为索引</li>
<li>可以使用数字位置索引</li>
<li>返回元素的原始类型</li>
</ul></li>
<li><p><strong>示例</strong>：</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="附录1-r语言编程基础.html#cb174-1" tabindex="-1"></a>element_name <span class="ot">&lt;-</span> <span class="st">&quot;forest&quot;</span></span>
<span id="cb174-2"><a href="附录1-r语言编程基础.html#cb174-2" tabindex="-1"></a>habitats[[element_name]]  <span class="co"># 使用变量</span></span>
<span id="cb174-3"><a href="附录1-r语言编程基础.html#cb174-3" tabindex="-1"></a>habitats[[<span class="dv">1</span>]]             <span class="co"># 使用位置</span></span></code></pre></div></li>
</ul>
</div>
<div id="单括号-访问" class="section level5 hasAnchor" number="3.5.4.2.3">
<h5><span class="header-section-number">3.5.4.2.3</span> 单括号 <code>[]</code> 访问<a href="附录1-r语言编程基础.html#单括号-访问" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>列表名[元素名或位置]</code></li>
<li><strong>特点</strong>：返回包含该元素的子列表（仍然是列表类型）</li>
<li><strong>与[[]]的区别</strong>：
<ul>
<li><code>habitats[1]</code> 返回包含第一个元素的列表</li>
<li><code>habitats[[1]]</code> 返回第一个元素本身（向量）</li>
</ul></li>
</ul>
</div>
</div>
<div id="向量命名系统" class="section level4 hasAnchor" number="3.5.4.3">
<h4><span class="header-section-number">3.5.4.3</span> 向量命名系统<a href="附录1-r语言编程基础.html#向量命名系统" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="names-函数" class="section level5 hasAnchor" number="3.5.4.3.1">
<h5><span class="header-section-number">3.5.4.3.1</span> <code>names()</code> 函数<a href="附录1-r语言编程基础.html#names-函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>作用</strong>：为向量的每个元素分配名称</p></li>
<li><p><strong>语法</strong>：<code>names(向量) &lt;- c("名称1", "名称2", ...)</code></p></li>
<li><p><strong>好处</strong>：</p>
<ul>
<li>增加数据的可读性</li>
<li>便于后续的数据访问和处理</li>
<li>在图表中自动显示有意义的标签</li>
</ul></li>
<li><p><strong>应用</strong>：</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="附录1-r语言编程基础.html#cb175-1" tabindex="-1"></a><span class="co"># 创建时命名</span></span>
<span id="cb175-2"><a href="附录1-r语言编程基础.html#cb175-2" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(数学 <span class="ot">=</span> <span class="dv">95</span>, 英语 <span class="ot">=</span> <span class="dv">88</span>, 物理 <span class="ot">=</span> <span class="dv">92</span>)</span>
<span id="cb175-3"><a href="附录1-r语言编程基础.html#cb175-3" tabindex="-1"></a></span>
<span id="cb175-4"><a href="附录1-r语言编程基础.html#cb175-4" tabindex="-1"></a><span class="co"># 后续命名</span></span>
<span id="cb175-5"><a href="附录1-r语言编程基础.html#cb175-5" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">88</span>, <span class="dv">92</span>)</span>
<span id="cb175-6"><a href="附录1-r语言编程基础.html#cb175-6" tabindex="-1"></a><span class="fu">names</span>(scores) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;数学&quot;</span>, <span class="st">&quot;英语&quot;</span>, <span class="st">&quot;物理&quot;</span>)</span></code></pre></div></li>
</ul>
</div>
</div>
<div id="比较和查找函数" class="section level4 hasAnchor" number="3.5.4.4">
<h4><span class="header-section-number">3.5.4.4</span> 比较和查找函数<a href="附录1-r语言编程基础.html#比较和查找函数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="max-和-min" class="section level5 hasAnchor" number="3.5.4.4.1">
<h5><span class="header-section-number">3.5.4.4.1</span> <code>max()</code> 和 <code>min()</code><a href="附录1-r语言编程基础.html#max-和-min" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：找到向量中的最大值或最小值</li>
<li><strong>语法</strong>：<code>max(x, na.rm = FALSE)</code></li>
<li><strong>参数</strong>：<code>na.rm</code> 控制是否忽略缺失值</li>
</ul>
</div>
<div id="which.max-和-which.min" class="section level5 hasAnchor" number="3.5.4.4.2">
<h5><span class="header-section-number">3.5.4.4.2</span> <code>which.max()</code> 和 <code>which.min()</code><a href="附录1-r语言编程基础.html#which.max-和-which.min" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：返回最大值或最小值的<strong>位置索引</strong></li>
<li><strong>语法</strong>：<code>which.max(x)</code></li>
<li><strong>返回值</strong>：整数，表示最大值在向量中的位置</li>
<li><strong>应用场景</strong>：找到最优样地、最佳条件等</li>
<li><strong>注意</strong>：如果有多个相同的最大值，只返回第一个的位置</li>
</ul>
</div>
</div>
<div id="数据组织策略" class="section level4 hasAnchor" number="3.5.4.5">
<h4><span class="header-section-number">3.5.4.5</span> 数据组织策略<a href="附录1-r语言编程基础.html#数据组织策略" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>何时使用列表</strong>：
<ul>
<li>存储相关但结构不同的数据</li>
<li>分组存储实验数据</li>
<li>存储分析结果的不同组成部分</li>
</ul></li>
<li><strong>命名的重要性</strong>：
<ul>
<li>提高代码可读性</li>
<li>便于数据访问</li>
<li>减少错误发生</li>
</ul></li>
<li><strong>最佳实践</strong>：
<ul>
<li>使用有意义的名称</li>
<li>保持命名风格一致</li>
<li>适当添加注释说明数据来源</li>
</ul></li>
</ul>
</div>
</div>
<div id="课后练习-3" class="section level3 hasAnchor" number="3.5.5">
<h3><span class="header-section-number">3.5.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某保护区三个监测站的哺乳动物目击次数：</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="附录1-r语言编程基础.html#cb176-1" tabindex="-1"></a>station_a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">6</span>, <span class="dv">10</span>)</span>
<span id="cb176-2"><a href="附录1-r语言编程基础.html#cb176-2" tabindex="-1"></a>station_b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">14</span>, <span class="dv">16</span>)</span>
<span id="cb176-3"><a href="附录1-r语言编程基础.html#cb176-3" tabindex="-1"></a>station_c <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span></code></pre></div>
<p>请完成（使用向量、列表、命名等已学内容）： 1. 将三个监测站的数据组织成一个列表（使用list()函数）</p>
<ol start="2" style="list-style-type: decimal">
<li><p>计算每个监测站的平均目击次数（使用mean()和列表访问）</p></li>
<li><p>创建一个命名向量显示三个站点的平均值（使用names()函数）</p></li>
<li><p>找出哪个监测站的平均目击次数最高（使用which.max()函数）</p></li>
<li><p>计算所有监测站的总目击次数（使用sum()和向量合并）</p></li>
<li><p>创建一个数据框，包含站点名称和对应的平均目击次数</p></li>
<li><p>比较站点A和站点B的数据变异程度（使用sd()函数计算标准差）</p></li>
</ol>
</div>
</div>
<div id="外部数据导入与条件筛选分析" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> 外部数据导入与条件筛选分析<a href="附录1-r语言编程基础.html#外部数据导入与条件筛选分析" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-4" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>长期鸟类监测项目通常将数据保存在Excel或CSV文件中。我们需要学会将这些外部数据导入R中进行分析，并根据研究需要筛选特定时间段的数据。</p>
</div>
<div id="演示数据文件bird_monitoring.csv" class="section level3 hasAnchor" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> 演示数据文件（bird_monitoring.csv）<a href="附录1-r语言编程基础.html#演示数据文件bird_monitoring.csv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre class="csv"><code>date,month,species,count,observer
2023-03-15,3,白头鹎,12,张三
2023-03-15,3,麻雀,25,张三
2023-04-20,4,喜鹊,8,李四
2023-04-20,4,白头鹎,15,李四
2023-05-10,5,燕子,20,王五
2023-06-05,6,麻雀,18,张三
2023-06-05,6,白头鹎,22,张三
2023-07-12,7,喜鹊,10,李四</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="附录1-r语言编程基础.html#cb178-1" tabindex="-1"></a>bird_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb178-2"><a href="附录1-r语言编程基础.html#cb178-2" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">c</span>(<span class="st">&quot;2023-03-15&quot;</span>, <span class="st">&quot;2023-03-15&quot;</span>, <span class="st">&quot;2023-04-20&quot;</span>,</span>
<span id="cb178-3"><a href="附录1-r语言编程基础.html#cb178-3" tabindex="-1"></a>  <span class="st">&quot;2023-04-20&quot;</span>,</span>
<span id="cb178-4"><a href="附录1-r语言编程基础.html#cb178-4" tabindex="-1"></a>             <span class="st">&quot;2023-05-10&quot;</span>, <span class="st">&quot;2023-06-05&quot;</span>, <span class="st">&quot;2023-06-05&quot;</span>,</span>
<span id="cb178-5"><a href="附录1-r语言编程基础.html#cb178-5" tabindex="-1"></a>  <span class="st">&quot;2023-07-12&quot;</span>),</span>
<span id="cb178-6"><a href="附录1-r语言编程基础.html#cb178-6" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">7</span>),</span>
<span id="cb178-7"><a href="附录1-r语言编程基础.html#cb178-7" tabindex="-1"></a>    <span class="at">species =</span> <span class="fu">c</span>(<span class="st">&quot;白头鹎&quot;</span>, <span class="st">&quot;麻雀&quot;</span>, <span class="st">&quot;喜鹊&quot;</span>, <span class="st">&quot;白头鹎&quot;</span>, <span class="st">&quot;燕子&quot;</span>,</span>
<span id="cb178-8"><a href="附录1-r语言编程基础.html#cb178-8" tabindex="-1"></a>  <span class="st">&quot;麻雀&quot;</span>, <span class="st">&quot;白头鹎&quot;</span>, <span class="st">&quot;喜鹊&quot;</span>),</span>
<span id="cb178-9"><a href="附录1-r语言编程基础.html#cb178-9" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">25</span>, <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">10</span>),</span>
<span id="cb178-10"><a href="附录1-r语言编程基础.html#cb178-10" tabindex="-1"></a>    <span class="at">observer =</span> <span class="fu">c</span>(<span class="st">&quot;张三&quot;</span>, <span class="st">&quot;张三&quot;</span>, <span class="st">&quot;李四&quot;</span>, <span class="st">&quot;李四&quot;</span>, <span class="st">&quot;王五&quot;</span>, <span class="st">&quot;张三&quot;</span>,</span>
<span id="cb178-11"><a href="附录1-r语言编程基础.html#cb178-11" tabindex="-1"></a>  <span class="st">&quot;张三&quot;</span>, <span class="st">&quot;李四&quot;</span>)</span>
<span id="cb178-12"><a href="附录1-r语言编程基础.html#cb178-12" tabindex="-1"></a>  )</span>
<span id="cb178-13"><a href="附录1-r语言编程基础.html#cb178-13" tabindex="-1"></a></span>
<span id="cb178-14"><a href="附录1-r语言编程基础.html#cb178-14" tabindex="-1"></a><span class="co"># 保存为CSV文件</span></span>
<span id="cb178-15"><a href="附录1-r语言编程基础.html#cb178-15" tabindex="-1"></a><span class="fu">write.csv</span>(bird_data, <span class="st">&quot;bird_observation_data.csv&quot;</span>, <span class="at">row.names =</span></span>
<span id="cb178-16"><a href="附录1-r语言编程基础.html#cb178-16" tabindex="-1"></a>  <span class="cn">FALSE</span>, <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb178-17"><a href="附录1-r语言编程基础.html#cb178-17" tabindex="-1"></a><span class="co">#注意，这里的fileEcoding参数要依据OS系统编码设定</span></span></code></pre></div>
</div>
<div id="课堂演示过程-4" class="section level3 hasAnchor" number="3.6.3">
<h3><span class="header-section-number">3.6.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="附录1-r语言编程基础.html#cb179-1" tabindex="-1"></a><span class="co"># 1. 读取鸟类监测数据</span></span>
<span id="cb179-2"><a href="附录1-r语言编程基础.html#cb179-2" tabindex="-1"></a>bird_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;bird_monitoring.csv&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb179-3"><a href="附录1-r语言编程基础.html#cb179-3" tabindex="-1"></a></span>
<span id="cb179-4"><a href="附录1-r语言编程基础.html#cb179-4" tabindex="-1"></a><span class="co"># 2. 查看数据概况</span></span>
<span id="cb179-5"><a href="附录1-r语言编程基础.html#cb179-5" tabindex="-1"></a><span class="fu">head</span>(bird_data)     <span class="co"># 前几行</span></span>
<span id="cb179-6"><a href="附录1-r语言编程基础.html#cb179-6" tabindex="-1"></a><span class="fu">tail</span>(bird_data)     <span class="co"># 后几行</span></span>
<span id="cb179-7"><a href="附录1-r语言编程基础.html#cb179-7" tabindex="-1"></a><span class="fu">str</span>(bird_data)      <span class="co"># 数据结构</span></span>
<span id="cb179-8"><a href="附录1-r语言编程基础.html#cb179-8" tabindex="-1"></a><span class="fu">summary</span>(bird_data)  <span class="co"># 数据摘要</span></span>
<span id="cb179-9"><a href="附录1-r语言编程基础.html#cb179-9" tabindex="-1"></a></span>
<span id="cb179-10"><a href="附录1-r语言编程基础.html#cb179-10" tabindex="-1"></a><span class="co"># 3. 查看数据维度</span></span>
<span id="cb179-11"><a href="附录1-r语言编程基础.html#cb179-11" tabindex="-1"></a><span class="fu">nrow</span>(bird_data)  <span class="co"># 有多少条记录</span></span>
<span id="cb179-12"><a href="附录1-r语言编程基础.html#cb179-12" tabindex="-1"></a><span class="fu">ncol</span>(bird_data)  <span class="co"># 有多少个变量</span></span>
<span id="cb179-13"><a href="附录1-r语言编程基础.html#cb179-13" tabindex="-1"></a></span>
<span id="cb179-14"><a href="附录1-r语言编程基础.html#cb179-14" tabindex="-1"></a><span class="co"># 4. 查看具体列的信息</span></span>
<span id="cb179-15"><a href="附录1-r语言编程基础.html#cb179-15" tabindex="-1"></a><span class="fu">unique</span>(bird_data<span class="sc">$</span>species)   <span class="co"># 观察到哪些物种</span></span>
<span id="cb179-16"><a href="附录1-r语言编程基础.html#cb179-16" tabindex="-1"></a><span class="fu">unique</span>(bird_data<span class="sc">$</span>observer)  <span class="co"># 有哪些调查员</span></span>
<span id="cb179-17"><a href="附录1-r语言编程基础.html#cb179-17" tabindex="-1"></a><span class="fu">range</span>(bird_data<span class="sc">$</span>month)      <span class="co"># 调查的月份范围</span></span>
<span id="cb179-18"><a href="附录1-r语言编程基础.html#cb179-18" tabindex="-1"></a></span>
<span id="cb179-19"><a href="附录1-r语言编程基础.html#cb179-19" tabindex="-1"></a><span class="co"># 5. 筛选春季数据（3-5月）</span></span>
<span id="cb179-20"><a href="附录1-r语言编程基础.html#cb179-20" tabindex="-1"></a>spring_birds <span class="ot">&lt;-</span> <span class="fu">subset</span>(bird_data, month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))</span>
<span id="cb179-21"><a href="附录1-r语言编程基础.html#cb179-21" tabindex="-1"></a>spring_birds</span>
<span id="cb179-22"><a href="附录1-r语言编程基础.html#cb179-22" tabindex="-1"></a></span>
<span id="cb179-23"><a href="附录1-r语言编程基础.html#cb179-23" tabindex="-1"></a><span class="co"># 6. 筛选特定物种</span></span>
<span id="cb179-24"><a href="附录1-r语言编程基础.html#cb179-24" tabindex="-1"></a>baijitou_data <span class="ot">&lt;-</span> <span class="fu">subset</span>(bird_data, species <span class="sc">==</span> <span class="st">&quot;白头鹎&quot;</span>)</span>
<span id="cb179-25"><a href="附录1-r语言编程基础.html#cb179-25" tabindex="-1"></a>baijitou_data</span>
<span id="cb179-26"><a href="附录1-r语言编程基础.html#cb179-26" tabindex="-1"></a></span>
<span id="cb179-27"><a href="附录1-r语言编程基础.html#cb179-27" tabindex="-1"></a><span class="co"># 7. 条件组合筛选</span></span>
<span id="cb179-28"><a href="附录1-r语言编程基础.html#cb179-28" tabindex="-1"></a>spring_baijitou <span class="ot">&lt;-</span> <span class="fu">subset</span>(bird_data, month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>) <span class="sc">&amp;</span> species <span class="sc">==</span> <span class="st">&quot;白头鹎&quot;</span>)</span>
<span id="cb179-29"><a href="附录1-r语言编程基础.html#cb179-29" tabindex="-1"></a>spring_baijitou</span>
<span id="cb179-30"><a href="附录1-r语言编程基础.html#cb179-30" tabindex="-1"></a></span>
<span id="cb179-31"><a href="附录1-r语言编程基础.html#cb179-31" tabindex="-1"></a><span class="co"># 8. 计算统计量</span></span>
<span id="cb179-32"><a href="附录1-r语言编程基础.html#cb179-32" tabindex="-1"></a>total_count <span class="ot">&lt;-</span> <span class="fu">sum</span>(bird_data<span class="sc">$</span>count)</span>
<span id="cb179-33"><a href="附录1-r语言编程基础.html#cb179-33" tabindex="-1"></a>mean_count <span class="ot">&lt;-</span> <span class="fu">mean</span>(bird_data<span class="sc">$</span>count)</span>
<span id="cb179-34"><a href="附录1-r语言编程基础.html#cb179-34" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;总观察个体数:&quot;</span>, total_count, <span class="st">&quot;平均每次观察:&quot;</span>, <span class="fu">round</span>(mean_count, <span class="dv">1</span>))</span></code></pre></div>
</div>
<div id="r语言知识点详解-4" class="section level3 hasAnchor" number="3.6.4">
<h3><span class="header-section-number">3.6.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="数据导入函数-read.csv" class="section level4 hasAnchor" number="3.6.4.1">
<h4><span class="header-section-number">3.6.4.1</span> 数据导入函数 <code>read.csv()</code><a href="附录1-r语言编程基础.html#数据导入函数-read.csv" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>作用</strong>：从CSV（逗号分隔值）文件中读取数据，创建数据框</li>
<li><strong>语法</strong>：<code>read.csv(file, header = TRUE, sep = ",", stringsAsFactors = FALSE, ...)</code></li>
<li><strong>重要参数详解</strong>：
<ul>
<li><code>file</code>：文件路径，可以是本地文件或网络URL</li>
<li><code>header = TRUE</code>：第一行是否为列名，默认TRUE</li>
<li><code>sep = ","</code>：字段分隔符，CSV默认逗号</li>
<li><code>stringsAsFactors = FALSE</code>：是否将字符串转换为因子，建议设为FALSE</li>
<li><code>encoding</code>：文件编码，中文文件可能需要设置为”UTF-8”</li>
</ul></li>
<li><strong>文件路径注意事项</strong>：
<ul>
<li>Windows系统使用反斜杠<code>\</code>，但R中需要转义<code>\\</code>或使用正斜杠<code>/</code></li>
<li>使用相对路径时，基于当前工作目录</li>
<li>可用<code>getwd()</code>查看当前工作目录，<code>setwd()</code>设置工作目录</li>
</ul></li>
</ul>
</div>
<div id="数据概览函数集" class="section level4 hasAnchor" number="3.6.4.2">
<h4><span class="header-section-number">3.6.4.2</span> 数据概览函数集<a href="附录1-r语言编程基础.html#数据概览函数集" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="summary---数据摘要" class="section level5 hasAnchor" number="3.6.4.2.1">
<h5><span class="header-section-number">3.6.4.2.1</span> <code>summary()</code> - 数据摘要<a href="附录1-r语言编程基础.html#summary---数据摘要" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：提供每列数据的统计摘要</li>
<li><strong>不同数据类型的摘要</strong>：
<ul>
<li>数值型：最小值、第一四分位数、中位数、均值、第三四分位数、最大值</li>
<li>字符型：长度、类别、模式</li>
<li>因子型：各水平的频数</li>
</ul></li>
<li><strong>应用价值</strong>：快速了解数据分布、发现异常值</li>
</ul>
</div>
<div id="unique---唯一值" class="section level5 hasAnchor" number="3.6.4.2.2">
<h5><span class="header-section-number">3.6.4.2.2</span> <code>unique()</code> - 唯一值<a href="附录1-r语言编程基础.html#unique---唯一值" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：返回向量中的所有不重复值</li>
<li><strong>语法</strong>：<code>unique(x)</code></li>
<li><strong>应用场景</strong>：
<ul>
<li>查看分类变量的所有类别</li>
<li>检查数据录入是否有错误（如拼写错误）</li>
<li>了解数据的多样性</li>
</ul></li>
<li><strong>相关函数</strong>：<code>duplicated()</code>检查重复值</li>
</ul>
</div>
<div id="range---值域范围" class="section level5 hasAnchor" number="3.6.4.2.3">
<h5><span class="header-section-number">3.6.4.2.3</span> <code>range()</code> - 值域范围<a href="附录1-r语言编程基础.html#range---值域范围" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：返回向量的最小值和最大值</li>
<li><strong>语法</strong>：<code>range(x, na.rm = FALSE)</code></li>
<li><strong>返回值</strong>：长度为2的向量，c(最小值, 最大值)</li>
<li><strong>应用</strong>：快速了解数据的取值范围</li>
</ul>
</div>
</div>
<div id="数据筛选系统" class="section level4 hasAnchor" number="3.6.4.3">
<h4><span class="header-section-number">3.6.4.3</span> 数据筛选系统<a href="附录1-r语言编程基础.html#数据筛选系统" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="subset-函数推荐方式" class="section level5 hasAnchor" number="3.6.4.3.1">
<h5><span class="header-section-number">3.6.4.3.1</span> <code>subset()</code> 函数（推荐方式）<a href="附录1-r语言编程基础.html#subset-函数推荐方式" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：根据条件筛选数据框的行</li>
<li><strong>语法</strong>：<code>subset(x, subset, select)</code></li>
<li><strong>参数详解</strong>：
<ul>
<li><code>x</code>：要筛选的数据框</li>
<li><code>subset</code>：逻辑条件表达式</li>
<li><code>select</code>：选择的列（可选）</li>
</ul></li>
<li><strong>优势</strong>：语法简洁，不需要重复写数据框名称</li>
</ul>
</div>
<div id="逻辑操作符详解" class="section level5 hasAnchor" number="3.6.4.3.2">
<h5><span class="header-section-number">3.6.4.3.2</span> 逻辑操作符详解<a href="附录1-r语言编程基础.html#逻辑操作符详解" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="in-操作符" class="section level6 hasAnchor" number="3.6.4.3.2.1">
<h6><span class="header-section-number">3.6.4.3.2.1</span> <code>%in%</code> 操作符<a href="附录1-r语言编程基础.html#in-操作符" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<ul>
<li><strong>作用</strong>：检查左边的值是否在右边的向量中</li>
<li><strong>语法</strong>：<code>x %in% y</code></li>
<li><strong>示例</strong>：<code>month %in% c(3, 4, 5)</code> 检查月份是否是3、4、5中的一个</li>
<li><strong>与 <code>==</code> 的区别</strong>：
<ul>
<li><code>==</code> 只能比较单个值</li>
<li><code>%in%</code> 可以同时比较多个值</li>
</ul></li>
</ul>
</div>
<div id="等于操作符" class="section level6 hasAnchor" number="3.6.4.3.2.2">
<h6><span class="header-section-number">3.6.4.3.2.2</span> <code>==</code> 等于操作符<a href="附录1-r语言编程基础.html#等于操作符" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<ul>
<li><strong>作用</strong>：检查两个值是否相等</li>
<li><strong>注意事项</strong>：
<ul>
<li>区分大小写：<code>"A" == "a"</code> 为FALSE</li>
<li>精确匹配：<code>"cat" == "cats"</code> 为FALSE</li>
<li>用于字符串时必须完全匹配</li>
</ul></li>
</ul>
</div>
<div id="逻辑与操作符" class="section level6 hasAnchor" number="3.6.4.3.2.3">
<h6><span class="header-section-number">3.6.4.3.2.3</span> <code>&amp;</code> 逻辑与操作符<a href="附录1-r语言编程基础.html#逻辑与操作符" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<ul>
<li><strong>作用</strong>：连接多个条件，所有条件都必须为TRUE</li>
<li><strong>语法</strong>：<code>条件1 &amp; 条件2 &amp; ...</code></li>
<li><strong>相关操作符</strong>：
<ul>
<li><code>|</code>：逻辑或，任一条件为TRUE即可</li>
<li><code>!</code>：逻辑非，取反</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="数值处理函数" class="section level4 hasAnchor" number="3.6.4.4">
<h4><span class="header-section-number">3.6.4.4</span> 4. 数值处理函数<a href="附录1-r语言编程基础.html#数值处理函数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="round---四舍五入" class="section level5 hasAnchor" number="3.6.4.4.1">
<h5><span class="header-section-number">3.6.4.4.1</span> <code>round()</code> - 四舍五入<a href="附录1-r语言编程基础.html#round---四舍五入" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>round(x, digits = 0)</code></li>
<li><strong>参数</strong>：
<ul>
<li><code>x</code>：要舍入的数值</li>
<li><code>digits</code>：保留的小数位数</li>
</ul></li>
<li><strong>应用</strong>：美化输出结果，控制精度</li>
</ul>
</div>
</div>
<div id="数据导入最佳实践" class="section level4 hasAnchor" number="3.6.4.5">
<h4><span class="header-section-number">3.6.4.5</span> 数据导入最佳实践<a href="附录1-r语言编程基础.html#数据导入最佳实践" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>文件检查</strong>：导入前先用文本编辑器查看文件格式</li>
<li><strong>编码处理</strong>：中文数据注意编码问题</li>
<li><strong>数据验证</strong>：导入后立即检查数据结构和内容</li>
<li><strong>备份原始数据</strong>：避免在原始数据上直接修改</li>
<li><strong>路径管理</strong>：使用项目文件夹，保持文件路径的一致性</li>
</ul>
</div>
</div>
<div id="课后练习-4" class="section level3 hasAnchor" number="3.6.5">
<h3><span class="header-section-number">3.6.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：假设有一个植被监测数据文件包含以下列：<br />
- date：调查日期<br />
- season：季节（春、夏、秋、冬）<br />
- plot：样地编号<br />
- coverage：植被覆盖度(%)<br />
- height：平均高度(cm)</p>
<p>请完成（使用数据导入、数据框操作、条件筛选等已学内容）： 1. 创建模拟数据或读取数据文件</p>
<ol start="2" style="list-style-type: decimal">
<li><p>查看数据的基本信息（使用nrow(), ncol(), str(), summary()）</p></li>
<li><p>筛选夏季的数据（使用subset()函数）</p></li>
<li><p>筛选植被覆盖度大于80%的记录（使用subset()函数和条件）</p></li>
<li><p>计算所有样地的平均植被覆盖度和平均高度（使用mean()函数）</p></li>
<li><p>找出覆盖度最高的样地（使用which.max()函数）</p></li>
<li><p>创建一个汇总报告（使用paste()函数）</p></li>
</ol>
</div>
</div>
<div id="缺失值和异常值的识别处理" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> 缺失值和异常值的识别处理<a href="附录1-r语言编程基础.html#缺失值和异常值的识别处理" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-5" class="section level3 hasAnchor" number="3.7.1">
<h3><span class="header-section-number">3.7.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在水质监测中，由于仪器故障、人为记录错误等原因，经常出现缺失值和异常值。数据清理是生态学数据分析的重要步骤，需要识别和处理这些问题数据。</p>
</div>
<div id="演示数据-4" class="section level3 hasAnchor" number="3.7.2">
<h3><span class="header-section-number">3.7.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="附录1-r语言编程基础.html#cb180-1" tabindex="-1"></a><span class="co"># 湖泊水质监测数据（包含缺失值和异常值）</span></span>
<span id="cb180-2"><a href="附录1-r语言编程基础.html#cb180-2" tabindex="-1"></a>water_quality <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb180-3"><a href="附录1-r语言编程基础.html#cb180-3" tabindex="-1"></a>  <span class="at">site_id =</span> <span class="fu">c</span>(<span class="st">&quot;湖心&quot;</span>, <span class="st">&quot;入水口&quot;</span>, <span class="st">&quot;出水口&quot;</span>, <span class="st">&quot;湖心&quot;</span>, <span class="st">&quot;入水口&quot;</span>, <span class="st">&quot;出水口&quot;</span>),</span>
<span id="cb180-4"><a href="附录1-r语言编程基础.html#cb180-4" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">c</span>(<span class="st">&quot;2023-05-01&quot;</span>, <span class="st">&quot;2023-05-01&quot;</span>, <span class="st">&quot;2023-05-01&quot;</span>, <span class="st">&quot;2023-05-15&quot;</span>, <span class="st">&quot;2023-05-15&quot;</span>, <span class="st">&quot;2023-05-15&quot;</span>),</span>
<span id="cb180-5"><a href="附录1-r语言编程基础.html#cb180-5" tabindex="-1"></a>  <span class="at">pH =</span> <span class="fu">c</span>(<span class="fl">7.2</span>, <span class="fl">6.8</span>, <span class="cn">NA</span>, <span class="fl">7.5</span>, <span class="fl">6.9</span>, <span class="fl">7.1</span>),</span>
<span id="cb180-6"><a href="附录1-r语言编程基础.html#cb180-6" tabindex="-1"></a>  <span class="at">temperature_C =</span> <span class="fu">c</span>(<span class="fl">18.5</span>, <span class="fl">19.2</span>, <span class="fl">20.1</span>, <span class="dv">999</span>, <span class="fl">19.8</span>, <span class="fl">20.3</span>),  <span class="co"># 999为仪器错误读数</span></span>
<span id="cb180-7"><a href="附录1-r语言编程基础.html#cb180-7" tabindex="-1"></a>  <span class="at">dissolved_oxygen =</span> <span class="fu">c</span>(<span class="fl">8.2</span>, <span class="fl">7.5</span>, <span class="fl">8.8</span>, <span class="fl">8.1</span>, <span class="cn">NA</span>, <span class="fl">8.4</span>)</span>
<span id="cb180-8"><a href="附录1-r语言编程基础.html#cb180-8" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="课堂演示过程-5" class="section level3 hasAnchor" number="3.7.3">
<h3><span class="header-section-number">3.7.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="附录1-r语言编程基础.html#cb181-1" tabindex="-1"></a><span class="co"># 1. 创建包含问题的水质数据</span></span>
<span id="cb181-2"><a href="附录1-r语言编程基础.html#cb181-2" tabindex="-1"></a>water_quality <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb181-3"><a href="附录1-r语言编程基础.html#cb181-3" tabindex="-1"></a>  <span class="at">site_id =</span> <span class="fu">c</span>(<span class="st">&quot;湖心&quot;</span>, <span class="st">&quot;入水口&quot;</span>, <span class="st">&quot;出水口&quot;</span>, <span class="st">&quot;湖心&quot;</span>, <span class="st">&quot;入水口&quot;</span>, <span class="st">&quot;出水口&quot;</span>),</span>
<span id="cb181-4"><a href="附录1-r语言编程基础.html#cb181-4" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">c</span>(<span class="st">&quot;2023-05-01&quot;</span>, <span class="st">&quot;2023-05-01&quot;</span>, <span class="st">&quot;2023-05-01&quot;</span>, <span class="st">&quot;2023-05-15&quot;</span>, <span class="st">&quot;2023-05-15&quot;</span>, <span class="st">&quot;2023-05-15&quot;</span>),</span>
<span id="cb181-5"><a href="附录1-r语言编程基础.html#cb181-5" tabindex="-1"></a>  <span class="at">pH =</span> <span class="fu">c</span>(<span class="fl">7.2</span>, <span class="fl">6.8</span>, <span class="cn">NA</span>, <span class="fl">7.5</span>, <span class="fl">6.9</span>, <span class="fl">7.1</span>),</span>
<span id="cb181-6"><a href="附录1-r语言编程基础.html#cb181-6" tabindex="-1"></a>  <span class="at">temperature_C =</span> <span class="fu">c</span>(<span class="fl">18.5</span>, <span class="fl">19.2</span>, <span class="fl">20.1</span>, <span class="dv">999</span>, <span class="fl">19.8</span>, <span class="fl">20.3</span>),</span>
<span id="cb181-7"><a href="附录1-r语言编程基础.html#cb181-7" tabindex="-1"></a>  <span class="at">dissolved_oxygen =</span> <span class="fu">c</span>(<span class="fl">8.2</span>, <span class="fl">7.5</span>, <span class="fl">8.8</span>, <span class="fl">8.1</span>, <span class="cn">NA</span>, <span class="fl">8.4</span>)</span>
<span id="cb181-8"><a href="附录1-r语言编程基础.html#cb181-8" tabindex="-1"></a>)</span>
<span id="cb181-9"><a href="附录1-r语言编程基础.html#cb181-9" tabindex="-1"></a></span>
<span id="cb181-10"><a href="附录1-r语言编程基础.html#cb181-10" tabindex="-1"></a><span class="co"># 2. 查看原始数据</span></span>
<span id="cb181-11"><a href="附录1-r语言编程基础.html#cb181-11" tabindex="-1"></a><span class="fu">print</span>(water_quality)</span>
<span id="cb181-12"><a href="附录1-r语言编程基础.html#cb181-12" tabindex="-1"></a><span class="fu">str</span>(water_quality)</span>
<span id="cb181-13"><a href="附录1-r语言编程基础.html#cb181-13" tabindex="-1"></a></span>
<span id="cb181-14"><a href="附录1-r语言编程基础.html#cb181-14" tabindex="-1"></a><span class="co"># 3. 检查缺失值</span></span>
<span id="cb181-15"><a href="附录1-r语言编程基础.html#cb181-15" tabindex="-1"></a><span class="fu">is.na</span>(water_quality)  <span class="co"># 显示所有缺失值位置</span></span>
<span id="cb181-16"><a href="附录1-r语言编程基础.html#cb181-16" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(water_quality<span class="sc">$</span>pH))  <span class="co"># pH缺失值个数</span></span>
<span id="cb181-17"><a href="附录1-r语言编程基础.html#cb181-17" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(water_quality<span class="sc">$</span>dissolved_oxygen))  <span class="co"># 溶解氧缺失值个数</span></span>
<span id="cb181-18"><a href="附录1-r语言编程基础.html#cb181-18" tabindex="-1"></a></span>
<span id="cb181-19"><a href="附录1-r语言编程基础.html#cb181-19" tabindex="-1"></a><span class="co"># 4. 识别异常值</span></span>
<span id="cb181-20"><a href="附录1-r语言编程基础.html#cb181-20" tabindex="-1"></a><span class="fu">summary</span>(water_quality<span class="sc">$</span>temperature_C)  <span class="co"># 查看温度的统计摘要</span></span>
<span id="cb181-21"><a href="附录1-r语言编程基础.html#cb181-21" tabindex="-1"></a>water_quality<span class="sc">$</span>temperature_C <span class="sc">&gt;</span> <span class="dv">50</span>  <span class="co"># 找出不合理的高温值</span></span>
<span id="cb181-22"><a href="附录1-r语言编程基础.html#cb181-22" tabindex="-1"></a></span>
<span id="cb181-23"><a href="附录1-r语言编程基础.html#cb181-23" tabindex="-1"></a><span class="co"># 5. 处理缺失值 - 用均值填补</span></span>
<span id="cb181-24"><a href="附录1-r语言编程基础.html#cb181-24" tabindex="-1"></a>ph_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(water_quality<span class="sc">$</span>pH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># 计算pH均值（忽略NA）</span></span>
<span id="cb181-25"><a href="附录1-r语言编程基础.html#cb181-25" tabindex="-1"></a>water_quality<span class="sc">$</span>pH[<span class="fu">is.na</span>(water_quality<span class="sc">$</span>pH)] <span class="ot">&lt;-</span> ph_mean</span>
<span id="cb181-26"><a href="附录1-r语言编程基础.html#cb181-26" tabindex="-1"></a></span>
<span id="cb181-27"><a href="附录1-r语言编程基础.html#cb181-27" tabindex="-1"></a><span class="co"># 6. 处理异常值 - 替换为NA</span></span>
<span id="cb181-28"><a href="附录1-r语言编程基础.html#cb181-28" tabindex="-1"></a>water_quality<span class="sc">$</span>temperature_C[water_quality<span class="sc">$</span>temperature_C <span class="sc">&gt;</span> <span class="dv">50</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb181-29"><a href="附录1-r语言编程基础.html#cb181-29" tabindex="-1"></a></span>
<span id="cb181-30"><a href="附录1-r语言编程基础.html#cb181-30" tabindex="-1"></a><span class="co"># 7. 查看清理后的数据</span></span>
<span id="cb181-31"><a href="附录1-r语言编程基础.html#cb181-31" tabindex="-1"></a><span class="fu">print</span>(water_quality)</span>
<span id="cb181-32"><a href="附录1-r语言编程基础.html#cb181-32" tabindex="-1"></a></span>
<span id="cb181-33"><a href="附录1-r语言编程基础.html#cb181-33" tabindex="-1"></a><span class="co"># 8. 删除包含NA的整行（如果需要）</span></span>
<span id="cb181-34"><a href="附录1-r语言编程基础.html#cb181-34" tabindex="-1"></a>clean_data <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(water_quality)</span>
<span id="cb181-35"><a href="附录1-r语言编程基础.html#cb181-35" tabindex="-1"></a><span class="fu">print</span>(clean_data)</span>
<span id="cb181-36"><a href="附录1-r语言编程基础.html#cb181-36" tabindex="-1"></a></span>
<span id="cb181-37"><a href="附录1-r语言编程基础.html#cb181-37" tabindex="-1"></a><span class="co"># 9. 计算清理后的统计量</span></span>
<span id="cb181-38"><a href="附录1-r语言编程基础.html#cb181-38" tabindex="-1"></a><span class="fu">mean</span>(clean_data<span class="sc">$</span>temperature_C)</span>
<span id="cb181-39"><a href="附录1-r语言编程基础.html#cb181-39" tabindex="-1"></a><span class="fu">mean</span>(clean_data<span class="sc">$</span>pH)</span>
<span id="cb181-40"><a href="附录1-r语言编程基础.html#cb181-40" tabindex="-1"></a><span class="fu">mean</span>(clean_data<span class="sc">$</span>dissolved_oxygen)</span></code></pre></div>
</div>
<div id="r语言知识点详解-5" class="section level3 hasAnchor" number="3.7.4">
<h3><span class="header-section-number">3.7.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="缺失值missing-values处理系统" class="section level4 hasAnchor" number="3.7.4.1">
<h4><span class="header-section-number">3.7.4.1</span> 缺失值（Missing Values）处理系统<a href="附录1-r语言编程基础.html#缺失值missing-values处理系统" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="缺失值的概念" class="section level5 hasAnchor" number="3.7.4.1.1">
<h5><span class="header-section-number">3.7.4.1.1</span> 缺失值的概念<a href="附录1-r语言编程基础.html#缺失值的概念" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>什么是NA</strong>：Not Available的缩写，表示缺失或不可用的数据</li>
<li><strong>NA的特点</strong>：
<ul>
<li>任何包含NA的运算结果都是NA</li>
<li>NA具有传染性：<code>1 + NA = NA</code></li>
<li>NA不等于任何值，包括它自己：<code>NA == NA</code> 返回NA而不是TRUE</li>
</ul></li>
</ul>
</div>
<div id="is.na-函数" class="section level5 hasAnchor" number="3.7.4.1.2">
<h5><span class="header-section-number">3.7.4.1.2</span> <code>is.na()</code> 函数<a href="附录1-r语言编程基础.html#is.na-函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：检测缺失值的位置</li>
<li><strong>语法</strong>：<code>is.na(x)</code></li>
<li><strong>返回值</strong>：与输入同样结构的逻辑向量/矩阵，TRUE表示缺失</li>
<li><strong>应用方式</strong>：
<ul>
<li>检查单个向量：<code>is.na(vector)</code></li>
<li>检查整个数据框：<code>is.na(data.frame)</code></li>
<li>统计缺失值数量：<code>sum(is.na(vector))</code></li>
</ul></li>
</ul>
</div>
<div id="na.rm-参数" class="section level5 hasAnchor" number="3.7.4.1.3">
<h5><span class="header-section-number">3.7.4.1.3</span> <code>na.rm</code> 参数<a href="附录1-r语言编程基础.html#na.rm-参数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>作用</strong>：在统计计算中移除缺失值</p></li>
<li><p><strong>语法</strong>：<code>function(x, na.rm = FALSE)</code></p></li>
<li><p><strong>适用函数</strong>：<code>mean()</code>, <code>sum()</code>, <code>max()</code>, <code>min()</code>, <code>sd()</code>등</p></li>
<li><p><strong>重要性</strong>：不设置<code>na.rm = TRUE</code>时，有NA的计算结果都是NA</p></li>
<li><p><strong>示例对比</strong>：</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="附录1-r语言编程基础.html#cb182-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>)</span>
<span id="cb182-2"><a href="附录1-r语言编程基础.html#cb182-2" tabindex="-1"></a><span class="fu">mean</span>(x)           <span class="co"># 返回 NA</span></span>
<span id="cb182-3"><a href="附录1-r语言编程基础.html#cb182-3" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># 返回 2.33</span></span></code></pre></div></li>
</ul>
</div>
<div id="na.omit-函数" class="section level5 hasAnchor" number="3.7.4.1.4">
<h5><span class="header-section-number">3.7.4.1.4</span> <code>na.omit()</code> 函数<a href="附录1-r语言编程基础.html#na.omit-函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：删除包含任何缺失值的完整行</li>
<li><strong>语法</strong>：<code>na.omit(x)</code></li>
<li><strong>返回值</strong>：不含任何NA的数据框</li>
<li><strong>注意事项</strong>：
<ul>
<li>可能导致大量数据丢失</li>
<li>需要评估删除行对分析的影响</li>
<li>适合缺失值较少且随机分布的情况</li>
</ul></li>
</ul>
</div>
</div>
<div id="异常值outliers识别与处理" class="section level4 hasAnchor" number="3.7.4.2">
<h4><span class="header-section-number">3.7.4.2</span> 异常值（Outliers）识别与处理<a href="附录1-r语言编程基础.html#异常值outliers识别与处理" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="异常值的识别方法" class="section level5 hasAnchor" number="3.7.4.2.1">
<h5><span class="header-section-number">3.7.4.2.1</span> 异常值的识别方法<a href="附录1-r语言编程基础.html#异常值的识别方法" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>统计方法</strong>：使用<code>summary()</code>查看数据分布，识别明显不合理的值</li>
<li><strong>业务逻辑</strong>：基于专业知识判断，如温度999°C明显错误</li>
<li><strong>可视化方法</strong>：使用箱线图、散点图等发现异常值</li>
<li><strong>统计阈值</strong>：如超出3倍标准差的值</li>
</ul>
</div>
<div id="异常值处理策略" class="section level5 hasAnchor" number="3.7.4.2.2">
<h5><span class="header-section-number">3.7.4.2.2</span> 异常值处理策略<a href="附录1-r语言编程基础.html#异常值处理策略" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ol style="list-style-type: decimal">
<li><p><strong>删除异常值</strong>：适用于明显的录入错误</p></li>
<li><p><strong>替换为NA</strong>：保留数据结构，标记为缺失</p></li>
<li><p><strong>替换为合理值</strong>：用中位数、均值等替换</p></li>
<li><p><strong>保留但标记</strong>：在分析中特殊处理</p></li>
</ol>
</div>
</div>
<div id="条件替换技术" class="section level4 hasAnchor" number="3.7.4.3">
<h4><span class="header-section-number">3.7.4.3</span> 条件替换技术<a href="附录1-r语言编程基础.html#条件替换技术" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="逻辑索引替换" class="section level5 hasAnchor" number="3.7.4.3.1">
<h5><span class="header-section-number">3.7.4.3.1</span> 逻辑索引替换<a href="附录1-r语言编程基础.html#逻辑索引替换" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>语法</strong>：<code>data[condition] &lt;- new_value</code></p></li>
<li><p><strong>原理</strong>：通过逻辑条件选择满足条件的元素进行替换</p></li>
<li><p><strong>示例</strong>：</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="附录1-r语言编程基础.html#cb183-1" tabindex="-1"></a><span class="co"># 将所有负值替换为0</span></span>
<span id="cb183-2"><a href="附录1-r语言编程基础.html#cb183-2" tabindex="-1"></a>data[data <span class="sc">&lt;</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb183-3"><a href="附录1-r语言编程基础.html#cb183-3" tabindex="-1"></a></span>
<span id="cb183-4"><a href="附录1-r语言编程基础.html#cb183-4" tabindex="-1"></a><span class="co"># 将异常高值替换为NA</span></span>
<span id="cb183-5"><a href="附录1-r语言编程基础.html#cb183-5" tabindex="-1"></a>data[data <span class="sc">&gt;</span> threshold] <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code></pre></div></li>
</ul>
</div>
<div id="which-函数" class="section level5 hasAnchor" number="3.7.4.3.2">
<h5><span class="header-section-number">3.7.4.3.2</span> <code>which()</code> 函数<a href="附录1-r语言编程基础.html#which-函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：返回满足条件的元素位置索引</li>
<li><strong>语法</strong>：<code>which(condition)</code></li>
<li><strong>与直接逻辑索引的区别</strong>：
<ul>
<li>逻辑索引：返回TRUE/FALSE向量</li>
<li><code>which()</code>：返回位置数字向量</li>
</ul></li>
<li><strong>应用</strong>：当需要知道具体位置时使用</li>
</ul>
</div>
</div>
<div id="数据清理流程和最佳实践" class="section level4 hasAnchor" number="3.7.4.4">
<h4><span class="header-section-number">3.7.4.4</span> 数据清理流程和最佳实践<a href="附录1-r语言编程基础.html#数据清理流程和最佳实践" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="标准数据清理流程" class="section level5 hasAnchor" number="3.7.4.4.1">
<h5><span class="header-section-number">3.7.4.4.1</span> 标准数据清理流程<a href="附录1-r语言编程基础.html#标准数据清理流程" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ol style="list-style-type: decimal">
<li><p><strong>数据探索</strong>：使用<code>str()</code>, <code>summary()</code>, <code>head()</code>, <code>tail()</code>了解数据</p></li>
<li><p><strong>缺失值检查</strong>：使用<code>is.na()</code>, <code>sum(is.na())</code>统计缺失情况</p></li>
<li><p><strong>异常值识别</strong>：结合统计和专业知识识别异常值</p></li>
<li><p><strong>清理决策</strong>：选择合适的处理方法</p></li>
<li><p><strong>执行清理</strong>：应用处理方法</p></li>
<li><p><strong>验证结果</strong>：检查清理后的数据质量</p></li>
</ol>
</div>
<div id="数据清理的注意事项" class="section level5 hasAnchor" number="3.7.4.4.2">
<h5><span class="header-section-number">3.7.4.4.2</span> 数据清理的注意事项<a href="附录1-r语言编程基础.html#数据清理的注意事项" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>保留原始数据</strong>：清理前备份原始数据</li>
<li><strong>记录清理过程</strong>：文档化所有清理步骤和决策理由</li>
<li><strong>验证合理性</strong>：确保清理后的数据符合业务逻辑</li>
<li><strong>评估影响</strong>：分析清理对后续分析的影响</li>
</ul>
</div>
<div id="缺失值填补方法选择" class="section level5 hasAnchor" number="3.7.4.4.3">
<h5><span class="header-section-number">3.7.4.4.3</span> 缺失值填补方法选择<a href="附录1-r语言编程基础.html#缺失值填补方法选择" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>均值填补</strong>：适用于数值变量，数据接近正态分布</li>
<li><strong>中位数填补</strong>：适用于有偏斜的数值变量</li>
<li><strong>众数填补</strong>：适用于分类变量</li>
<li><strong>前向/后向填补</strong>：适用于时间序列数据</li>
<li><strong>预测模型填补</strong>：基于其他变量预测缺失值</li>
</ul>
</div>
</div>
</div>
<div id="课后练习-5" class="section level3 hasAnchor" number="3.7.5">
<h3><span class="header-section-number">3.7.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某森林土壤调查数据：</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="附录1-r语言编程基础.html#cb184-1" tabindex="-1"></a>soil_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb184-2"><a href="附录1-r语言编程基础.html#cb184-2" tabindex="-1"></a>  <span class="at">plot =</span> <span class="fu">c</span>(<span class="st">&quot;A1&quot;</span>, <span class="st">&quot;A2&quot;</span>, <span class="st">&quot;A3&quot;</span>, <span class="st">&quot;B1&quot;</span>, <span class="st">&quot;B2&quot;</span>, <span class="st">&quot;B3&quot;</span>),</span>
<span id="cb184-3"><a href="附录1-r语言编程基础.html#cb184-3" tabindex="-1"></a>  <span class="at">organic_matter =</span> <span class="fu">c</span>(<span class="fl">3.2</span>, <span class="cn">NA</span>, <span class="fl">2.8</span>, <span class="fl">3.5</span>, <span class="fl">2.9</span>, <span class="fl">3.1</span>),</span>
<span id="cb184-4"><a href="附录1-r语言编程基础.html#cb184-4" tabindex="-1"></a>  <span class="at">nitrogen_mg =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">52</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="dv">48</span>, <span class="dv">51</span>, <span class="dv">49</span>),  <span class="co"># -10为异常负值</span></span>
<span id="cb184-5"><a href="附录1-r语言编程基础.html#cb184-5" tabindex="-1"></a>  <span class="at">moisture =</span> <span class="fu">c</span>(<span class="fl">25.5</span>, <span class="fl">28.2</span>, <span class="fl">22.1</span>, <span class="cn">NA</span>, <span class="fl">26.8</span>, <span class="fl">24.9</span>)</span>
<span id="cb184-6"><a href="附录1-r语言编程基础.html#cb184-6" tabindex="-1"></a>)</span></code></pre></div>
<p>请完成（使用缺失值处理、条件判断、数据清理等已学内容）： 1. 检查每列的缺失值个数（使用is.na()和sum()函数）</p>
<ol start="2" style="list-style-type: decimal">
<li><p>识别nitrogen_mg列中的异常值（使用逻辑判断和which()函数）</p></li>
<li><p>用均值填补organic_matter的缺失值（使用mean()和na.rm参数）</p></li>
<li><p>将nitrogen_mg中的异常值替换为NA（使用条件赋值）</p></li>
<li><p>创建一个完全没有缺失值的干净数据集（使用na.omit()）</p></li>
<li><p>计算清理后数据的各项平均值（使用mean()函数）</p></li>
<li><p>对比清理前后数据的summary()结果</p></li>
</ol>
</div>
</div>
<div id="描述性统计分析与基础数据可视化" class="section level2 hasAnchor" number="3.8">
<h2><span class="header-section-number">3.8</span> 描述性统计分析与基础数据可视化<a href="附录1-r语言编程基础.html#描述性统计分析与基础数据可视化" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-6" class="section level3 hasAnchor" number="3.8.1">
<h3><span class="header-section-number">3.8.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>不同森林类型的物种多样性存在显著差异。通过比较松林、栎林、混交林的物种数量，我们可以了解森林结构对生物多样性的影响。这需要用到描述性统计和基础可视化。</p>
</div>
<div id="演示数据-5" class="section level3 hasAnchor" number="3.8.2">
<h3><span class="header-section-number">3.8.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="附录1-r语言编程基础.html#cb185-1" tabindex="-1"></a><span class="co"># 三种森林类型各5个样地的物种数量</span></span>
<span id="cb185-2"><a href="附录1-r语言编程基础.html#cb185-2" tabindex="-1"></a>pine_forest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">28</span>, <span class="dv">24</span>)      <span class="co"># 松林</span></span>
<span id="cb185-3"><a href="附录1-r语言编程基础.html#cb185-3" tabindex="-1"></a>oak_forest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">32</span>, <span class="dv">38</span>, <span class="dv">30</span>, <span class="dv">34</span>)       <span class="co"># 栎林  </span></span>
<span id="cb185-4"><a href="附录1-r语言编程基础.html#cb185-4" tabindex="-1"></a>mixed_forest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">42</span>, <span class="dv">48</span>, <span class="dv">40</span>, <span class="dv">46</span>)     <span class="co"># 混交林</span></span></code></pre></div>
</div>
<div id="课堂演示过程-6" class="section level3 hasAnchor" number="3.8.3">
<h3><span class="header-section-number">3.8.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="附录1-r语言编程基础.html#cb186-1" tabindex="-1"></a><span class="co"># 1. 创建三种森林类型数据</span></span>
<span id="cb186-2"><a href="附录1-r语言编程基础.html#cb186-2" tabindex="-1"></a>pine_forest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">28</span>, <span class="dv">24</span>)</span>
<span id="cb186-3"><a href="附录1-r语言编程基础.html#cb186-3" tabindex="-1"></a>oak_forest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">32</span>, <span class="dv">38</span>, <span class="dv">30</span>, <span class="dv">34</span>)  </span>
<span id="cb186-4"><a href="附录1-r语言编程基础.html#cb186-4" tabindex="-1"></a>mixed_forest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">42</span>, <span class="dv">48</span>, <span class="dv">40</span>, <span class="dv">46</span>)</span>
<span id="cb186-5"><a href="附录1-r语言编程基础.html#cb186-5" tabindex="-1"></a></span>
<span id="cb186-6"><a href="附录1-r语言编程基础.html#cb186-6" tabindex="-1"></a><span class="co"># 2. 计算描述性统计</span></span>
<span id="cb186-7"><a href="附录1-r语言编程基础.html#cb186-7" tabindex="-1"></a><span class="co"># 平均值</span></span>
<span id="cb186-8"><a href="附录1-r语言编程基础.html#cb186-8" tabindex="-1"></a>pine_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(pine_forest)</span>
<span id="cb186-9"><a href="附录1-r语言编程基础.html#cb186-9" tabindex="-1"></a>oak_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(oak_forest)</span>
<span id="cb186-10"><a href="附录1-r语言编程基础.html#cb186-10" tabindex="-1"></a>mixed_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(mixed_forest)</span>
<span id="cb186-11"><a href="附录1-r语言编程基础.html#cb186-11" tabindex="-1"></a></span>
<span id="cb186-12"><a href="附录1-r语言编程基础.html#cb186-12" tabindex="-1"></a><span class="co"># 标准差</span></span>
<span id="cb186-13"><a href="附录1-r语言编程基础.html#cb186-13" tabindex="-1"></a>pine_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(pine_forest)</span>
<span id="cb186-14"><a href="附录1-r语言编程基础.html#cb186-14" tabindex="-1"></a>oak_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(oak_forest)</span>
<span id="cb186-15"><a href="附录1-r语言编程基础.html#cb186-15" tabindex="-1"></a>mixed_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(mixed_forest)</span>
<span id="cb186-16"><a href="附录1-r语言编程基础.html#cb186-16" tabindex="-1"></a></span>
<span id="cb186-17"><a href="附录1-r语言编程基础.html#cb186-17" tabindex="-1"></a><span class="co"># 最大值和最小值</span></span>
<span id="cb186-18"><a href="附录1-r语言编程基础.html#cb186-18" tabindex="-1"></a><span class="fu">range</span>(pine_forest)</span>
<span id="cb186-19"><a href="附录1-r语言编程基础.html#cb186-19" tabindex="-1"></a><span class="fu">range</span>(oak_forest)</span>
<span id="cb186-20"><a href="附录1-r语言编程基础.html#cb186-20" tabindex="-1"></a><span class="fu">range</span>(mixed_forest)</span>
<span id="cb186-21"><a href="附录1-r语言编程基础.html#cb186-21" tabindex="-1"></a></span>
<span id="cb186-22"><a href="附录1-r语言编程基础.html#cb186-22" tabindex="-1"></a><span class="co"># 3. 创建汇总表</span></span>
<span id="cb186-23"><a href="附录1-r语言编程基础.html#cb186-23" tabindex="-1"></a>forest_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb186-24"><a href="附录1-r语言编程基础.html#cb186-24" tabindex="-1"></a>  森林类型 <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;松林&quot;</span>, <span class="st">&quot;栎林&quot;</span>, <span class="st">&quot;混交林&quot;</span>),</span>
<span id="cb186-25"><a href="附录1-r语言编程基础.html#cb186-25" tabindex="-1"></a>  平均物种数 <span class="ot">=</span> <span class="fu">c</span>(pine_mean, oak_mean, mixed_mean),</span>
<span id="cb186-26"><a href="附录1-r语言编程基础.html#cb186-26" tabindex="-1"></a>  标准差 <span class="ot">=</span> <span class="fu">c</span>(pine_sd, oak_sd, mixed_sd),</span>
<span id="cb186-27"><a href="附录1-r语言编程基础.html#cb186-27" tabindex="-1"></a>  最大值 <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">max</span>(pine_forest), <span class="fu">max</span>(oak_forest), <span class="fu">max</span>(mixed_forest)),</span>
<span id="cb186-28"><a href="附录1-r语言编程基础.html#cb186-28" tabindex="-1"></a>  最小值 <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">min</span>(pine_forest), <span class="fu">min</span>(oak_forest), <span class="fu">min</span>(mixed_forest))</span>
<span id="cb186-29"><a href="附录1-r语言编程基础.html#cb186-29" tabindex="-1"></a>)</span>
<span id="cb186-30"><a href="附录1-r语言编程基础.html#cb186-30" tabindex="-1"></a><span class="fu">print</span>(forest_summary)</span>
<span id="cb186-31"><a href="附录1-r语言编程基础.html#cb186-31" tabindex="-1"></a></span>
<span id="cb186-32"><a href="附录1-r语言编程基础.html#cb186-32" tabindex="-1"></a><span class="co"># 4. 箱线图比较</span></span>
<span id="cb186-33"><a href="附录1-r语言编程基础.html#cb186-33" tabindex="-1"></a><span class="fu">boxplot</span>(pine_forest, oak_forest, mixed_forest,</span>
<span id="cb186-34"><a href="附录1-r语言编程基础.html#cb186-34" tabindex="-1"></a>        <span class="at">names =</span> <span class="fu">c</span>(<span class="st">&quot;松林&quot;</span>, <span class="st">&quot;栎林&quot;</span>, <span class="st">&quot;混交林&quot;</span>),</span>
<span id="cb186-35"><a href="附录1-r语言编程基础.html#cb186-35" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;物种数量&quot;</span>, </span>
<span id="cb186-36"><a href="附录1-r语言编程基础.html#cb186-36" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;不同森林类型物种多样性比较&quot;</span>,</span>
<span id="cb186-37"><a href="附录1-r语言编程基础.html#cb186-37" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;lightgreen&quot;</span>, <span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;lightyellow&quot;</span>))</span>
<span id="cb186-38"><a href="附录1-r语言编程基础.html#cb186-38" tabindex="-1"></a></span>
<span id="cb186-39"><a href="附录1-r语言编程基础.html#cb186-39" tabindex="-1"></a><span class="co"># 5. 添加平均值点</span></span>
<span id="cb186-40"><a href="附录1-r语言编程基础.html#cb186-40" tabindex="-1"></a><span class="fu">points</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(pine_mean, oak_mean, mixed_mean), </span>
<span id="cb186-41"><a href="附录1-r语言编程基础.html#cb186-41" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">cex =</span> <span class="fl">1.5</span>)</span>
<span id="cb186-42"><a href="附录1-r语言编程基础.html#cb186-42" tabindex="-1"></a></span>
<span id="cb186-43"><a href="附录1-r语言编程基础.html#cb186-43" tabindex="-1"></a><span class="co"># 6. 条形图显示平均值</span></span>
<span id="cb186-44"><a href="附录1-r语言编程基础.html#cb186-44" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">c</span>(pine_mean, oak_mean, mixed_mean),</span>
<span id="cb186-45"><a href="附录1-r语言编程基础.html#cb186-45" tabindex="-1"></a>        <span class="at">names.arg =</span> <span class="fu">c</span>(<span class="st">&quot;松林&quot;</span>, <span class="st">&quot;栎林&quot;</span>, <span class="st">&quot;混交林&quot;</span>),</span>
<span id="cb186-46"><a href="附录1-r语言编程基础.html#cb186-46" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;平均物种数&quot;</span>,</span>
<span id="cb186-47"><a href="附录1-r语言编程基础.html#cb186-47" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;各森林类型平均物种数量&quot;</span>,</span>
<span id="cb186-48"><a href="附录1-r语言编程基础.html#cb186-48" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;lightgreen&quot;</span>, <span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;lightyellow&quot;</span>))</span>
<span id="cb186-49"><a href="附录1-r语言编程基础.html#cb186-49" tabindex="-1"></a></span>
<span id="cb186-50"><a href="附录1-r语言编程基础.html#cb186-50" tabindex="-1"></a><span class="co"># 7. 方差分析(简单介绍)</span></span>
<span id="cb186-51"><a href="附录1-r语言编程基础.html#cb186-51" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">c</span>(pine_forest, oak_forest, mixed_forest)</span>
<span id="cb186-52"><a href="附录1-r语言编程基础.html#cb186-52" tabindex="-1"></a>forest_type <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;松林&quot;</span>, <span class="st">&quot;栎林&quot;</span>, <span class="st">&quot;混交林&quot;</span>), <span class="at">each =</span> <span class="dv">5</span>)</span>
<span id="cb186-53"><a href="附录1-r语言编程基础.html#cb186-53" tabindex="-1"></a>forest_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">species_count =</span> all_data, <span class="at">type =</span> forest_type)</span></code></pre></div>
</div>
<div id="r语言知识点详解-6" class="section level3 hasAnchor" number="3.8.4">
<h3><span class="header-section-number">3.8.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="描述性统计函数深入解析" class="section level4 hasAnchor" number="3.8.4.1">
<h4><span class="header-section-number">3.8.4.1</span> 描述性统计函数深入解析<a href="附录1-r语言编程基础.html#描述性统计函数深入解析" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="sd---标准差函数" class="section level5 hasAnchor" number="3.8.4.1.1">
<h5><span class="header-section-number">3.8.4.1.1</span> <code>sd()</code> - 标准差函数<a href="附录1-r语言编程基础.html#sd---标准差函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：计算样本标准差，衡量数据的离散程度</li>
<li><strong>语法</strong>：<code>sd(x, na.rm = FALSE)</code></li>
<li><strong>数学含义</strong>：
<ul>
<li>标准差越大，数据越分散</li>
<li>标准差越小，数据越集中在均值附近</li>
<li>单位与原数据相同</li>
</ul></li>
<li><strong>与方差的关系</strong>：标准差 = √方差</li>
<li><strong>相关函数</strong>：
<ul>
<li><code>var()</code>：计算方差</li>
<li><code>mad()</code>：计算中位数绝对偏差（对异常值更稳健）</li>
</ul></li>
</ul>
</div>
<div id="range---值域函数" class="section level5 hasAnchor" number="3.8.4.1.2">
<h5><span class="header-section-number">3.8.4.1.2</span> <code>range()</code> - 值域函数<a href="附录1-r语言编程基础.html#range---值域函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：返回最小值和最大值组成的向量</li>
<li><strong>语法</strong>：<code>range(x, na.rm = FALSE)</code></li>
<li><strong>返回值</strong>：长度为2的数值向量 c(min, max)</li>
<li><strong>应用</strong>：
<ul>
<li>快速了解数据的取值范围</li>
<li>检查数据是否在合理范围内</li>
<li>设置图形的坐标轴范围</li>
</ul></li>
</ul>
</div>
</div>
<div id="r基础绘图系统详解" class="section level4 hasAnchor" number="3.8.4.2">
<h4><span class="header-section-number">3.8.4.2</span> R基础绘图系统详解<a href="附录1-r语言编程基础.html#r基础绘图系统详解" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="boxplot---箱线图函数" class="section level5 hasAnchor" number="3.8.4.2.1">
<h5><span class="header-section-number">3.8.4.2.1</span> <code>boxplot()</code> - 箱线图函数<a href="附录1-r语言编程基础.html#boxplot---箱线图函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：绘制箱线图，显示数据的分布特征</li>
<li><strong>语法</strong>：<code>boxplot(..., names, main, xlab, ylab, col)</code></li>
<li><strong>箱线图解读</strong>：
<ul>
<li>盒子：第一四分位数(Q1)到第三四分位数(Q3)，包含50%的数据</li>
<li>中线：中位数(Q2)</li>
<li>须线：延伸到1.5倍四分位数间距的范围</li>
<li>点：超出须线的异常值</li>
</ul></li>
<li><strong>参数详解</strong>：
<ul>
<li><code>names</code>：各组的标签</li>
<li><code>main</code>：图形标题</li>
<li><code>xlab</code>, <code>ylab</code>：x轴和y轴标签</li>
<li><code>col</code>：填充颜色</li>
<li><code>border</code>：边框颜色</li>
<li><code>notch</code>：是否显示置信区间缺口</li>
</ul></li>
</ul>
</div>
<div id="barplot---条形图函数" class="section level5 hasAnchor" number="3.8.4.2.2">
<h5><span class="header-section-number">3.8.4.2.2</span> <code>barplot()</code> - 条形图函数<a href="附录1-r语言编程基础.html#barplot---条形图函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：绘制条形图，比较不同组的数值</li>
<li><strong>语法</strong>：<code>barplot(height, names.arg, main, xlab, ylab, col)</code></li>
<li><strong>参数详解</strong>：
<ul>
<li><code>height</code>：条形的高度值</li>
<li><code>names.arg</code>：条形的标签</li>
<li><code>beside</code>：并排显示多组数据时设为TRUE</li>
<li><code>horiz</code>：是否绘制水平条形图</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>比较不同组的均值</li>
<li>显示分类数据的频数</li>
<li>展示比例或百分比</li>
</ul></li>
</ul>
</div>
</div>
<div id="图形参数和美化" class="section level4 hasAnchor" number="3.8.4.3">
<h4><span class="header-section-number">3.8.4.3</span> 图形参数和美化<a href="附录1-r语言编程基础.html#图形参数和美化" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="颜色参数-col" class="section level5 hasAnchor" number="3.8.4.3.1">
<h5><span class="header-section-number">3.8.4.3.1</span> 颜色参数 <code>col</code><a href="附录1-r语言编程基础.html#颜色参数-col" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>预定义颜色</strong>：<code>"red"</code>, <code>"blue"</code>, <code>"green"</code> 等</li>
<li><strong>颜色名称</strong>：<code>colors()</code> 查看所有可用颜色名称</li>
<li><strong>十六进制</strong>：<code>"#FF0000"</code> (红色)</li>
<li><strong>RGB函数</strong>：<code>rgb(1, 0, 0)</code> (红色)</li>
<li><strong>颜色向量</strong>：为不同元素指定不同颜色</li>
</ul>
</div>
<div id="点的形状参数-pch" class="section level5 hasAnchor" number="3.8.4.3.2">
<h5><span class="header-section-number">3.8.4.3.2</span> 点的形状参数 <code>pch</code><a href="附录1-r语言编程基础.html#点的形状参数-pch" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>常用形状</strong>：
<ul>
<li><code>pch = 1</code>：空心圆 ○</li>
<li><code>pch = 19</code>：实心圆 ●</li>
<li><code>pch = 2</code>：空心三角形 △</li>
<li><code>pch = 17</code>：实心三角形 ▲</li>
<li><code>pch = 15</code>：实心方形 ■</li>
</ul></li>
<li><strong>字符形状</strong>：<code>pch = "A"</code> 使用字符A作为点</li>
</ul>
</div>
<div id="大小参数-cex" class="section level5 hasAnchor" number="3.8.4.3.3">
<h5><span class="header-section-number">3.8.4.3.3</span> 大小参数 <code>cex</code><a href="附录1-r语言编程基础.html#大小参数-cex" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：控制图形元素的大小</li>
<li><strong>默认值</strong>：1.0</li>
<li><strong>用法</strong>：
<ul>
<li><code>cex = 1.5</code>：放大1.5倍</li>
<li><code>cex = 0.8</code>：缩小为0.8倍</li>
</ul></li>
<li><strong>相关参数</strong>：
<ul>
<li><code>cex.main</code>：标题大小</li>
<li><code>cex.lab</code>：轴标签大小</li>
<li><code>cex.axis</code>：轴数字大小</li>
</ul></li>
</ul>
</div>
</div>
<div id="图形叠加和增强" class="section level4 hasAnchor" number="3.8.4.4">
<h4><span class="header-section-number">3.8.4.4</span> 图形叠加和增强<a href="附录1-r语言编程基础.html#图形叠加和增强" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="points---添加点" class="section level5 hasAnchor" number="3.8.4.4.1">
<h5><span class="header-section-number">3.8.4.4.1</span> <code>points()</code> - 添加点<a href="附录1-r语言编程基础.html#points---添加点" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：在现有图形上添加点</li>
<li><strong>语法</strong>：<code>points(x, y, col, pch, cex)</code></li>
<li><strong>坐标系统</strong>：使用与原图相同的坐标系统</li>
<li><strong>应用</strong>：在箱线图上标记均值、在散点图上突出特定点</li>
</ul>
</div>
<div id="图形叠加的原理" class="section level5 hasAnchor" number="3.8.4.4.2">
<h5><span class="header-section-number">3.8.4.4.2</span> 图形叠加的原理<a href="附录1-r语言编程基础.html#图形叠加的原理" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>图层概念</strong>：R绘图采用图层叠加的方式</li>
<li><strong>顺序重要</strong>：后绘制的元素会覆盖先绘制的元素</li>
<li><strong>坐标统一</strong>：所有叠加元素必须使用相同的坐标系统</li>
</ul>
</div>
</div>
<div id="数据重组和整理" class="section level4 hasAnchor" number="3.8.4.5">
<h4><span class="header-section-number">3.8.4.5</span> 数据重组和整理<a href="附录1-r语言编程基础.html#数据重组和整理" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="rep---重复函数" class="section level5 hasAnchor" number="3.8.4.5.1">
<h5><span class="header-section-number">3.8.4.5.1</span> <code>rep()</code> - 重复函数<a href="附录1-r语言编程基础.html#rep---重复函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>作用</strong>：重复向量元素</p></li>
<li><p><strong>语法</strong>：<code>rep(x, times, each, length.out)</code></p></li>
<li><p><strong>参数说明</strong>：</p>
<ul>
<li><code>times</code>：整个向量重复的次数</li>
<li><code>each</code>：每个元素重复的次数</li>
<li><code>length.out</code>：输出向量的长度</li>
</ul></li>
<li><p><strong>示例</strong>：</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="附录1-r语言编程基础.html#cb187-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>), <span class="at">times =</span> <span class="dv">2</span>)    <span class="co"># &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot;</span></span>
<span id="cb187-2"><a href="附录1-r语言编程基础.html#cb187-2" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>), <span class="at">each =</span> <span class="dv">2</span>)     <span class="co"># &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot;</span></span>
<span id="cb187-3"><a href="附录1-r语言编程基础.html#cb187-3" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>), <span class="at">length.out =</span> <span class="dv">5</span>) <span class="co"># &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot;</span></span></code></pre></div></li>
</ul>
</div>
</div>
<div id="图形设计最佳实践" class="section level4 hasAnchor" number="3.8.4.6">
<h4><span class="header-section-number">3.8.4.6</span> 图形设计最佳实践<a href="附录1-r语言编程基础.html#图形设计最佳实践" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="色彩选择原则" class="section level5 hasAnchor" number="3.8.4.6.1">
<h5><span class="header-section-number">3.8.4.6.1</span> 色彩选择原则<a href="附录1-r语言编程基础.html#色彩选择原则" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>对比度</strong>：确保不同组别容易区分</li>
<li><strong>色盲友好</strong>：避免仅依赖红绿色区分</li>
<li><strong>一致性</strong>：同一类型数据使用相同色系</li>
<li><strong>专业性</strong>：避免过于鲜艳的颜色</li>
</ul>
</div>
<div id="标签和标题" class="section level5 hasAnchor" number="3.8.4.6.2">
<h5><span class="header-section-number">3.8.4.6.2</span> 标签和标题<a href="附录1-r语言编程基础.html#标签和标题" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>信息完整</strong>：包含变量名称和单位</li>
<li><strong>简洁明了</strong>：避免过长的标题</li>
<li><strong>中文支持</strong>：确保中文字符正确显示</li>
</ul>
</div>
<div id="图形尺寸和比例" class="section level5 hasAnchor" number="3.8.4.6.3">
<h5><span class="header-section-number">3.8.4.6.3</span> 图形尺寸和比例<a href="附录1-r语言编程基础.html#图形尺寸和比例" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>合适的比例</strong>：避免图形过于压缩或拉伸</li>
<li><strong>合理的尺寸</strong>：适合展示媒介的大小</li>
<li><strong>留白空间</strong>：给图形元素足够的空间</li>
</ul>
</div>
</div>
</div>
<div id="课后练习-6" class="section level3 hasAnchor" number="3.8.5">
<h3><span class="header-section-number">3.8.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某保护区三种植被类型的蝴蝶物种数调查：</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="附录1-r语言编程基础.html#cb188-1" tabindex="-1"></a>shrubland <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">10</span>, <span class="dv">14</span>, <span class="dv">13</span>)    <span class="co"># 灌丛</span></span>
<span id="cb188-2"><a href="附录1-r语言编程基础.html#cb188-2" tabindex="-1"></a>meadow <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">20</span>, <span class="dv">19</span>, <span class="dv">21</span>)       <span class="co"># 草甸</span></span>
<span id="cb188-3"><a href="附录1-r语言编程基础.html#cb188-3" tabindex="-1"></a>riparian <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">28</span>, <span class="dv">23</span>, <span class="dv">27</span>, <span class="dv">26</span>)     <span class="co"># 河岸林</span></span></code></pre></div>
<p>请完成（使用描述统计、基础绘图等已学内容）：</p>
<ol style="list-style-type: decimal">
<li><p>计算三种植被类型的平均物种数和标准差（使用mean()和sd()函数）</p></li>
<li><p>创建一个汇总表显示基本统计信息（使用data.frame()）</p></li>
<li><p>绘制箱线图比较三种植被类型（使用boxplot()函数）</p></li>
<li><p>绘制条形图显示平均物种数（使用barplot()函数）</p></li>
<li><p>在箱线图上添加平均值点（使用points()函数）</p></li>
<li><p>判断哪种植被类型的蝴蝶多样性最高（使用which.max()和max()函数）</p></li>
<li><p>计算每种植被类型的变异系数（标准差/平均值×100）</p></li>
</ol>
</div>
</div>
<div id="条件判断循环结构与函数编程" class="section level2 hasAnchor" number="3.9">
<h2><span class="header-section-number">3.9</span> 条件判断、循环结构与函数编程<a href="附录1-r语言编程基础.html#条件判断循环结构与函数编程" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-7" class="section level3 hasAnchor" number="3.9.1">
<h3><span class="header-section-number">3.9.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在群落生态学研究中，经常需要根据不同条件对物种进行分类处理，或者对大量样地数据进行批量处理。这需要用到编程中的条件判断和循环结构，让R能够自动化完成重复性工作。</p>
</div>
<div id="演示数据-6" class="section level3 hasAnchor" number="3.9.2">
<h3><span class="header-section-number">3.9.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="附录1-r语言编程基础.html#cb189-1" tabindex="-1"></a><span class="co"># 某自然保护区不同海拔的物种调查数据</span></span>
<span id="cb189-2"><a href="附录1-r语言编程基础.html#cb189-2" tabindex="-1"></a>sites_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb189-3"><a href="附录1-r语言编程基础.html#cb189-3" tabindex="-1"></a>  <span class="at">site_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;S&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb189-4"><a href="附录1-r语言编程基础.html#cb189-4" tabindex="-1"></a>  <span class="at">elevation =</span> <span class="fu">c</span>(<span class="dv">1200</span>, <span class="dv">1450</span>, <span class="dv">1800</span>, <span class="dv">2100</span>, <span class="dv">2350</span>, <span class="dv">1650</span>, <span class="dv">1900</span>, <span class="dv">2200</span>, <span class="dv">1750</span>, <span class="dv">2050</span>),</span>
<span id="cb189-5"><a href="附录1-r语言编程基础.html#cb189-5" tabindex="-1"></a>  <span class="at">species_count =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">52</span>, <span class="dv">38</span>, <span class="dv">28</span>, <span class="dv">22</span>, <span class="dv">48</span>, <span class="dv">35</span>, <span class="dv">25</span>, <span class="dv">42</span>, <span class="dv">30</span>),</span>
<span id="cb189-6"><a href="附录1-r语言编程基础.html#cb189-6" tabindex="-1"></a>  <span class="at">dominant_species =</span> <span class="fu">c</span>(<span class="st">&quot;栎树&quot;</span>, <span class="st">&quot;栎树&quot;</span>, <span class="st">&quot;云杉&quot;</span>, <span class="st">&quot;冷杉&quot;</span>, <span class="st">&quot;高山杜鹃&quot;</span>, <span class="st">&quot;栎树&quot;</span>, <span class="st">&quot;云杉&quot;</span>, <span class="st">&quot;冷杉&quot;</span>, <span class="st">&quot;云杉&quot;</span>, <span class="st">&quot;冷杉&quot;</span>)</span>
<span id="cb189-7"><a href="附录1-r语言编程基础.html#cb189-7" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="课堂演示过程-7" class="section level3 hasAnchor" number="3.9.3">
<h3><span class="header-section-number">3.9.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="条件判断基础" class="section level4 hasAnchor" number="3.9.3.1">
<h4><span class="header-section-number">3.9.3.1</span> 条件判断基础<a href="附录1-r语言编程基础.html#条件判断基础" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="附录1-r语言编程基础.html#cb190-1" tabindex="-1"></a><span class="co"># 创建示例数据</span></span>
<span id="cb190-2"><a href="附录1-r语言编程基础.html#cb190-2" tabindex="-1"></a>sites_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb190-3"><a href="附录1-r语言编程基础.html#cb190-3" tabindex="-1"></a>  <span class="at">site_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;S&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb190-4"><a href="附录1-r语言编程基础.html#cb190-4" tabindex="-1"></a>  <span class="at">elevation =</span> <span class="fu">c</span>(<span class="dv">1200</span>, <span class="dv">1450</span>, <span class="dv">1800</span>, <span class="dv">2100</span>, <span class="dv">2350</span>, <span class="dv">1650</span>, <span class="dv">1900</span>, <span class="dv">2200</span>, <span class="dv">1750</span>, <span class="dv">2050</span>),</span>
<span id="cb190-5"><a href="附录1-r语言编程基础.html#cb190-5" tabindex="-1"></a>  <span class="at">species_count =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">52</span>, <span class="dv">38</span>, <span class="dv">28</span>, <span class="dv">22</span>, <span class="dv">48</span>, <span class="dv">35</span>, <span class="dv">25</span>, <span class="dv">42</span>, <span class="dv">30</span>),</span>
<span id="cb190-6"><a href="附录1-r语言编程基础.html#cb190-6" tabindex="-1"></a>  <span class="at">dominant_species =</span> <span class="fu">c</span>(<span class="st">&quot;栎树&quot;</span>, <span class="st">&quot;栎树&quot;</span>, <span class="st">&quot;云杉&quot;</span>, <span class="st">&quot;冷杉&quot;</span>, <span class="st">&quot;高山杜鹃&quot;</span>, <span class="st">&quot;栎树&quot;</span>, <span class="st">&quot;云杉&quot;</span>, <span class="st">&quot;冷杉&quot;</span>, <span class="st">&quot;云杉&quot;</span>, <span class="st">&quot;冷杉&quot;</span>)</span>
<span id="cb190-7"><a href="附录1-r语言编程基础.html#cb190-7" tabindex="-1"></a>)</span>
<span id="cb190-8"><a href="附录1-r语言编程基础.html#cb190-8" tabindex="-1"></a></span>
<span id="cb190-9"><a href="附录1-r语言编程基础.html#cb190-9" tabindex="-1"></a><span class="co"># 简单的if语句</span></span>
<span id="cb190-10"><a href="附录1-r语言编程基础.html#cb190-10" tabindex="-1"></a>elevation_threshold <span class="ot">&lt;-</span> <span class="dv">2000</span></span>
<span id="cb190-11"><a href="附录1-r语言编程基础.html#cb190-11" tabindex="-1"></a><span class="cf">if</span> (sites_data<span class="sc">$</span>elevation[<span class="dv">1</span>] <span class="sc">&gt;</span> elevation_threshold) {</span>
<span id="cb190-12"><a href="附录1-r语言编程基础.html#cb190-12" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;高海拔样地&quot;</span>)</span>
<span id="cb190-13"><a href="附录1-r语言编程基础.html#cb190-13" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb190-14"><a href="附录1-r语言编程基础.html#cb190-14" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;低海拔样地&quot;</span>)</span>
<span id="cb190-15"><a href="附录1-r语言编程基础.html#cb190-15" tabindex="-1"></a>}</span>
<span id="cb190-16"><a href="附录1-r语言编程基础.html#cb190-16" tabindex="-1"></a></span>
<span id="cb190-17"><a href="附录1-r语言编程基础.html#cb190-17" tabindex="-1"></a><span class="co"># if-else判断所有样地</span></span>
<span id="cb190-18"><a href="附录1-r语言编程基础.html#cb190-18" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(sites_data)) {</span>
<span id="cb190-19"><a href="附录1-r语言编程基础.html#cb190-19" tabindex="-1"></a>  <span class="cf">if</span> (sites_data<span class="sc">$</span>elevation[i] <span class="sc">&gt;</span> <span class="dv">2000</span>) {</span>
<span id="cb190-20"><a href="附录1-r语言编程基础.html#cb190-20" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(sites_data<span class="sc">$</span>site_id[i], <span class="st">&quot;是高海拔样地&quot;</span>))</span>
<span id="cb190-21"><a href="附录1-r语言编程基础.html#cb190-21" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb190-22"><a href="附录1-r语言编程基础.html#cb190-22" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(sites_data<span class="sc">$</span>site_id[i], <span class="st">&quot;是低海拔样地&quot;</span>))</span>
<span id="cb190-23"><a href="附录1-r语言编程基础.html#cb190-23" tabindex="-1"></a>  }</span>
<span id="cb190-24"><a href="附录1-r语言编程基础.html#cb190-24" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="向量化条件判断" class="section level4 hasAnchor" number="3.9.3.2">
<h4><span class="header-section-number">3.9.3.2</span> 向量化条件判断<a href="附录1-r语言编程基础.html#向量化条件判断" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="附录1-r语言编程基础.html#cb191-1" tabindex="-1"></a><span class="co"># 使用ifelse()函数进行向量化判断</span></span>
<span id="cb191-2"><a href="附录1-r语言编程基础.html#cb191-2" tabindex="-1"></a>sites_data<span class="sc">$</span>elevation_zone <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(sites_data<span class="sc">$</span>elevation <span class="sc">&gt;</span> <span class="dv">2000</span>, <span class="st">&quot;高海拔&quot;</span>, <span class="st">&quot;低海拔&quot;</span>)</span>
<span id="cb191-3"><a href="附录1-r语言编程基础.html#cb191-3" tabindex="-1"></a><span class="fu">print</span>(sites_data[, <span class="fu">c</span>(<span class="st">&quot;site_id&quot;</span>, <span class="st">&quot;elevation&quot;</span>, <span class="st">&quot;elevation_zone&quot;</span>)])</span>
<span id="cb191-4"><a href="附录1-r语言编程基础.html#cb191-4" tabindex="-1"></a></span>
<span id="cb191-5"><a href="附录1-r语言编程基础.html#cb191-5" tabindex="-1"></a><span class="co"># 多层条件判断</span></span>
<span id="cb191-6"><a href="附录1-r语言编程基础.html#cb191-6" tabindex="-1"></a>sites_data<span class="sc">$</span>vegetation_type <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(sites_data<span class="sc">$</span>elevation <span class="sc">&lt;</span> <span class="dv">1500</span>, <span class="st">&quot;阔叶林&quot;</span>,</span>
<span id="cb191-7"><a href="附录1-r语言编程基础.html#cb191-7" tabindex="-1"></a>                                    <span class="fu">ifelse</span>(sites_data<span class="sc">$</span>elevation <span class="sc">&lt;</span> <span class="dv">2000</span>, <span class="st">&quot;混交林&quot;</span>, <span class="st">&quot;针叶林&quot;</span>))</span>
<span id="cb191-8"><a href="附录1-r语言编程基础.html#cb191-8" tabindex="-1"></a><span class="fu">print</span>(sites_data[, <span class="fu">c</span>(<span class="st">&quot;site_id&quot;</span>, <span class="st">&quot;elevation&quot;</span>, <span class="st">&quot;vegetation_type&quot;</span>)])</span></code></pre></div>
</div>
<div id="for循环处理" class="section level4 hasAnchor" number="3.9.3.3">
<h4><span class="header-section-number">3.9.3.3</span> for循环处理<a href="附录1-r语言编程基础.html#for循环处理" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="附录1-r语言编程基础.html#cb192-1" tabindex="-1"></a><span class="co"># 计算每个样地的多样性指数类别</span></span>
<span id="cb192-2"><a href="附录1-r语言编程基础.html#cb192-2" tabindex="-1"></a>diversity_categories <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="fu">nrow</span>(sites_data))</span>
<span id="cb192-3"><a href="附录1-r语言编程基础.html#cb192-3" tabindex="-1"></a></span>
<span id="cb192-4"><a href="附录1-r语言编程基础.html#cb192-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(sites_data)) {</span>
<span id="cb192-5"><a href="附录1-r语言编程基础.html#cb192-5" tabindex="-1"></a>  species_num <span class="ot">&lt;-</span> sites_data<span class="sc">$</span>species_count[i]</span>
<span id="cb192-6"><a href="附录1-r语言编程基础.html#cb192-6" tabindex="-1"></a>  <span class="cf">if</span> (species_num <span class="sc">&gt;=</span> <span class="dv">40</span>) {</span>
<span id="cb192-7"><a href="附录1-r语言编程基础.html#cb192-7" tabindex="-1"></a>    diversity_categories[i] <span class="ot">&lt;-</span> <span class="st">&quot;高多样性&quot;</span></span>
<span id="cb192-8"><a href="附录1-r语言编程基础.html#cb192-8" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (species_num <span class="sc">&gt;=</span> <span class="dv">30</span>) {</span>
<span id="cb192-9"><a href="附录1-r语言编程基础.html#cb192-9" tabindex="-1"></a>    diversity_categories[i] <span class="ot">&lt;-</span> <span class="st">&quot;中等多样性&quot;</span>  </span>
<span id="cb192-10"><a href="附录1-r语言编程基础.html#cb192-10" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb192-11"><a href="附录1-r语言编程基础.html#cb192-11" tabindex="-1"></a>    diversity_categories[i] <span class="ot">&lt;-</span> <span class="st">&quot;低多样性&quot;</span></span>
<span id="cb192-12"><a href="附录1-r语言编程基础.html#cb192-12" tabindex="-1"></a>  }</span>
<span id="cb192-13"><a href="附录1-r语言编程基础.html#cb192-13" tabindex="-1"></a>}</span>
<span id="cb192-14"><a href="附录1-r语言编程基础.html#cb192-14" tabindex="-1"></a></span>
<span id="cb192-15"><a href="附录1-r语言编程基础.html#cb192-15" tabindex="-1"></a>sites_data<span class="sc">$</span>diversity_category <span class="ot">&lt;-</span> diversity_categories</span>
<span id="cb192-16"><a href="附录1-r语言编程基础.html#cb192-16" tabindex="-1"></a><span class="fu">print</span>(sites_data[, <span class="fu">c</span>(<span class="st">&quot;site_id&quot;</span>, <span class="st">&quot;species_count&quot;</span>, <span class="st">&quot;diversity_category&quot;</span>)])</span></code></pre></div>
</div>
<div id="自定义函数编写" class="section level4 hasAnchor" number="3.9.3.4">
<h4><span class="header-section-number">3.9.3.4</span> 自定义函数编写<a href="附录1-r语言编程基础.html#自定义函数编写" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="附录1-r语言编程基础.html#cb193-1" tabindex="-1"></a><span class="co"># 编写海拔带判断函数</span></span>
<span id="cb193-2"><a href="附录1-r语言编程基础.html#cb193-2" tabindex="-1"></a>classify_elevation_zone <span class="ot">&lt;-</span> <span class="cf">function</span>(elevation) {</span>
<span id="cb193-3"><a href="附录1-r语言编程基础.html#cb193-3" tabindex="-1"></a>  <span class="cf">if</span> (elevation <span class="sc">&lt;</span> <span class="dv">1500</span>) {</span>
<span id="cb193-4"><a href="附录1-r语言编程基础.html#cb193-4" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;低山带&quot;</span>)</span>
<span id="cb193-5"><a href="附录1-r语言编程基础.html#cb193-5" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (elevation <span class="sc">&lt;</span> <span class="dv">2000</span>) {</span>
<span id="cb193-6"><a href="附录1-r语言编程基础.html#cb193-6" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;中山带&quot;</span>)</span>
<span id="cb193-7"><a href="附录1-r语言编程基础.html#cb193-7" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb193-8"><a href="附录1-r语言编程基础.html#cb193-8" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;高山带&quot;</span>)</span>
<span id="cb193-9"><a href="附录1-r语言编程基础.html#cb193-9" tabindex="-1"></a>  }</span>
<span id="cb193-10"><a href="附录1-r语言编程基础.html#cb193-10" tabindex="-1"></a>}</span>
<span id="cb193-11"><a href="附录1-r语言编程基础.html#cb193-11" tabindex="-1"></a></span>
<span id="cb193-12"><a href="附录1-r语言编程基础.html#cb193-12" tabindex="-1"></a><span class="co"># 测试函数</span></span>
<span id="cb193-13"><a href="附录1-r语言编程基础.html#cb193-13" tabindex="-1"></a><span class="fu">classify_elevation_zone</span>(<span class="dv">1800</span>)</span>
<span id="cb193-14"><a href="附录1-r语言编程基础.html#cb193-14" tabindex="-1"></a><span class="fu">classify_elevation_zone</span>(<span class="dv">2200</span>)</span>
<span id="cb193-15"><a href="附录1-r语言编程基础.html#cb193-15" tabindex="-1"></a></span>
<span id="cb193-16"><a href="附录1-r语言编程基础.html#cb193-16" tabindex="-1"></a><span class="co"># 批量应用函数</span></span>
<span id="cb193-17"><a href="附录1-r语言编程基础.html#cb193-17" tabindex="-1"></a>sites_data<span class="sc">$</span>elevation_belt <span class="ot">&lt;-</span> <span class="fu">sapply</span>(sites_data<span class="sc">$</span>elevation, classify_elevation_zone)</span>
<span id="cb193-18"><a href="附录1-r语言编程基础.html#cb193-18" tabindex="-1"></a><span class="fu">print</span>(sites_data[, <span class="fu">c</span>(<span class="st">&quot;site_id&quot;</span>, <span class="st">&quot;elevation&quot;</span>, <span class="st">&quot;elevation_belt&quot;</span>)])</span></code></pre></div>
</div>
<div id="复杂条件处理" class="section level4 hasAnchor" number="3.9.3.5">
<h4><span class="header-section-number">3.9.3.5</span> 复杂条件处理<a href="附录1-r语言编程基础.html#复杂条件处理" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="附录1-r语言编程基础.html#cb194-1" tabindex="-1"></a><span class="co"># 编写综合评估函数</span></span>
<span id="cb194-2"><a href="附录1-r语言编程基础.html#cb194-2" tabindex="-1"></a>assess_conservation_value <span class="ot">&lt;-</span> <span class="cf">function</span>(elevation, species_count, dominant_sp) {</span>
<span id="cb194-3"><a href="附录1-r语言编程基础.html#cb194-3" tabindex="-1"></a>  score <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb194-4"><a href="附录1-r语言编程基础.html#cb194-4" tabindex="-1"></a>  </span>
<span id="cb194-5"><a href="附录1-r语言编程基础.html#cb194-5" tabindex="-1"></a>  <span class="co"># 海拔因子</span></span>
<span id="cb194-6"><a href="附录1-r语言编程基础.html#cb194-6" tabindex="-1"></a>  <span class="cf">if</span> (elevation <span class="sc">&gt;</span> <span class="dv">2000</span>) {</span>
<span id="cb194-7"><a href="附录1-r语言编程基础.html#cb194-7" tabindex="-1"></a>    score <span class="ot">&lt;-</span> score <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb194-8"><a href="附录1-r语言编程基础.html#cb194-8" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (elevation <span class="sc">&gt;</span> <span class="dv">1500</span>) {</span>
<span id="cb194-9"><a href="附录1-r语言编程基础.html#cb194-9" tabindex="-1"></a>    score <span class="ot">&lt;-</span> score <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb194-10"><a href="附录1-r语言编程基础.html#cb194-10" tabindex="-1"></a>  }</span>
<span id="cb194-11"><a href="附录1-r语言编程基础.html#cb194-11" tabindex="-1"></a>  </span>
<span id="cb194-12"><a href="附录1-r语言编程基础.html#cb194-12" tabindex="-1"></a>  <span class="co"># 物种多样性因子</span></span>
<span id="cb194-13"><a href="附录1-r语言编程基础.html#cb194-13" tabindex="-1"></a>  <span class="cf">if</span> (species_count <span class="sc">&gt;</span> <span class="dv">40</span>) {</span>
<span id="cb194-14"><a href="附录1-r语言编程基础.html#cb194-14" tabindex="-1"></a>    score <span class="ot">&lt;-</span> score <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb194-15"><a href="附录1-r语言编程基础.html#cb194-15" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (species_count <span class="sc">&gt;</span> <span class="dv">30</span>) {</span>
<span id="cb194-16"><a href="附录1-r语言编程基础.html#cb194-16" tabindex="-1"></a>    score <span class="ot">&lt;-</span> score <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb194-17"><a href="附录1-r语言编程基础.html#cb194-17" tabindex="-1"></a>  }</span>
<span id="cb194-18"><a href="附录1-r语言编程基础.html#cb194-18" tabindex="-1"></a>  </span>
<span id="cb194-19"><a href="附录1-r语言编程基础.html#cb194-19" tabindex="-1"></a>  <span class="co"># 优势种稀有性因子</span></span>
<span id="cb194-20"><a href="附录1-r语言编程基础.html#cb194-20" tabindex="-1"></a>  rare_species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;高山杜鹃&quot;</span>, <span class="st">&quot;冷杉&quot;</span>)</span>
<span id="cb194-21"><a href="附录1-r语言编程基础.html#cb194-21" tabindex="-1"></a>  <span class="cf">if</span> (dominant_sp <span class="sc">%in%</span> rare_species) {</span>
<span id="cb194-22"><a href="附录1-r语言编程基础.html#cb194-22" tabindex="-1"></a>    score <span class="ot">&lt;-</span> score <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb194-23"><a href="附录1-r语言编程基础.html#cb194-23" tabindex="-1"></a>  }</span>
<span id="cb194-24"><a href="附录1-r语言编程基础.html#cb194-24" tabindex="-1"></a>  </span>
<span id="cb194-25"><a href="附录1-r语言编程基础.html#cb194-25" tabindex="-1"></a>  <span class="co"># 返回保护价值等级</span></span>
<span id="cb194-26"><a href="附录1-r语言编程基础.html#cb194-26" tabindex="-1"></a>  <span class="cf">if</span> (score <span class="sc">&gt;=</span> <span class="dv">4</span>) {</span>
<span id="cb194-27"><a href="附录1-r语言编程基础.html#cb194-27" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;极高价值&quot;</span>)</span>
<span id="cb194-28"><a href="附录1-r语言编程基础.html#cb194-28" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (score <span class="sc">&gt;=</span> <span class="dv">3</span>) {</span>
<span id="cb194-29"><a href="附录1-r语言编程基础.html#cb194-29" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;高价值&quot;</span>)</span>
<span id="cb194-30"><a href="附录1-r语言编程基础.html#cb194-30" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (score <span class="sc">&gt;=</span> <span class="dv">2</span>) {</span>
<span id="cb194-31"><a href="附录1-r语言编程基础.html#cb194-31" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;中等价值&quot;</span>)</span>
<span id="cb194-32"><a href="附录1-r语言编程基础.html#cb194-32" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb194-33"><a href="附录1-r语言编程基础.html#cb194-33" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;一般价值&quot;</span>)</span>
<span id="cb194-34"><a href="附录1-r语言编程基础.html#cb194-34" tabindex="-1"></a>  }</span>
<span id="cb194-35"><a href="附录1-r语言编程基础.html#cb194-35" tabindex="-1"></a>}</span>
<span id="cb194-36"><a href="附录1-r语言编程基础.html#cb194-36" tabindex="-1"></a></span>
<span id="cb194-37"><a href="附录1-r语言编程基础.html#cb194-37" tabindex="-1"></a><span class="co"># 应用综合评估</span></span>
<span id="cb194-38"><a href="附录1-r语言编程基础.html#cb194-38" tabindex="-1"></a>sites_data<span class="sc">$</span>conservation_value <span class="ot">&lt;-</span> <span class="fu">mapply</span>(assess_conservation_value, </span>
<span id="cb194-39"><a href="附录1-r语言编程基础.html#cb194-39" tabindex="-1"></a>                                       sites_data<span class="sc">$</span>elevation,</span>
<span id="cb194-40"><a href="附录1-r语言编程基础.html#cb194-40" tabindex="-1"></a>                                       sites_data<span class="sc">$</span>species_count,</span>
<span id="cb194-41"><a href="附录1-r语言编程基础.html#cb194-41" tabindex="-1"></a>                                       sites_data<span class="sc">$</span>dominant_species)</span>
<span id="cb194-42"><a href="附录1-r语言编程基础.html#cb194-42" tabindex="-1"></a></span>
<span id="cb194-43"><a href="附录1-r语言编程基础.html#cb194-43" tabindex="-1"></a><span class="fu">print</span>(sites_data[, <span class="fu">c</span>(<span class="st">&quot;site_id&quot;</span>, <span class="st">&quot;conservation_value&quot;</span>)])</span></code></pre></div>
</div>
</div>
<div id="r语言知识点详解-7" class="section level3 hasAnchor" number="3.9.4">
<h3><span class="header-section-number">3.9.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="条件判断结构" class="section level4 hasAnchor" number="3.9.4.1">
<h4><span class="header-section-number">3.9.4.1</span> 条件判断结构<a href="附录1-r语言编程基础.html#条件判断结构" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="if-语句" class="section level5 hasAnchor" number="3.9.4.1.1">
<h5><span class="header-section-number">3.9.4.1.1</span> <code>if</code> 语句<a href="附录1-r语言编程基础.html#if-语句" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>if (条件) { 执行代码 }</code></li>
<li><strong>条件</strong>：必须是逻辑值（TRUE/FALSE）</li>
<li><strong>执行规则</strong>：条件为TRUE时执行大括号内的代码</li>
<li><strong>注意事项</strong>：条件必须是长度为1的逻辑向量</li>
</ul>
</div>
<div id="if-else-语句" class="section level5 hasAnchor" number="3.9.4.1.2">
<h5><span class="header-section-number">3.9.4.1.2</span> <code>if-else</code> 语句<a href="附录1-r语言编程基础.html#if-else-语句" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>语法</strong>：</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="附录1-r语言编程基础.html#cb195-1" tabindex="-1"></a><span class="cf">if</span> (条件) {</span>
<span id="cb195-2"><a href="附录1-r语言编程基础.html#cb195-2" tabindex="-1"></a>  <span class="co"># 条件为TRUE时执行</span></span>
<span id="cb195-3"><a href="附录1-r语言编程基础.html#cb195-3" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb195-4"><a href="附录1-r语言编程基础.html#cb195-4" tabindex="-1"></a>  <span class="co"># 条件为FALSE时执行</span></span>
<span id="cb195-5"><a href="附录1-r语言编程基础.html#cb195-5" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p><strong>多重条件</strong>：<code>else if</code>可以链式连接</p></li>
<li><p><strong>最佳实践</strong>：始终使用大括号，即使只有一行代码</p></li>
</ul>
</div>
<div id="ifelse-函数向量化" class="section level5 hasAnchor" number="3.9.4.1.3">
<h5><span class="header-section-number">3.9.4.1.3</span> <code>ifelse()</code> 函数（向量化）<a href="附录1-r语言编程基础.html#ifelse-函数向量化" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>ifelse(test, yes, no)</code></li>
<li><strong>优势</strong>：可以处理向量，一次性判断多个元素</li>
<li><strong>参数</strong>：
<ul>
<li><code>test</code>：逻辑向量条件</li>
<li><code>yes</code>：条件为TRUE时返回的值</li>
<li><code>no</code>：条件为FALSE时返回的值</li>
</ul></li>
<li><strong>嵌套使用</strong>：可以嵌套实现多重条件判断</li>
</ul>
</div>
</div>
<div id="循环结构" class="section level4 hasAnchor" number="3.9.4.2">
<h4><span class="header-section-number">3.9.4.2</span> 循环结构<a href="附录1-r语言编程基础.html#循环结构" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="for-循环" class="section level5 hasAnchor" number="3.9.4.2.1">
<h5><span class="header-section-number">3.9.4.2.1</span> <code>for</code> 循环<a href="附录1-r语言编程基础.html#for-循环" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>语法</strong>：<code>for (变量 in 序列) { 循环体 }</code></p></li>
<li><p><strong>常见用法</strong>：</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="附录1-r语言编程基础.html#cb196-1" tabindex="-1"></a><span class="co"># 按索引循环</span></span>
<span id="cb196-2"><a href="附录1-r语言编程基础.html#cb196-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) { }</span>
<span id="cb196-3"><a href="附录1-r语言编程基础.html#cb196-3" tabindex="-1"></a></span>
<span id="cb196-4"><a href="附录1-r语言编程基础.html#cb196-4" tabindex="-1"></a><span class="co"># 按元素循环</span></span>
<span id="cb196-5"><a href="附录1-r语言编程基础.html#cb196-5" tabindex="-1"></a><span class="cf">for</span> (item <span class="cf">in</span> vector) { }</span>
<span id="cb196-6"><a href="附录1-r语言编程基础.html#cb196-6" tabindex="-1"></a></span>
<span id="cb196-7"><a href="附录1-r语言编程基础.html#cb196-7" tabindex="-1"></a><span class="co"># 按名称循环</span></span>
<span id="cb196-8"><a href="附录1-r语言编程基础.html#cb196-8" tabindex="-1"></a><span class="cf">for</span> (name <span class="cf">in</span> <span class="fu">names</span>(list)) { }</span></code></pre></div></li>
<li><p><strong>循环控制</strong>：</p>
<ul>
<li><code>break</code>：跳出循环</li>
<li><code>next</code>：跳过当前迭代</li>
</ul></li>
</ul>
</div>
<div id="其他循环类型" class="section level5 hasAnchor" number="3.9.4.2.2">
<h5><span class="header-section-number">3.9.4.2.2</span> 其他循环类型<a href="附录1-r语言编程基础.html#其他循环类型" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>while</code> 循环</strong>：<code>while (条件) { 循环体 }</code></li>
<li><strong><code>repeat</code> 循环</strong>：<code>repeat { 循环体; if(条件) break }</code></li>
</ul>
</div>
</div>
<div id="函数定义" class="section level4 hasAnchor" number="3.9.4.3">
<h4><span class="header-section-number">3.9.4.3</span> 函数定义<a href="附录1-r语言编程基础.html#函数定义" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="基本函数语法" class="section level5 hasAnchor" number="3.9.4.3.1">
<h5><span class="header-section-number">3.9.4.3.1</span> 基本函数语法<a href="附录1-r语言编程基础.html#基本函数语法" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>语法</strong>：</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="附录1-r语言编程基础.html#cb197-1" tabindex="-1"></a>函数名 <span class="ot">&lt;-</span> <span class="cf">function</span>(参数1, 参数2 <span class="ot">=</span> 默认值) {</span>
<span id="cb197-2"><a href="附录1-r语言编程基础.html#cb197-2" tabindex="-1"></a>  <span class="co"># 函数体</span></span>
<span id="cb197-3"><a href="附录1-r语言编程基础.html#cb197-3" tabindex="-1"></a>  <span class="fu">return</span>(返回值)</span>
<span id="cb197-4"><a href="附录1-r语言编程基础.html#cb197-4" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p><strong>参数</strong>：</p>
<ul>
<li>必需参数：调用时必须提供</li>
<li>可选参数：有默认值，可省略</li>
</ul></li>
<li><p><strong>返回值</strong>：</p>
<ul>
<li>显式返回：使用<code>return()</code></li>
<li>隐式返回：函数最后一个表达式的值</li>
</ul></li>
</ul>
</div>
<div id="函数设计原则" class="section level5 hasAnchor" number="3.9.4.3.2">
<h5><span class="header-section-number">3.9.4.3.2</span> 函数设计原则<a href="附录1-r语言编程基础.html#函数设计原则" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>单一职责</strong>：一个函数只做一件事</li>
<li><strong>参数验证</strong>：检查输入参数的有效性</li>
<li><strong>错误处理</strong>：使用<code>stop()</code>、<code>warning()</code>处理异常</li>
<li><strong>文档化</strong>：添加注释说明函数用途和参数</li>
</ul>
</div>
</div>
<div id="高级应用函数" class="section level4 hasAnchor" number="3.9.4.4">
<h4><span class="header-section-number">3.9.4.4</span> 高级应用函数<a href="附录1-r语言编程基础.html#高级应用函数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="sapply---简化的apply" class="section level5 hasAnchor" number="3.9.4.4.1">
<h5><span class="header-section-number">3.9.4.4.1</span> <code>sapply()</code> - 简化的apply<a href="附录1-r语言编程基础.html#sapply---简化的apply" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：对向量或列表的每个元素应用函数</li>
<li><strong>语法</strong>：<code>sapply(X, FUN, ...)</code></li>
<li><strong>返回值</strong>：简化后的向量或矩阵</li>
<li><strong>与<code>lapply()</code>的区别</strong>：
<ul>
<li><code>lapply()</code>总是返回列表</li>
<li><code>sapply()</code>尝试简化结果</li>
</ul></li>
</ul>
</div>
<div id="mapply---多变量apply" class="section level5 hasAnchor" number="3.9.4.4.2">
<h5><span class="header-section-number">3.9.4.4.2</span> <code>mapply()</code> - 多变量apply<a href="附录1-r语言编程基础.html#mapply---多变量apply" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：同时对多个向量应用函数</li>
<li><strong>语法</strong>：<code>mapply(FUN, ..., MoreArgs = NULL)</code></li>
<li><strong>应用场景</strong>：函数需要多个参数时使用</li>
<li><strong>示例</strong>：<code>mapply(function(x, y) x + y, vector1, vector2)</code></li>
</ul>
</div>
</div>
<div id="逻辑运算符" class="section level4 hasAnchor" number="3.9.4.5">
<h4><span class="header-section-number">3.9.4.5</span> 逻辑运算符<a href="附录1-r语言编程基础.html#逻辑运算符" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="基本逻辑运算符" class="section level5 hasAnchor" number="3.9.4.5.1">
<h5><span class="header-section-number">3.9.4.5.1</span> 基本逻辑运算符<a href="附录1-r语言编程基础.html#基本逻辑运算符" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>==</code></strong>：等于</li>
<li><strong><code>!=</code></strong>：不等于</li>
<li><strong><code>&gt;</code></strong>、<code>&lt;</code><strong>、<code>&gt;=</code></strong>、<code>&lt;=</code>**：比较运算符</li>
<li><strong><code>&amp;</code></strong>：与（向量化）</li>
<li><strong><code>|</code></strong>：或（向量化）</li>
<li><strong><code>!</code></strong>：非</li>
<li><strong><code>&amp;&amp;</code></strong>、<code>||</code>**：短路逻辑运算符（只判断第一个元素）</li>
</ul>
</div>
<div id="成员测试" class="section level5 hasAnchor" number="3.9.4.5.2">
<h5><span class="header-section-number">3.9.4.5.2</span> 成员测试<a href="附录1-r语言编程基础.html#成员测试" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>%in%</code></strong>：检查元素是否在向量中</li>
<li><strong><code>is.na()</code></strong>：检查缺失值</li>
<li><strong><code>is.null()</code></strong>：检查空值</li>
</ul>
</div>
</div>
<div id="编程最佳实践" class="section level4 hasAnchor" number="3.9.4.6">
<h4><span class="header-section-number">3.9.4.6</span> 编程最佳实践<a href="附录1-r语言编程基础.html#编程最佳实践" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="代码组织" class="section level5 hasAnchor" number="3.9.4.6.1">
<h5><span class="header-section-number">3.9.4.6.1</span> 代码组织<a href="附录1-r语言编程基础.html#代码组织" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>缩进</strong>：使用一致的缩进（建议2或4个空格）</li>
<li><strong>命名</strong>：使用有意义的变量名和函数名</li>
<li><strong>注释</strong>：解释复杂逻辑和算法思路</li>
<li><strong>模块化</strong>：将复杂任务分解为简单函数</li>
</ul>
</div>
<div id="性能考虑" class="section level5 hasAnchor" number="3.9.4.6.2">
<h5><span class="header-section-number">3.9.4.6.2</span> 性能考虑<a href="附录1-r语言编程基础.html#性能考虑" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>向量化</strong>：优先使用向量化操作而非循环</li>
<li><strong>预分配</strong>：循环前预分配存储空间</li>
<li><strong>避免增长</strong>：不要在循环中动态增长向量</li>
</ul>
</div>
<div id="调试技巧" class="section level5 hasAnchor" number="3.9.4.6.3">
<h5><span class="header-section-number">3.9.4.6.3</span> 调试技巧<a href="附录1-r语言编程基础.html#调试技巧" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>print()</code></strong>：在关键位置输出变量值</li>
<li><strong><code>browser()</code></strong>：设置断点进行交互式调试</li>
<li><strong><code>traceback()</code></strong>：查看错误调用堆栈</li>
<li><strong>分步测试</strong>：逐步测试函数的各个部分</li>
</ul>
</div>
</div>
</div>
<div id="课后练习-7" class="section level3 hasAnchor" number="3.9.5">
<h3><span class="header-section-number">3.9.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某湿地鸟类监测数据包含以下信息：</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="附录1-r语言编程基础.html#cb198-1" tabindex="-1"></a>bird_monitoring <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb198-2"><a href="附录1-r语言编程基础.html#cb198-2" tabindex="-1"></a>  <span class="at">site =</span> <span class="fu">c</span>(<span class="st">&quot;A1&quot;</span>, <span class="st">&quot;A2&quot;</span>, <span class="st">&quot;B1&quot;</span>, <span class="st">&quot;B2&quot;</span>, <span class="st">&quot;C1&quot;</span>, <span class="st">&quot;C2&quot;</span>),</span>
<span id="cb198-3"><a href="附录1-r语言编程基础.html#cb198-3" tabindex="-1"></a>  <span class="at">water_depth =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">35</span>, <span class="dv">65</span>, <span class="dv">55</span>),  <span class="co"># 水深(cm)</span></span>
<span id="cb198-4"><a href="附录1-r语言编程基础.html#cb198-4" tabindex="-1"></a>  <span class="at">bird_abundance =</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">20</span>, <span class="dv">16</span>, <span class="dv">5</span>, <span class="dv">8</span>),   <span class="co"># 鸟类丰度</span></span>
<span id="cb198-5"><a href="附录1-r语言编程基础.html#cb198-5" tabindex="-1"></a>  <span class="at">season =</span> <span class="fu">c</span>(<span class="st">&quot;春季&quot;</span>, <span class="st">&quot;春季&quot;</span>, <span class="st">&quot;夏季&quot;</span>, <span class="st">&quot;夏季&quot;</span>, <span class="st">&quot;秋季&quot;</span>, <span class="st">&quot;秋季&quot;</span>)</span>
<span id="cb198-6"><a href="附录1-r语言编程基础.html#cb198-6" tabindex="-1"></a>)</span></code></pre></div>
<p>请完成（使用if-else、循环、函数等编程内容，结合之前学过的数据处理方法）：</p>
<ol style="list-style-type: decimal">
<li><p>使用<code>ifelse()</code>函数，根据水深将栖息地分类（&lt;30cm浅水区，30-50cm中等深度，&gt;50cm深水区）</p></li>
<li><p>编写函数<code>classify_habitat_quality()</code>，综合水深和鸟类丰度评估栖息地质量</p></li>
<li><p>使用<code>for</code>循环，计算每个季节的平均鸟类丰度</p></li>
<li><p>创建一个新列，标记高丰度样地（丰度&gt;15为高丰度，使用ifelse()）</p></li>
<li><p>编写函数处理整个数据集，输出每个样地的综合评估报告</p></li>
<li><p>使用<code>apply</code>族函数重做第3题（比较循环和向量化方法的差异）</p></li>
</ol>
</div>
</div>
<div id="现代数据科学工具包应用" class="section level2 hasAnchor" number="3.10">
<h2><span class="header-section-number">3.10</span> 现代数据科学工具包应用<a href="附录1-r语言编程基础.html#现代数据科学工具包应用" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-8" class="section level3 hasAnchor" number="3.10.1">
<h3><span class="header-section-number">3.10.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>现代生态学研究产生的数据日益复杂，传统的基础R语法在处理复杂数据操作时略显繁琐。tidyverse是R语言的现代数据处理工具包，提供了更直观、更高效的数据处理方法，特别适合处理多变量、多时间点的生态学数据。</p>
</div>
<div id="演示数据-7" class="section level3 hasAnchor" number="3.10.2">
<h3><span class="header-section-number">3.10.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="附录1-r语言编程基础.html#cb199-1" tabindex="-1"></a><span class="co"># 模拟某森林样地多年监测数据</span></span>
<span id="cb199-2"><a href="附录1-r语言编程基础.html#cb199-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb199-3"><a href="附录1-r语言编程基础.html#cb199-3" tabindex="-1"></a></span>
<span id="cb199-4"><a href="附录1-r语言编程基础.html#cb199-4" tabindex="-1"></a><span class="co"># 创建模拟数据</span></span>
<span id="cb199-5"><a href="附录1-r语言编程基础.html#cb199-5" tabindex="-1"></a>forest_monitoring <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb199-6"><a href="附录1-r语言编程基础.html#cb199-6" tabindex="-1"></a>  <span class="at">plot_id =</span> <span class="fu">rep</span>(<span class="fu">paste0</span>(<span class="st">&quot;Plot_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="at">each =</span> <span class="dv">12</span>),</span>
<span id="cb199-7"><a href="附录1-r语言编程基础.html#cb199-7" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">2018</span><span class="sc">:</span><span class="dv">2021</span>, <span class="at">times =</span> <span class="dv">15</span>),</span>
<span id="cb199-8"><a href="附录1-r语言编程基础.html#cb199-8" tabindex="-1"></a>  <span class="at">season =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;春&quot;</span>, <span class="st">&quot;夏&quot;</span>, <span class="st">&quot;秋&quot;</span>), <span class="at">times =</span> <span class="dv">20</span>),</span>
<span id="cb199-9"><a href="附录1-r语言编程基础.html#cb199-9" tabindex="-1"></a>  <span class="at">temperature =</span> <span class="fu">rnorm</span>(<span class="dv">60</span>, <span class="at">mean =</span> <span class="dv">15</span>, <span class="at">sd =</span> <span class="dv">5</span>),</span>
<span id="cb199-10"><a href="附录1-r语言编程基础.html#cb199-10" tabindex="-1"></a>  <span class="at">humidity =</span> <span class="fu">rnorm</span>(<span class="dv">60</span>, <span class="at">mean =</span> <span class="dv">70</span>, <span class="at">sd =</span> <span class="dv">10</span>),</span>
<span id="cb199-11"><a href="附录1-r语言编程基础.html#cb199-11" tabindex="-1"></a>  <span class="at">species_richness =</span> <span class="fu">rpois</span>(<span class="dv">60</span>, <span class="at">lambda =</span> <span class="dv">25</span>),</span>
<span id="cb199-12"><a href="附录1-r语言编程基础.html#cb199-12" tabindex="-1"></a>  <span class="at">tree_height =</span> <span class="fu">rnorm</span>(<span class="dv">60</span>, <span class="at">mean =</span> <span class="dv">12</span>, <span class="at">sd =</span> <span class="dv">3</span>),</span>
<span id="cb199-13"><a href="附录1-r语言编程基础.html#cb199-13" tabindex="-1"></a>  <span class="at">soil_ph =</span> <span class="fu">rnorm</span>(<span class="dv">60</span>, <span class="at">mean =</span> <span class="fl">6.5</span>, <span class="at">sd =</span> <span class="fl">0.5</span>)</span>
<span id="cb199-14"><a href="附录1-r语言编程基础.html#cb199-14" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="课堂演示过程-8" class="section level3 hasAnchor" number="3.10.3">
<h3><span class="header-section-number">3.10.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="tidyverse包的加载和数据查看" class="section level4 hasAnchor" number="3.10.3.1">
<h4><span class="header-section-number">3.10.3.1</span> tidyverse包的加载和数据查看<a href="附录1-r语言编程基础.html#tidyverse包的加载和数据查看" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="附录1-r语言编程基础.html#cb200-1" tabindex="-1"></a><span class="co"># 安装和加载tidyverse</span></span>
<span id="cb200-2"><a href="附录1-r语言编程基础.html#cb200-2" tabindex="-1"></a><span class="co"># install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb200-3"><a href="附录1-r语言编程基础.html#cb200-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb200-4"><a href="附录1-r语言编程基础.html#cb200-4" tabindex="-1"></a></span>
<span id="cb200-5"><a href="附录1-r语言编程基础.html#cb200-5" tabindex="-1"></a><span class="co"># 创建示例数据（简化版）</span></span>
<span id="cb200-6"><a href="附录1-r语言编程基础.html#cb200-6" tabindex="-1"></a>forest_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb200-7"><a href="附录1-r语言编程基础.html#cb200-7" tabindex="-1"></a>  <span class="at">plot_id =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>), <span class="at">each =</span> <span class="dv">6</span>),</span>
<span id="cb200-8"><a href="附录1-r语言编程基础.html#cb200-8" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>, <span class="at">times =</span> <span class="dv">8</span>),</span>
<span id="cb200-9"><a href="附录1-r语言编程基础.html#cb200-9" tabindex="-1"></a>  <span class="at">season =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;春&quot;</span>, <span class="st">&quot;夏&quot;</span>), <span class="at">times =</span> <span class="dv">12</span>),</span>
<span id="cb200-10"><a href="附录1-r语言编程基础.html#cb200-10" tabindex="-1"></a>  <span class="at">temperature =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">22</span>, <span class="dv">10</span>, <span class="dv">16</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">13</span>, <span class="dv">19</span>, <span class="dv">11</span>, <span class="dv">17</span>, </span>
<span id="cb200-11"><a href="附录1-r语言编程基础.html#cb200-11" tabindex="-1"></a>                  <span class="dv">16</span>, <span class="dv">21</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">23</span>, <span class="dv">13</span>, <span class="dv">21</span>, <span class="dv">11</span>, <span class="dv">19</span>),</span>
<span id="cb200-12"><a href="附录1-r语言编程基础.html#cb200-12" tabindex="-1"></a>  <span class="at">species_count =</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">28</span>, <span class="dv">25</span>, <span class="dv">32</span>, <span class="dv">20</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">30</span>, <span class="dv">24</span>, <span class="dv">28</span>, <span class="dv">21</span>, <span class="dv">25</span>,</span>
<span id="cb200-13"><a href="附录1-r语言编程基础.html#cb200-13" tabindex="-1"></a>                   <span class="dv">28</span>, <span class="dv">34</span>, <span class="dv">26</span>, <span class="dv">32</span>, <span class="dv">23</span>, <span class="dv">27</span>, <span class="dv">30</span>, <span class="dv">36</span>, <span class="dv">27</span>, <span class="dv">31</span>, <span class="dv">24</span>, <span class="dv">28</span>)</span>
<span id="cb200-14"><a href="附录1-r语言编程基础.html#cb200-14" tabindex="-1"></a>)</span>
<span id="cb200-15"><a href="附录1-r语言编程基础.html#cb200-15" tabindex="-1"></a></span>
<span id="cb200-16"><a href="附录1-r语言编程基础.html#cb200-16" tabindex="-1"></a><span class="co"># 查看数据结构</span></span>
<span id="cb200-17"><a href="附录1-r语言编程基础.html#cb200-17" tabindex="-1"></a><span class="fu">glimpse</span>(forest_data)</span>
<span id="cb200-18"><a href="附录1-r语言编程基础.html#cb200-18" tabindex="-1"></a><span class="fu">head</span>(forest_data)</span></code></pre></div>
</div>
<div id="数据筛选与选择" class="section level4 hasAnchor" number="3.10.3.2">
<h4><span class="header-section-number">3.10.3.2</span> 数据筛选与选择<a href="附录1-r语言编程基础.html#数据筛选与选择" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="附录1-r语言编程基础.html#cb201-1" tabindex="-1"></a><span class="co"># 使用filter()筛选行</span></span>
<span id="cb201-2"><a href="附录1-r语言编程基础.html#cb201-2" tabindex="-1"></a>summer_data <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb201-3"><a href="附录1-r语言编程基础.html#cb201-3" tabindex="-1"></a>  <span class="fu">filter</span>(season <span class="sc">==</span> <span class="st">&quot;夏&quot;</span>)</span>
<span id="cb201-4"><a href="附录1-r语言编程基础.html#cb201-4" tabindex="-1"></a></span>
<span id="cb201-5"><a href="附录1-r语言编程基础.html#cb201-5" tabindex="-1"></a>high_diversity <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb201-6"><a href="附录1-r语言编程基础.html#cb201-6" tabindex="-1"></a>  <span class="fu">filter</span>(species_count <span class="sc">&gt;</span> <span class="dv">30</span>)</span>
<span id="cb201-7"><a href="附录1-r语言编程基础.html#cb201-7" tabindex="-1"></a></span>
<span id="cb201-8"><a href="附录1-r语言编程基础.html#cb201-8" tabindex="-1"></a>recent_summer <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb201-9"><a href="附录1-r语言编程基础.html#cb201-9" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2021</span> <span class="sc">&amp;</span> season <span class="sc">==</span> <span class="st">&quot;夏&quot;</span>)</span>
<span id="cb201-10"><a href="附录1-r语言编程基础.html#cb201-10" tabindex="-1"></a></span>
<span id="cb201-11"><a href="附录1-r语言编程基础.html#cb201-11" tabindex="-1"></a><span class="co"># 使用select()选择列</span></span>
<span id="cb201-12"><a href="附录1-r语言编程基础.html#cb201-12" tabindex="-1"></a>temp_species <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb201-13"><a href="附录1-r语言编程基础.html#cb201-13" tabindex="-1"></a>  <span class="fu">select</span>(plot_id, temperature, species_count)</span>
<span id="cb201-14"><a href="附录1-r语言编程基础.html#cb201-14" tabindex="-1"></a></span>
<span id="cb201-15"><a href="附录1-r语言编程基础.html#cb201-15" tabindex="-1"></a><span class="co"># 选择特定范围的列</span></span>
<span id="cb201-16"><a href="附录1-r语言编程基础.html#cb201-16" tabindex="-1"></a>core_variables <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb201-17"><a href="附录1-r语言编程基础.html#cb201-17" tabindex="-1"></a>  <span class="fu">select</span>(plot_id<span class="sc">:</span>season, species_count)</span>
<span id="cb201-18"><a href="附录1-r语言编程基础.html#cb201-18" tabindex="-1"></a></span>
<span id="cb201-19"><a href="附录1-r语言编程基础.html#cb201-19" tabindex="-1"></a><span class="co"># 排除特定列</span></span>
<span id="cb201-20"><a href="附录1-r语言编程基础.html#cb201-20" tabindex="-1"></a>without_year <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb201-21"><a href="附录1-r语言编程基础.html#cb201-21" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>year)</span></code></pre></div>
</div>
<div id="数据变换与新变量创建" class="section level4 hasAnchor" number="3.10.3.3">
<h4><span class="header-section-number">3.10.3.3</span> 数据变换与新变量创建<a href="附录1-r语言编程基础.html#数据变换与新变量创建" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="附录1-r语言编程基础.html#cb202-1" tabindex="-1"></a><span class="co"># 使用mutate()创建新变量</span></span>
<span id="cb202-2"><a href="附录1-r语言编程基础.html#cb202-2" tabindex="-1"></a>forest_enhanced <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb202-3"><a href="附录1-r语言编程基础.html#cb202-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb202-4"><a href="附录1-r语言编程基础.html#cb202-4" tabindex="-1"></a>    <span class="at">temp_category =</span> <span class="fu">case_when</span>(</span>
<span id="cb202-5"><a href="附录1-r语言编程基础.html#cb202-5" tabindex="-1"></a>      temperature <span class="sc">&lt;</span> <span class="dv">15</span> <span class="sc">~</span> <span class="st">&quot;低温&quot;</span>,</span>
<span id="cb202-6"><a href="附录1-r语言编程基础.html#cb202-6" tabindex="-1"></a>      temperature <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">&quot;中温&quot;</span>,</span>
<span id="cb202-7"><a href="附录1-r语言编程基础.html#cb202-7" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;高温&quot;</span></span>
<span id="cb202-8"><a href="附录1-r语言编程基础.html#cb202-8" tabindex="-1"></a>    ),</span>
<span id="cb202-9"><a href="附录1-r语言编程基础.html#cb202-9" tabindex="-1"></a>    <span class="at">diversity_index =</span> species_count <span class="sc">/</span> <span class="dv">10</span>,  <span class="co"># 简化的多样性指数</span></span>
<span id="cb202-10"><a href="附录1-r语言编程基础.html#cb202-10" tabindex="-1"></a>    <span class="at">temp_celsius =</span> temperature,</span>
<span id="cb202-11"><a href="附录1-r语言编程基础.html#cb202-11" tabindex="-1"></a>    <span class="at">temp_fahrenheit =</span> temperature <span class="sc">*</span> <span class="dv">9</span><span class="sc">/</span><span class="dv">5</span> <span class="sc">+</span> <span class="dv">32</span></span>
<span id="cb202-12"><a href="附录1-r语言编程基础.html#cb202-12" tabindex="-1"></a>  )</span>
<span id="cb202-13"><a href="附录1-r语言编程基础.html#cb202-13" tabindex="-1"></a></span>
<span id="cb202-14"><a href="附录1-r语言编程基础.html#cb202-14" tabindex="-1"></a><span class="co"># 查看结果</span></span>
<span id="cb202-15"><a href="附录1-r语言编程基础.html#cb202-15" tabindex="-1"></a>forest_enhanced <span class="sc">%&gt;%</span></span>
<span id="cb202-16"><a href="附录1-r语言编程基础.html#cb202-16" tabindex="-1"></a>  <span class="fu">select</span>(plot_id, temperature, temp_category, species_count, diversity_index)</span></code></pre></div>
</div>
<div id="数据排序与分组汇总" class="section level4 hasAnchor" number="3.10.3.4">
<h4><span class="header-section-number">3.10.3.4</span> 数据排序与分组汇总<a href="附录1-r语言编程基础.html#数据排序与分组汇总" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="附录1-r语言编程基础.html#cb203-1" tabindex="-1"></a><span class="co"># 使用arrange()排序</span></span>
<span id="cb203-2"><a href="附录1-r语言编程基础.html#cb203-2" tabindex="-1"></a>forest_data <span class="sc">%&gt;%</span></span>
<span id="cb203-3"><a href="附录1-r语言编程基础.html#cb203-3" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(species_count)) <span class="sc">%&gt;%</span></span>
<span id="cb203-4"><a href="附录1-r语言编程基础.html#cb203-4" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb203-5"><a href="附录1-r语言编程基础.html#cb203-5" tabindex="-1"></a></span>
<span id="cb203-6"><a href="附录1-r语言编程基础.html#cb203-6" tabindex="-1"></a>forest_data <span class="sc">%&gt;%</span></span>
<span id="cb203-7"><a href="附录1-r语言编程基础.html#cb203-7" tabindex="-1"></a>  <span class="fu">arrange</span>(plot_id, year, season)</span>
<span id="cb203-8"><a href="附录1-r语言编程基础.html#cb203-8" tabindex="-1"></a></span>
<span id="cb203-9"><a href="附录1-r语言编程基础.html#cb203-9" tabindex="-1"></a><span class="co"># 使用group_by()和summarise()进行分组统计</span></span>
<span id="cb203-10"><a href="附录1-r语言编程基础.html#cb203-10" tabindex="-1"></a>plot_summary <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb203-11"><a href="附录1-r语言编程基础.html#cb203-11" tabindex="-1"></a>  <span class="fu">group_by</span>(plot_id) <span class="sc">%&gt;%</span></span>
<span id="cb203-12"><a href="附录1-r语言编程基础.html#cb203-12" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb203-13"><a href="附录1-r语言编程基础.html#cb203-13" tabindex="-1"></a>    <span class="at">n_observations =</span> <span class="fu">n</span>(),</span>
<span id="cb203-14"><a href="附录1-r语言编程基础.html#cb203-14" tabindex="-1"></a>    <span class="at">mean_temperature =</span> <span class="fu">mean</span>(temperature),</span>
<span id="cb203-15"><a href="附录1-r语言编程基础.html#cb203-15" tabindex="-1"></a>    <span class="at">mean_species =</span> <span class="fu">mean</span>(species_count),</span>
<span id="cb203-16"><a href="附录1-r语言编程基础.html#cb203-16" tabindex="-1"></a>    <span class="at">max_species =</span> <span class="fu">max</span>(species_count),</span>
<span id="cb203-17"><a href="附录1-r语言编程基础.html#cb203-17" tabindex="-1"></a>    <span class="at">sd_temperature =</span> <span class="fu">sd</span>(temperature),</span>
<span id="cb203-18"><a href="附录1-r语言编程基础.html#cb203-18" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span></span>
<span id="cb203-19"><a href="附录1-r语言编程基础.html#cb203-19" tabindex="-1"></a>  )</span>
<span id="cb203-20"><a href="附录1-r语言编程基础.html#cb203-20" tabindex="-1"></a></span>
<span id="cb203-21"><a href="附录1-r语言编程基础.html#cb203-21" tabindex="-1"></a><span class="fu">print</span>(plot_summary)</span>
<span id="cb203-22"><a href="附录1-r语言编程基础.html#cb203-22" tabindex="-1"></a></span>
<span id="cb203-23"><a href="附录1-r语言编程基础.html#cb203-23" tabindex="-1"></a><span class="co"># 多变量分组</span></span>
<span id="cb203-24"><a href="附录1-r语言编程基础.html#cb203-24" tabindex="-1"></a>season_plot_summary <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb203-25"><a href="附录1-r语言编程基础.html#cb203-25" tabindex="-1"></a>  <span class="fu">group_by</span>(season, plot_id) <span class="sc">%&gt;%</span></span>
<span id="cb203-26"><a href="附录1-r语言编程基础.html#cb203-26" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb203-27"><a href="附录1-r语言编程基础.html#cb203-27" tabindex="-1"></a>    <span class="at">mean_temp =</span> <span class="fu">mean</span>(temperature),</span>
<span id="cb203-28"><a href="附录1-r语言编程基础.html#cb203-28" tabindex="-1"></a>    <span class="at">mean_species =</span> <span class="fu">mean</span>(species_count),</span>
<span id="cb203-29"><a href="附录1-r语言编程基础.html#cb203-29" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span></span>
<span id="cb203-30"><a href="附录1-r语言编程基础.html#cb203-30" tabindex="-1"></a>  )</span>
<span id="cb203-31"><a href="附录1-r语言编程基础.html#cb203-31" tabindex="-1"></a></span>
<span id="cb203-32"><a href="附录1-r语言编程基础.html#cb203-32" tabindex="-1"></a><span class="fu">print</span>(season_plot_summary)</span></code></pre></div>
</div>
<div id="数据重塑长宽格式转换" class="section level4 hasAnchor" number="3.10.3.5">
<h4><span class="header-section-number">3.10.3.5</span> 数据重塑：长宽格式转换<a href="附录1-r语言编程基础.html#数据重塑长宽格式转换" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="附录1-r语言编程基础.html#cb204-1" tabindex="-1"></a><span class="co"># 宽格式转长格式（gather/pivot_longer）</span></span>
<span id="cb204-2"><a href="附录1-r语言编程基础.html#cb204-2" tabindex="-1"></a>forest_long <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb204-3"><a href="附录1-r语言编程基础.html#cb204-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb204-4"><a href="附录1-r语言编程基础.html#cb204-4" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(temperature, species_count),</span>
<span id="cb204-5"><a href="附录1-r语言编程基础.html#cb204-5" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>,</span>
<span id="cb204-6"><a href="附录1-r语言编程基础.html#cb204-6" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span></span>
<span id="cb204-7"><a href="附录1-r语言编程基础.html#cb204-7" tabindex="-1"></a>  )</span>
<span id="cb204-8"><a href="附录1-r语言编程基础.html#cb204-8" tabindex="-1"></a></span>
<span id="cb204-9"><a href="附录1-r语言编程基础.html#cb204-9" tabindex="-1"></a><span class="fu">head</span>(forest_long)</span>
<span id="cb204-10"><a href="附录1-r语言编程基础.html#cb204-10" tabindex="-1"></a></span>
<span id="cb204-11"><a href="附录1-r语言编程基础.html#cb204-11" tabindex="-1"></a><span class="co"># 长格式转宽格式（spread/pivot_wider）</span></span>
<span id="cb204-12"><a href="附录1-r语言编程基础.html#cb204-12" tabindex="-1"></a>forest_wide <span class="ot">&lt;-</span> forest_long <span class="sc">%&gt;%</span></span>
<span id="cb204-13"><a href="附录1-r语言编程基础.html#cb204-13" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb204-14"><a href="附录1-r语言编程基础.html#cb204-14" tabindex="-1"></a>    <span class="at">names_from =</span> variable,</span>
<span id="cb204-15"><a href="附录1-r语言编程基础.html#cb204-15" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb204-16"><a href="附录1-r语言编程基础.html#cb204-16" tabindex="-1"></a>  )</span>
<span id="cb204-17"><a href="附录1-r语言编程基础.html#cb204-17" tabindex="-1"></a></span>
<span id="cb204-18"><a href="附录1-r语言编程基础.html#cb204-18" tabindex="-1"></a><span class="fu">head</span>(forest_wide)</span></code></pre></div>
</div>
<div id="数据连接" class="section level4 hasAnchor" number="3.10.3.6">
<h4><span class="header-section-number">3.10.3.6</span> 数据连接<a href="附录1-r语言编程基础.html#数据连接" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="附录1-r语言编程基础.html#cb205-1" tabindex="-1"></a><span class="co"># 创建额外的样地信息</span></span>
<span id="cb205-2"><a href="附录1-r语言编程基础.html#cb205-2" tabindex="-1"></a>plot_info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb205-3"><a href="附录1-r语言编程基础.html#cb205-3" tabindex="-1"></a>  <span class="at">plot_id =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>),</span>
<span id="cb205-4"><a href="附录1-r语言编程基础.html#cb205-4" tabindex="-1"></a>  <span class="at">elevation =</span> <span class="fu">c</span>(<span class="dv">1200</span>, <span class="dv">1450</span>, <span class="dv">1800</span>, <span class="dv">1600</span>),</span>
<span id="cb205-5"><a href="附录1-r语言编程基础.html#cb205-5" tabindex="-1"></a>  <span class="at">soil_type =</span> <span class="fu">c</span>(<span class="st">&quot;壤土&quot;</span>, <span class="st">&quot;砂土&quot;</span>, <span class="st">&quot;黏土&quot;</span>, <span class="st">&quot;壤土&quot;</span>),</span>
<span id="cb205-6"><a href="附录1-r语言编程基础.html#cb205-6" tabindex="-1"></a>  <span class="at">management =</span> <span class="fu">c</span>(<span class="st">&quot;保护&quot;</span>, <span class="st">&quot;管理&quot;</span>, <span class="st">&quot;保护&quot;</span>, <span class="st">&quot;管理&quot;</span>)</span>
<span id="cb205-7"><a href="附录1-r语言编程基础.html#cb205-7" tabindex="-1"></a>)</span>
<span id="cb205-8"><a href="附录1-r语言编程基础.html#cb205-8" tabindex="-1"></a></span>
<span id="cb205-9"><a href="附录1-r语言编程基础.html#cb205-9" tabindex="-1"></a><span class="co"># 左连接</span></span>
<span id="cb205-10"><a href="附录1-r语言编程基础.html#cb205-10" tabindex="-1"></a>forest_complete <span class="ot">&lt;-</span> forest_data <span class="sc">%&gt;%</span></span>
<span id="cb205-11"><a href="附录1-r语言编程基础.html#cb205-11" tabindex="-1"></a>  <span class="fu">left_join</span>(plot_info, <span class="at">by =</span> <span class="st">&quot;plot_id&quot;</span>)</span>
<span id="cb205-12"><a href="附录1-r语言编程基础.html#cb205-12" tabindex="-1"></a></span>
<span id="cb205-13"><a href="附录1-r语言编程基础.html#cb205-13" tabindex="-1"></a><span class="fu">head</span>(forest_complete)</span>
<span id="cb205-14"><a href="附录1-r语言编程基础.html#cb205-14" tabindex="-1"></a></span>
<span id="cb205-15"><a href="附录1-r语言编程基础.html#cb205-15" tabindex="-1"></a><span class="co"># 按管理类型分析</span></span>
<span id="cb205-16"><a href="附录1-r语言编程基础.html#cb205-16" tabindex="-1"></a>management_analysis <span class="ot">&lt;-</span> forest_complete <span class="sc">%&gt;%</span></span>
<span id="cb205-17"><a href="附录1-r语言编程基础.html#cb205-17" tabindex="-1"></a>  <span class="fu">group_by</span>(management) <span class="sc">%&gt;%</span></span>
<span id="cb205-18"><a href="附录1-r语言编程基础.html#cb205-18" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb205-19"><a href="附录1-r语言编程基础.html#cb205-19" tabindex="-1"></a>    <span class="at">mean_temperature =</span> <span class="fu">mean</span>(temperature),</span>
<span id="cb205-20"><a href="附录1-r语言编程基础.html#cb205-20" tabindex="-1"></a>    <span class="at">mean_species =</span> <span class="fu">mean</span>(species_count),</span>
<span id="cb205-21"><a href="附录1-r语言编程基础.html#cb205-21" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span></span>
<span id="cb205-22"><a href="附录1-r语言编程基础.html#cb205-22" tabindex="-1"></a>  )</span>
<span id="cb205-23"><a href="附录1-r语言编程基础.html#cb205-23" tabindex="-1"></a></span>
<span id="cb205-24"><a href="附录1-r语言编程基础.html#cb205-24" tabindex="-1"></a><span class="fu">print</span>(management_analysis)</span></code></pre></div>
</div>
</div>
<div id="r语言知识点详解-8" class="section level3 hasAnchor" number="3.10.4">
<h3><span class="header-section-number">3.10.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="tidyverse哲学与管道操作" class="section level4 hasAnchor" number="3.10.4.1">
<h4><span class="header-section-number">3.10.4.1</span> tidyverse哲学与管道操作<a href="附录1-r语言编程基础.html#tidyverse哲学与管道操作" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="管道操作符" class="section level5 hasAnchor" number="3.10.4.1.1">
<h5><span class="header-section-number">3.10.4.1.1</span> 管道操作符 <code>%&gt;%</code><a href="附录1-r语言编程基础.html#管道操作符" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>作用</strong>：将左侧结果作为右侧函数的第一个参数</li>
<li><strong>优势</strong>：
<ul>
<li>代码更易读：从左到右，从上到下</li>
<li>减少中间变量：避免创建临时对象</li>
<li>链式操作：多个操作连续进行</li>
</ul></li>
<li><strong>语法</strong>：<code>data %&gt;% function()</code></li>
<li><strong>等价写法</strong>：<code>function(data)</code></li>
</ul>
</div>
<div id="tibble-vs-data.frame" class="section level5 hasAnchor" number="3.10.4.1.2">
<h5><span class="header-section-number">3.10.4.1.2</span> tibble vs data.frame<a href="附录1-r语言编程基础.html#tibble-vs-data.frame" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>tibble特点</strong>：
<ul>
<li>更好的打印输出</li>
<li>更严格的子集操作</li>
<li>保持字符串为字符串（不自动转因子）</li>
<li>支持列名包含空格和特殊字符</li>
</ul></li>
</ul>
</div>
</div>
<div id="数据筛选与选择-1" class="section level4 hasAnchor" number="3.10.4.2">
<h4><span class="header-section-number">3.10.4.2</span> 数据筛选与选择<a href="附录1-r语言编程基础.html#数据筛选与选择-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="filter---行筛选" class="section level5 hasAnchor" number="3.10.4.2.1">
<h5><span class="header-section-number">3.10.4.2.1</span> <code>filter()</code> - 行筛选<a href="附录1-r语言编程基础.html#filter---行筛选" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>filter(data, condition1, condition2, ...)</code></li>
<li><strong>多条件</strong>：
<ul>
<li>逗号分隔：逻辑与（AND）</li>
<li><code>|</code>：逻辑或（OR）</li>
<li><code>!</code>：逻辑非（NOT）</li>
</ul></li>
<li><strong>常用条件</strong>：
<ul>
<li><code>==</code>、<code>!=</code>：等于、不等于</li>
<li><code>&gt;、&lt;、&gt;=、&lt;=</code>：大小比较</li>
<li><code>%in%</code>：成员检查</li>
<li><code>is.na()</code>：缺失值检查</li>
</ul></li>
</ul>
</div>
<div id="select---列选择" class="section level5 hasAnchor" number="3.10.4.2.2">
<h5><span class="header-section-number">3.10.4.2.2</span> <code>select()</code> - 列选择<a href="附录1-r语言编程基础.html#select---列选择" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>基本选择</strong>：<code>select(data, col1, col2)</code></li>
<li><strong>范围选择</strong>：<code>select(data, col1:col3)</code></li>
<li><strong>排除选择</strong>：<code>select(data, -col1, -col2)</code></li>
<li><strong>辅助函数</strong>：
<ul>
<li><code>starts_with()</code>：以某字符开头</li>
<li><code>ends_with()</code>：以某字符结尾</li>
<li><code>contains()</code>：包含某字符</li>
<li><code>matches()</code>：正则表达式匹配</li>
</ul></li>
</ul>
</div>
</div>
<div id="数据变换" class="section level4 hasAnchor" number="3.10.4.3">
<h4><span class="header-section-number">3.10.4.3</span> 数据变换<a href="附录1-r语言编程基础.html#数据变换" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="mutate---新变量创建" class="section level5 hasAnchor" number="3.10.4.3.1">
<h5><span class="header-section-number">3.10.4.3.1</span> <code>mutate()</code> - 新变量创建<a href="附录1-r语言编程基础.html#mutate---新变量创建" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>基本用法</strong>：<code>mutate(data, new_col = expression)</code></li>
<li><strong>多变量</strong>：可同时创建多个新变量</li>
<li><strong>引用新建变量</strong>：在同一个<code>mutate()</code>中可引用前面创建的变量</li>
<li><strong>变量类型转换</strong>：
<ul>
<li><code>as.numeric()</code>：转数值</li>
<li><code>as.character()</code>：转字符</li>
<li><code>as.factor()</code>：转因子</li>
</ul></li>
</ul>
</div>
<div id="case_when---多条件分类" class="section level5 hasAnchor" number="3.10.4.3.2">
<h5><span class="header-section-number">3.10.4.3.2</span> <code>case_when()</code> - 多条件分类<a href="附录1-r语言编程基础.html#case_when---多条件分类" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><p><strong>语法</strong>：</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="附录1-r语言编程基础.html#cb206-1" tabindex="-1"></a><span class="fu">case_when</span>(</span>
<span id="cb206-2"><a href="附录1-r语言编程基础.html#cb206-2" tabindex="-1"></a>  condition1 <span class="sc">~</span> value1,</span>
<span id="cb206-3"><a href="附录1-r语言编程基础.html#cb206-3" tabindex="-1"></a>  condition2 <span class="sc">~</span> value2,</span>
<span id="cb206-4"><a href="附录1-r语言编程基础.html#cb206-4" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> default_value</span>
<span id="cb206-5"><a href="附录1-r语言编程基础.html#cb206-5" tabindex="-1"></a>)</span></code></pre></div></li>
<li><p><strong>优势</strong>：替代复杂的嵌套<code>ifelse()</code></p></li>
<li><p><strong>注意</strong>：条件从上到下评估，满足即停止</p></li>
</ul>
</div>
</div>
<div id="数据排序与汇总" class="section level4 hasAnchor" number="3.10.4.4">
<h4><span class="header-section-number">3.10.4.4</span> 数据排序与汇总<a href="附录1-r语言编程基础.html#数据排序与汇总" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="arrange---数据排序" class="section level5 hasAnchor" number="3.10.4.4.1">
<h5><span class="header-section-number">3.10.4.4.1</span> <code>arrange()</code> - 数据排序<a href="附录1-r语言编程基础.html#arrange---数据排序" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>基本排序</strong>：<code>arrange(data, col)</code></li>
<li><strong>降序排序</strong>：<code>arrange(data, desc(col))</code></li>
<li><strong>多列排序</strong>：<code>arrange(data, col1, col2)</code></li>
</ul>
</div>
<div id="group_by-与-summarise" class="section level5 hasAnchor" number="3.10.4.4.2">
<h5><span class="header-section-number">3.10.4.4.2</span> <code>group_by()</code> 与 <code>summarise()</code><a href="附录1-r语言编程基础.html#group_by-与-summarise" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>分组概念</strong>：将数据按指定变量分组</li>
<li><strong>汇总函数</strong>：
<ul>
<li><code>n()</code>：计数</li>
<li><code>mean()</code>、<code>median()</code>：均值、中位数</li>
<li><code>sum()</code>、<code>min()</code>、<code>max()</code>：求和、最小值、最大值</li>
<li><code>sd()</code>、<code>var()</code>：标准差、方差</li>
</ul></li>
<li><strong><code>.groups</code> 参数</strong>：控制结果的分组状态</li>
</ul>
</div>
</div>
<div id="数据重塑" class="section level4 hasAnchor" number="3.10.4.5">
<h4><span class="header-section-number">3.10.4.5</span> 数据重塑<a href="附录1-r语言编程基础.html#数据重塑" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="长宽格式概念" class="section level5 hasAnchor" number="3.10.4.5.1">
<h5><span class="header-section-number">3.10.4.5.1</span> 长宽格式概念<a href="附录1-r语言编程基础.html#长宽格式概念" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>宽格式</strong>：每个变量一列，观察单位一行</li>
<li><strong>长格式</strong>：变量名和变量值分别存储在不同列中</li>
<li><strong>选择原则</strong>：
<ul>
<li>分析时通常用长格式</li>
<li>展示时通常用宽格式</li>
</ul></li>
</ul>
</div>
<div id="pivot_longer---宽转长" class="section level5 hasAnchor" number="3.10.4.5.2">
<h5><span class="header-section-number">3.10.4.5.2</span> <code>pivot_longer()</code> - 宽转长<a href="附录1-r语言编程基础.html#pivot_longer---宽转长" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>pivot_longer(data, cols, names_to, values_to)</code></li>
<li><strong>参数</strong>：
<ul>
<li><code>cols</code>：要转换的列</li>
<li><code>names_to</code>：存储变量名的新列名</li>
<li><code>values_to</code>：存储变量值的新列名</li>
</ul></li>
</ul>
</div>
<div id="pivot_wider---长转宽" class="section level5 hasAnchor" number="3.10.4.5.3">
<h5><span class="header-section-number">3.10.4.5.3</span> <code>pivot_wider()</code> - 长转宽<a href="附录1-r语言编程基础.html#pivot_wider---长转宽" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>pivot_wider(data, names_from, values_from)</code></li>
<li><strong>参数</strong>：
<ul>
<li><code>names_from</code>：提供新列名的列</li>
<li><code>values_from</code>：提供新列值的列</li>
</ul></li>
</ul>
</div>
</div>
<div id="数据连接-1" class="section level4 hasAnchor" number="3.10.4.6">
<h4><span class="header-section-number">3.10.4.6</span> 数据连接<a href="附录1-r语言编程基础.html#数据连接-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="连接类型" class="section level5 hasAnchor" number="3.10.4.6.1">
<h5><span class="header-section-number">3.10.4.6.1</span> 连接类型<a href="附录1-r语言编程基础.html#连接类型" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>left_join()</code></strong>：保留左表所有行</li>
<li><strong><code>right_join()</code></strong>：保留右表所有行</li>
<li><strong><code>inner_join()</code></strong>：仅保留匹配行</li>
<li><strong><code>full_join()</code></strong>：保留所有行</li>
</ul>
</div>
<div id="连接语法" class="section level5 hasAnchor" number="3.10.4.6.2">
<h5><span class="header-section-number">3.10.4.6.2</span> 连接语法<a href="附录1-r语言编程基础.html#连接语法" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>基本语法</strong>：<code>left_join(x, y, by = "key")</code></li>
<li><strong>多键连接</strong>：<code>by = c("key1", "key2")</code></li>
<li><strong>不同列名</strong>：<code>by = c("x_key" = "y_key")</code></li>
</ul>
</div>
</div>
</div>
<div id="课后练习-8" class="section level3 hasAnchor" number="3.10.5">
<h3><span class="header-section-number">3.10.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某湿地生物多样性调查数据：</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="附录1-r语言编程基础.html#cb207-1" tabindex="-1"></a>wetland_survey <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb207-2"><a href="附录1-r语言编程基础.html#cb207-2" tabindex="-1"></a>  <span class="at">site_id =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;W1&quot;</span>, <span class="st">&quot;W2&quot;</span>, <span class="st">&quot;W3&quot;</span>), <span class="at">each =</span> <span class="dv">8</span>),</span>
<span id="cb207-3"><a href="附录1-r语言编程基础.html#cb207-3" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;2022-05&quot;</span>, <span class="st">&quot;2022-08&quot;</span>, <span class="st">&quot;2022-05&quot;</span>, <span class="st">&quot;2022-08&quot;</span>), <span class="at">times =</span> <span class="dv">6</span>),</span>
<span id="cb207-4"><a href="附录1-r语言编程基础.html#cb207-4" tabindex="-1"></a>  <span class="at">plant_species =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">6</span>, <span class="dv">10</span>),</span>
<span id="cb207-5"><a href="附录1-r语言编程基础.html#cb207-5" tabindex="-1"></a>  <span class="at">bird_species =</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">5</span>),</span>
<span id="cb207-6"><a href="附录1-r语言编程基础.html#cb207-6" tabindex="-1"></a>  <span class="at">water_level =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">38</span>, <span class="dv">50</span>, <span class="dv">42</span>, <span class="dv">35</span>, <span class="dv">28</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">55</span>, <span class="dv">48</span>, <span class="dv">60</span>, <span class="dv">53</span>)</span>
<span id="cb207-7"><a href="附录1-r语言编程基础.html#cb207-7" tabindex="-1"></a>)</span>
<span id="cb207-8"><a href="附录1-r语言编程基础.html#cb207-8" tabindex="-1"></a></span>
<span id="cb207-9"><a href="附录1-r语言编程基础.html#cb207-9" tabindex="-1"></a>site_characteristics <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb207-10"><a href="附录1-r语言编程基础.html#cb207-10" tabindex="-1"></a>  <span class="at">site_id =</span> <span class="fu">c</span>(<span class="st">&quot;W1&quot;</span>, <span class="st">&quot;W2&quot;</span>, <span class="st">&quot;W3&quot;</span>),</span>
<span id="cb207-11"><a href="附录1-r语言编程基础.html#cb207-11" tabindex="-1"></a>  <span class="at">area_ha =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">15</span>),</span>
<span id="cb207-12"><a href="附录1-r语言编程基础.html#cb207-12" tabindex="-1"></a>  <span class="at">protection_status =</span> <span class="fu">c</span>(<span class="st">&quot;保护区&quot;</span>, <span class="st">&quot;缓冲区&quot;</span>, <span class="st">&quot;实验区&quot;</span>)</span>
<span id="cb207-13"><a href="附录1-r语言编程基础.html#cb207-13" tabindex="-1"></a>)</span></code></pre></div>
<p>请完成（使用tidyverse工具链，结合之前学过的统计和可视化方法）：</p>
<ol style="list-style-type: decimal">
<li><p>筛选出5月份的调查数据，并计算植物和鸟类物种总数（使用filter()和mutate()）</p></li>
<li><p>按站点分组，计算各站点的平均物种数和水位变化范围（使用group_by()和summarise()）</p></li>
<li><p>连接站点特征数据，创建物种密度指标（物种数/面积）（使用left_join()和mutate()）</p></li>
<li><p>将数据从宽格式转换为长格式，便于后续统计分析（使用pivot_longer()）</p></li>
<li><p>根据保护状态和季节，分析不同组合下的生物多样性特征（使用group_by()和统计函数）</p></li>
<li><p>使用ggplot2创建专业的可视化图表展示分析结果</p></li>
<li><p>与第9课的传统方法对比，体会tidyverse的优势</p></li>
</ol>
</div>
</div>
<div id="图形语法与科学绘图" class="section level2 hasAnchor" number="3.11">
<h2><span class="header-section-number">3.11</span> 图形语法与科学绘图<a href="附录1-r语言编程基础.html#图形语法与科学绘图" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="生态学背景-9" class="section level3 hasAnchor" number="3.11.1">
<h3><span class="header-section-number">3.11.1</span> 生态学背景<a href="附录1-r语言编程基础.html#生态学背景-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>数据可视化是生态学研究中传达发现和支持论证的关键工具。与基础R绘图相比，ggplot2采用图形语法，能够创建更加专业、美观的科学图表，满足期刊发表和学术报告的高标准要求。</p>
</div>
<div id="演示数据-8" class="section level3 hasAnchor" number="3.11.2">
<h3><span class="header-section-number">3.11.2</span> 演示数据<a href="附录1-r语言编程基础.html#演示数据-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="附录1-r语言编程基础.html#cb208-1" tabindex="-1"></a><span class="co"># 某保护区多年生物多样性监测数据</span></span>
<span id="cb208-2"><a href="附录1-r语言编程基础.html#cb208-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb208-3"><a href="附录1-r语言编程基础.html#cb208-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb208-4"><a href="附录1-r语言编程基础.html#cb208-4" tabindex="-1"></a></span>
<span id="cb208-5"><a href="附录1-r语言编程基础.html#cb208-5" tabindex="-1"></a>biodiversity_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb208-6"><a href="附录1-r语言编程基础.html#cb208-6" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">2018</span><span class="sc">:</span><span class="dv">2022</span>, <span class="at">each =</span> <span class="dv">12</span>),</span>
<span id="cb208-7"><a href="附录1-r语言编程基础.html#cb208-7" tabindex="-1"></a>  <span class="at">month =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">times =</span> <span class="dv">5</span>),</span>
<span id="cb208-8"><a href="附录1-r语言编程基础.html#cb208-8" tabindex="-1"></a>  <span class="at">temperature =</span> <span class="fu">rnorm</span>(<span class="dv">60</span>, <span class="at">mean =</span> <span class="dv">15</span> <span class="sc">+</span> <span class="dv">5</span><span class="sc">*</span><span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>pi<span class="sc">*</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">times=</span><span class="dv">5</span>)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">/</span><span class="dv">12</span>), <span class="at">sd =</span> <span class="dv">2</span>),</span>
<span id="cb208-9"><a href="附录1-r语言编程基础.html#cb208-9" tabindex="-1"></a>  <span class="at">species_richness =</span> <span class="fu">rpois</span>(<span class="dv">60</span>, <span class="at">lambda =</span> <span class="dv">25</span> <span class="sc">+</span> <span class="dv">10</span><span class="sc">*</span><span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>pi<span class="sc">*</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">times=</span><span class="dv">5</span>)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">/</span><span class="dv">12</span>)),</span>
<span id="cb208-10"><a href="附录1-r语言编程基础.html#cb208-10" tabindex="-1"></a>  <span class="at">habitat =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;森林&quot;</span>, <span class="st">&quot;草地&quot;</span>, <span class="st">&quot;湿地&quot;</span>), <span class="at">length.out =</span> <span class="dv">60</span>),</span>
<span id="cb208-11"><a href="附录1-r语言编程基础.html#cb208-11" tabindex="-1"></a>  <span class="at">elevation =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1200</span>, <span class="dv">1000</span>, <span class="dv">800</span>), <span class="at">length.out =</span> <span class="dv">60</span>)</span>
<span id="cb208-12"><a href="附录1-r语言编程基础.html#cb208-12" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="课堂演示过程-9" class="section level3 hasAnchor" number="3.11.3">
<h3><span class="header-section-number">3.11.3</span> 课堂演示过程<a href="附录1-r语言编程基础.html#课堂演示过程-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="ggplot2基础语法" class="section level4 hasAnchor" number="3.11.3.1">
<h4><span class="header-section-number">3.11.3.1</span> ggplot2基础语法<a href="附录1-r语言编程基础.html#ggplot2基础语法" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="附录1-r语言编程基础.html#cb209-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb209-2"><a href="附录1-r语言编程基础.html#cb209-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb209-3"><a href="附录1-r语言编程基础.html#cb209-3" tabindex="-1"></a></span>
<span id="cb209-4"><a href="附录1-r语言编程基础.html#cb209-4" tabindex="-1"></a><span class="co"># 创建示例数据</span></span>
<span id="cb209-5"><a href="附录1-r语言编程基础.html#cb209-5" tabindex="-1"></a>bird_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb209-6"><a href="附录1-r语言编程基础.html#cb209-6" tabindex="-1"></a>  <span class="at">species =</span> <span class="fu">c</span>(<span class="st">&quot;白头鹎&quot;</span>, <span class="st">&quot;麻雀&quot;</span>, <span class="st">&quot;喜鹊&quot;</span>, <span class="st">&quot;乌鸦&quot;</span>, <span class="st">&quot;燕子&quot;</span>, <span class="st">&quot;画眉&quot;</span>),</span>
<span id="cb209-7"><a href="附录1-r语言编程基础.html#cb209-7" tabindex="-1"></a>  <span class="at">abundance =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">78</span>, <span class="dv">32</span>, <span class="dv">28</span>, <span class="dv">56</span>, <span class="dv">41</span>),</span>
<span id="cb209-8"><a href="附录1-r语言编程基础.html#cb209-8" tabindex="-1"></a>  <span class="at">habitat =</span> <span class="fu">c</span>(<span class="st">&quot;森林&quot;</span>, <span class="st">&quot;城市&quot;</span>, <span class="st">&quot;农田&quot;</span>, <span class="st">&quot;城市&quot;</span>, <span class="st">&quot;农田&quot;</span>, <span class="st">&quot;森林&quot;</span>),</span>
<span id="cb209-9"><a href="附录1-r语言编程基础.html#cb209-9" tabindex="-1"></a>  <span class="at">body_mass =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">15</span>, <span class="dv">180</span>, <span class="dv">350</span>, <span class="dv">18</span>, <span class="dv">35</span>)</span>
<span id="cb209-10"><a href="附录1-r语言编程基础.html#cb209-10" tabindex="-1"></a>)</span>
<span id="cb209-11"><a href="附录1-r语言编程基础.html#cb209-11" tabindex="-1"></a></span>
<span id="cb209-12"><a href="附录1-r语言编程基础.html#cb209-12" tabindex="-1"></a><span class="co"># 基础散点图</span></span>
<span id="cb209-13"><a href="附录1-r语言编程基础.html#cb209-13" tabindex="-1"></a><span class="fu">ggplot</span>(bird_data, <span class="fu">aes</span>(<span class="at">x =</span> body_mass, <span class="at">y =</span> abundance)) <span class="sc">+</span></span>
<span id="cb209-14"><a href="附录1-r语言编程基础.html#cb209-14" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb209-15"><a href="附录1-r语言编程基础.html#cb209-15" tabindex="-1"></a></span>
<span id="cb209-16"><a href="附录1-r语言编程基础.html#cb209-16" tabindex="-1"></a><span class="co"># 添加颜色映射</span></span>
<span id="cb209-17"><a href="附录1-r语言编程基础.html#cb209-17" tabindex="-1"></a><span class="fu">ggplot</span>(bird_data, <span class="fu">aes</span>(<span class="at">x =</span> body_mass, <span class="at">y =</span> abundance, <span class="at">color =</span> habitat)) <span class="sc">+</span></span>
<span id="cb209-18"><a href="附录1-r语言编程基础.html#cb209-18" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb209-19"><a href="附录1-r语言编程基础.html#cb209-19" tabindex="-1"></a></span>
<span id="cb209-20"><a href="附录1-r语言编程基础.html#cb209-20" tabindex="-1"></a><span class="co"># 添加标题和标签</span></span>
<span id="cb209-21"><a href="附录1-r语言编程基础.html#cb209-21" tabindex="-1"></a><span class="fu">ggplot</span>(bird_data, <span class="fu">aes</span>(<span class="at">x =</span> body_mass, <span class="at">y =</span> abundance, <span class="at">color =</span> habitat)) <span class="sc">+</span></span>
<span id="cb209-22"><a href="附录1-r语言编程基础.html#cb209-22" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb209-23"><a href="附录1-r语言编程基础.html#cb209-23" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb209-24"><a href="附录1-r语言编程基础.html#cb209-24" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;鸟类体重与丰度关系&quot;</span>,</span>
<span id="cb209-25"><a href="附录1-r语言编程基础.html#cb209-25" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;不同栖息地类型的比较&quot;</span>,</span>
<span id="cb209-26"><a href="附录1-r语言编程基础.html#cb209-26" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;体重 (g)&quot;</span>,</span>
<span id="cb209-27"><a href="附录1-r语言编程基础.html#cb209-27" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;丰度 (个体数)&quot;</span>,</span>
<span id="cb209-28"><a href="附录1-r语言编程基础.html#cb209-28" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;栖息地类型&quot;</span></span>
<span id="cb209-29"><a href="附录1-r语言编程基础.html#cb209-29" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="不同类型的图表" class="section level4 hasAnchor" number="3.11.3.2">
<h4><span class="header-section-number">3.11.3.2</span> 不同类型的图表<a href="附录1-r语言编程基础.html#不同类型的图表" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="附录1-r语言编程基础.html#cb210-1" tabindex="-1"></a><span class="co"># 创建时间序列数据</span></span>
<span id="cb210-2"><a href="附录1-r语言编程基础.html#cb210-2" tabindex="-1"></a>time_series_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb210-3"><a href="附录1-r语言编程基础.html#cb210-3" tabindex="-1"></a>  <span class="at">month =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="dv">3</span>),</span>
<span id="cb210-4"><a href="附录1-r语言编程基础.html#cb210-4" tabindex="-1"></a>  <span class="at">species_count =</span> <span class="fu">c</span>(</span>
<span id="cb210-5"><a href="附录1-r语言编程基础.html#cb210-5" tabindex="-1"></a>    <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">35</span>, <span class="dv">45</span>, <span class="dv">55</span>, <span class="dv">60</span>, <span class="dv">58</span>, <span class="dv">52</span>, <span class="dv">42</span>, <span class="dv">32</span>, <span class="dv">25</span>, <span class="dv">22</span>,  <span class="co"># 2020年</span></span>
<span id="cb210-6"><a href="附录1-r语言编程基础.html#cb210-6" tabindex="-1"></a>    <span class="dv">22</span>, <span class="dv">28</span>, <span class="dv">38</span>, <span class="dv">48</span>, <span class="dv">58</span>, <span class="dv">65</span>, <span class="dv">62</span>, <span class="dv">55</span>, <span class="dv">45</span>, <span class="dv">35</span>, <span class="dv">28</span>, <span class="dv">25</span>,  <span class="co"># 2021年</span></span>
<span id="cb210-7"><a href="附录1-r语言编程基础.html#cb210-7" tabindex="-1"></a>    <span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">68</span>, <span class="dv">65</span>, <span class="dv">58</span>, <span class="dv">48</span>, <span class="dv">38</span>, <span class="dv">30</span>, <span class="dv">28</span>   <span class="co"># 2022年</span></span>
<span id="cb210-8"><a href="附录1-r语言编程基础.html#cb210-8" tabindex="-1"></a>  ),</span>
<span id="cb210-9"><a href="附录1-r语言编程基础.html#cb210-9" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;2020&quot;</span>, <span class="st">&quot;2021&quot;</span>, <span class="st">&quot;2022&quot;</span>), <span class="at">each =</span> <span class="dv">12</span>)</span>
<span id="cb210-10"><a href="附录1-r语言编程基础.html#cb210-10" tabindex="-1"></a>)</span>
<span id="cb210-11"><a href="附录1-r语言编程基础.html#cb210-11" tabindex="-1"></a></span>
<span id="cb210-12"><a href="附录1-r语言编程基础.html#cb210-12" tabindex="-1"></a><span class="co"># 线图</span></span>
<span id="cb210-13"><a href="附录1-r语言编程基础.html#cb210-13" tabindex="-1"></a><span class="fu">ggplot</span>(time_series_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> species_count, <span class="at">color =</span> year)) <span class="sc">+</span></span>
<span id="cb210-14"><a href="附录1-r语言编程基础.html#cb210-14" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb210-15"><a href="附录1-r语言编程基础.html#cb210-15" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb210-16"><a href="附录1-r语言编程基础.html#cb210-16" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">labels =</span> month.abb) <span class="sc">+</span></span>
<span id="cb210-17"><a href="附录1-r语言编程基础.html#cb210-17" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb210-18"><a href="附录1-r语言编程基础.html#cb210-18" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;月度物种数量变化&quot;</span>,</span>
<span id="cb210-19"><a href="附录1-r语言编程基础.html#cb210-19" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;月份&quot;</span>,</span>
<span id="cb210-20"><a href="附录1-r语言编程基础.html#cb210-20" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;物种数量&quot;</span>,</span>
<span id="cb210-21"><a href="附录1-r语言编程基础.html#cb210-21" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;年份&quot;</span></span>
<span id="cb210-22"><a href="附录1-r语言编程基础.html#cb210-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb210-23"><a href="附录1-r语言编程基础.html#cb210-23" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb210-24"><a href="附录1-r语言编程基础.html#cb210-24" tabindex="-1"></a></span>
<span id="cb210-25"><a href="附录1-r语言编程基础.html#cb210-25" tabindex="-1"></a><span class="co"># 柱状图</span></span>
<span id="cb210-26"><a href="附录1-r语言编程基础.html#cb210-26" tabindex="-1"></a>habitat_summary <span class="ot">&lt;-</span> bird_data <span class="sc">%&gt;%</span></span>
<span id="cb210-27"><a href="附录1-r语言编程基础.html#cb210-27" tabindex="-1"></a>  <span class="fu">group_by</span>(habitat) <span class="sc">%&gt;%</span></span>
<span id="cb210-28"><a href="附录1-r语言编程基础.html#cb210-28" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb210-29"><a href="附录1-r语言编程基础.html#cb210-29" tabindex="-1"></a>    <span class="at">mean_abundance =</span> <span class="fu">mean</span>(abundance),</span>
<span id="cb210-30"><a href="附录1-r语言编程基础.html#cb210-30" tabindex="-1"></a>    <span class="at">se_abundance =</span> <span class="fu">sd</span>(abundance) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>()),</span>
<span id="cb210-31"><a href="附录1-r语言编程基础.html#cb210-31" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span></span>
<span id="cb210-32"><a href="附录1-r语言编程基础.html#cb210-32" tabindex="-1"></a>  )</span>
<span id="cb210-33"><a href="附录1-r语言编程基础.html#cb210-33" tabindex="-1"></a></span>
<span id="cb210-34"><a href="附录1-r语言编程基础.html#cb210-34" tabindex="-1"></a><span class="fu">ggplot</span>(habitat_summary, <span class="fu">aes</span>(<span class="at">x =</span> habitat, <span class="at">y =</span> mean_abundance, <span class="at">fill =</span> habitat)) <span class="sc">+</span></span>
<span id="cb210-35"><a href="附录1-r语言编程基础.html#cb210-35" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb210-36"><a href="附录1-r语言编程基础.html#cb210-36" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb210-37"><a href="附录1-r语言编程基础.html#cb210-37" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> mean_abundance <span class="sc">-</span> se_abundance, </span>
<span id="cb210-38"><a href="附录1-r语言编程基础.html#cb210-38" tabindex="-1"></a>        <span class="at">ymax =</span> mean_abundance <span class="sc">+</span> se_abundance),</span>
<span id="cb210-39"><a href="附录1-r语言编程基础.html#cb210-39" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.2</span></span>
<span id="cb210-40"><a href="附录1-r语言编程基础.html#cb210-40" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb210-41"><a href="附录1-r语言编程基础.html#cb210-41" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb210-42"><a href="附录1-r语言编程基础.html#cb210-42" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;不同栖息地的鸟类平均丰度&quot;</span>,</span>
<span id="cb210-43"><a href="附录1-r语言编程基础.html#cb210-43" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;栖息地类型&quot;</span>,</span>
<span id="cb210-44"><a href="附录1-r语言编程基础.html#cb210-44" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;平均丰度&quot;</span>,</span>
<span id="cb210-45"><a href="附录1-r语言编程基础.html#cb210-45" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">&quot;栖息地&quot;</span></span>
<span id="cb210-46"><a href="附录1-r语言编程基础.html#cb210-46" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb210-47"><a href="附录1-r语言编程基础.html#cb210-47" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb210-48"><a href="附录1-r语言编程基础.html#cb210-48" tabindex="-1"></a></span>
<span id="cb210-49"><a href="附录1-r语言编程基础.html#cb210-49" tabindex="-1"></a><span class="co"># 箱线图</span></span>
<span id="cb210-50"><a href="附录1-r语言编程基础.html#cb210-50" tabindex="-1"></a><span class="fu">ggplot</span>(bird_data, <span class="fu">aes</span>(<span class="at">x =</span> habitat, <span class="at">y =</span> abundance, <span class="at">fill =</span> habitat)) <span class="sc">+</span></span>
<span id="cb210-51"><a href="附录1-r语言编程基础.html#cb210-51" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb210-52"><a href="附录1-r语言编程基础.html#cb210-52" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb210-53"><a href="附录1-r语言编程基础.html#cb210-53" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb210-54"><a href="附录1-r语言编程基础.html#cb210-54" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;不同栖息地鸟类丰度分布&quot;</span>,</span>
<span id="cb210-55"><a href="附录1-r语言编程基础.html#cb210-55" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;栖息地类型&quot;</span>,</span>
<span id="cb210-56"><a href="附录1-r语言编程基础.html#cb210-56" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;丰度&quot;</span></span>
<span id="cb210-57"><a href="附录1-r语言编程基础.html#cb210-57" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb210-58"><a href="附录1-r语言编程基础.html#cb210-58" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb210-59"><a href="附录1-r语言编程基础.html#cb210-59" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
</div>
<div id="多面板图形" class="section level4 hasAnchor" number="3.11.3.3">
<h4><span class="header-section-number">3.11.3.3</span> 多面板图形<a href="附录1-r语言编程基础.html#多面板图形" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="附录1-r语言编程基础.html#cb211-1" tabindex="-1"></a><span class="co"># 创建多组数据</span></span>
<span id="cb211-2"><a href="附录1-r语言编程基础.html#cb211-2" tabindex="-1"></a>multi_species_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb211-3"><a href="附录1-r语言编程基础.html#cb211-3" tabindex="-1"></a>  <span class="at">species =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;鸟类&quot;</span>, <span class="st">&quot;哺乳动物&quot;</span>, <span class="st">&quot;昆虫&quot;</span>), <span class="at">each =</span> <span class="dv">24</span>),</span>
<span id="cb211-4"><a href="附录1-r语言编程基础.html#cb211-4" tabindex="-1"></a>  <span class="at">month =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="dv">6</span>),</span>
<span id="cb211-5"><a href="附录1-r语言编程基础.html#cb211-5" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;2021&quot;</span>, <span class="st">&quot;2022&quot;</span>), <span class="at">each =</span> <span class="dv">12</span>, <span class="at">times =</span> <span class="dv">3</span>),</span>
<span id="cb211-6"><a href="附录1-r语言编程基础.html#cb211-6" tabindex="-1"></a>  <span class="at">abundance =</span> <span class="fu">c</span>(</span>
<span id="cb211-7"><a href="附录1-r语言编程基础.html#cb211-7" tabindex="-1"></a>    <span class="co"># 鸟类数据</span></span>
<span id="cb211-8"><a href="附录1-r语言编程基础.html#cb211-8" tabindex="-1"></a>    <span class="fu">rnorm</span>(<span class="dv">24</span>, <span class="at">mean =</span> <span class="dv">30</span> <span class="sc">+</span> <span class="dv">15</span><span class="sc">*</span><span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>pi<span class="sc">*</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24-1</span>)<span class="sc">/</span><span class="dv">12</span>), <span class="at">sd =</span> <span class="dv">5</span>),</span>
<span id="cb211-9"><a href="附录1-r语言编程基础.html#cb211-9" tabindex="-1"></a>    <span class="co"># 哺乳动物数据</span></span>
<span id="cb211-10"><a href="附录1-r语言编程基础.html#cb211-10" tabindex="-1"></a>    <span class="fu">rnorm</span>(<span class="dv">24</span>, <span class="at">mean =</span> <span class="dv">15</span> <span class="sc">+</span> <span class="dv">8</span><span class="sc">*</span><span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>pi<span class="sc">*</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24-1</span>)<span class="sc">/</span><span class="dv">12</span>), <span class="at">sd =</span> <span class="dv">3</span>),</span>
<span id="cb211-11"><a href="附录1-r语言编程基础.html#cb211-11" tabindex="-1"></a>    <span class="co"># 昆虫数据</span></span>
<span id="cb211-12"><a href="附录1-r语言编程基础.html#cb211-12" tabindex="-1"></a>    <span class="fu">rnorm</span>(<span class="dv">24</span>, <span class="at">mean =</span> <span class="dv">80</span> <span class="sc">+</span> <span class="dv">40</span><span class="sc">*</span><span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>pi<span class="sc">*</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24-1</span>)<span class="sc">/</span><span class="dv">12</span>), <span class="at">sd =</span> <span class="dv">15</span>)</span>
<span id="cb211-13"><a href="附录1-r语言编程基础.html#cb211-13" tabindex="-1"></a>  )</span>
<span id="cb211-14"><a href="附录1-r语言编程基础.html#cb211-14" tabindex="-1"></a>)</span>
<span id="cb211-15"><a href="附录1-r语言编程基础.html#cb211-15" tabindex="-1"></a></span>
<span id="cb211-16"><a href="附录1-r语言编程基础.html#cb211-16" tabindex="-1"></a><span class="co"># 分面图</span></span>
<span id="cb211-17"><a href="附录1-r语言编程基础.html#cb211-17" tabindex="-1"></a><span class="fu">ggplot</span>(multi_species_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> abundance, <span class="at">color =</span> year)) <span class="sc">+</span></span>
<span id="cb211-18"><a href="附录1-r语言编程基础.html#cb211-18" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb211-19"><a href="附录1-r语言编程基础.html#cb211-19" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb211-20"><a href="附录1-r语言编程基础.html#cb211-20" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> species, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb211-21"><a href="附录1-r语言编程基础.html#cb211-21" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb211-22"><a href="附录1-r语言编程基础.html#cb211-22" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb211-23"><a href="附录1-r语言编程基础.html#cb211-23" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;不同类群动物的季节性变化模式&quot;</span>,</span>
<span id="cb211-24"><a href="附录1-r语言编程基础.html#cb211-24" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;月份&quot;</span>,</span>
<span id="cb211-25"><a href="附录1-r语言编程基础.html#cb211-25" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;丰度&quot;</span>,</span>
<span id="cb211-26"><a href="附录1-r语言编程基础.html#cb211-26" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;年份&quot;</span></span>
<span id="cb211-27"><a href="附录1-r语言编程基础.html#cb211-27" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb211-28"><a href="附录1-r语言编程基础.html#cb211-28" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
</div>
<div id="专业主题和自定义" class="section level4 hasAnchor" number="3.11.3.4">
<h4><span class="header-section-number">3.11.3.4</span> 专业主题和自定义<a href="附录1-r语言编程基础.html#专业主题和自定义" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="附录1-r语言编程基础.html#cb212-1" tabindex="-1"></a><span class="co"># 创建专业期刊风格的图表</span></span>
<span id="cb212-2"><a href="附录1-r语言编程基础.html#cb212-2" tabindex="-1"></a>publication_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(bird_data, <span class="fu">aes</span>(<span class="at">x =</span> body_mass, <span class="at">y =</span> abundance)) <span class="sc">+</span></span>
<span id="cb212-3"><a href="附录1-r语言编程基础.html#cb212-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> habitat), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb212-4"><a href="附录1-r语言编程基础.html#cb212-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb212-5"><a href="附录1-r语言编程基础.html#cb212-5" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;森林&quot;</span> <span class="ot">=</span> <span class="st">&quot;#2E8B57&quot;</span>, <span class="st">&quot;城市&quot;</span> <span class="ot">=</span> <span class="st">&quot;#DC143C&quot;</span>, <span class="st">&quot;农田&quot;</span> <span class="ot">=</span> <span class="st">&quot;#DAA520&quot;</span>)) <span class="sc">+</span></span>
<span id="cb212-6"><a href="附录1-r语言编程基础.html#cb212-6" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb212-7"><a href="附录1-r语言编程基础.html#cb212-7" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;鸟类体重与种群丰度的关系&quot;</span>,</span>
<span id="cb212-8"><a href="附录1-r语言编程基础.html#cb212-8" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;体重 (g)&quot;</span>,</span>
<span id="cb212-9"><a href="附录1-r语言编程基础.html#cb212-9" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;种群丰度 (个体数)&quot;</span>,</span>
<span id="cb212-10"><a href="附录1-r语言编程基础.html#cb212-10" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;栖息地类型&quot;</span>,</span>
<span id="cb212-11"><a href="附录1-r语言编程基础.html#cb212-11" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;数据来源：某自然保护区鸟类调查 (2022)&quot;</span></span>
<span id="cb212-12"><a href="附录1-r语言编程基础.html#cb212-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb212-13"><a href="附录1-r语言编程基础.html#cb212-13" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb212-14"><a href="附录1-r语言编程基础.html#cb212-14" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb212-15"><a href="附录1-r语言编程基础.html#cb212-15" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb212-16"><a href="附录1-r语言编程基础.html#cb212-16" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb212-17"><a href="附录1-r语言编程基础.html#cb212-17" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb212-18"><a href="附录1-r语言编程基础.html#cb212-18" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb212-19"><a href="附录1-r语言编程基础.html#cb212-19" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb212-20"><a href="附录1-r语言编程基础.html#cb212-20" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb212-21"><a href="附录1-r语言编程基础.html#cb212-21" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">&quot;gray50&quot;</span>)</span>
<span id="cb212-22"><a href="附录1-r语言编程基础.html#cb212-22" tabindex="-1"></a>  )</span>
<span id="cb212-23"><a href="附录1-r语言编程基础.html#cb212-23" tabindex="-1"></a></span>
<span id="cb212-24"><a href="附录1-r语言编程基础.html#cb212-24" tabindex="-1"></a><span class="fu">print</span>(publication_plot)</span>
<span id="cb212-25"><a href="附录1-r语言编程基础.html#cb212-25" tabindex="-1"></a></span>
<span id="cb212-26"><a href="附录1-r语言编程基础.html#cb212-26" tabindex="-1"></a><span class="co"># 保存图片</span></span>
<span id="cb212-27"><a href="附录1-r语言编程基础.html#cb212-27" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;bird_analysis.png&quot;</span>, publication_plot, </span>
<span id="cb212-28"><a href="附录1-r语言编程基础.html#cb212-28" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code></pre></div>
</div>
<div id="复杂的生态学可视化" class="section level4 hasAnchor" number="3.11.3.5">
<h4><span class="header-section-number">3.11.3.5</span> 复杂的生态学可视化<a href="附录1-r语言编程基础.html#复杂的生态学可视化" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="附录1-r语言编程基础.html#cb213-1" tabindex="-1"></a><span class="co"># 群落组成气泡图</span></span>
<span id="cb213-2"><a href="附录1-r语言编程基础.html#cb213-2" tabindex="-1"></a>community_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb213-3"><a href="附录1-r语言编程基础.html#cb213-3" tabindex="-1"></a>  <span class="at">site =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;样地A&quot;</span>, <span class="st">&quot;样地B&quot;</span>, <span class="st">&quot;样地C&quot;</span>), <span class="at">each =</span> <span class="dv">6</span>),</span>
<span id="cb213-4"><a href="附录1-r语言编程基础.html#cb213-4" tabindex="-1"></a>  <span class="at">species =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;物种1&quot;</span>, <span class="st">&quot;物种2&quot;</span>, <span class="st">&quot;物种3&quot;</span>, <span class="st">&quot;物种4&quot;</span>, <span class="st">&quot;物种5&quot;</span>, <span class="st">&quot;物种6&quot;</span>), <span class="dv">3</span>),</span>
<span id="cb213-5"><a href="附录1-r语言编程基础.html#cb213-5" tabindex="-1"></a>  <span class="at">abundance =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">15</span>, <span class="dv">8</span>, <span class="dv">32</span>, <span class="dv">12</span>, <span class="dv">6</span>,   <span class="co"># 样地A</span></span>
<span id="cb213-6"><a href="附录1-r语言编程基础.html#cb213-6" tabindex="-1"></a>                <span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">12</span>, <span class="dv">25</span>, <span class="dv">8</span>, <span class="dv">15</span>,  <span class="co"># 样地B</span></span>
<span id="cb213-7"><a href="附录1-r语言编程基础.html#cb213-7" tabindex="-1"></a>                <span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">25</span>, <span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">17</span>), <span class="co"># 样地C</span></span>
<span id="cb213-8"><a href="附录1-r语言编程基础.html#cb213-8" tabindex="-1"></a>  <span class="at">biomass =</span> <span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.2</span>, <span class="fl">1.8</span>, <span class="fl">4.1</span>, <span class="fl">2.0</span>, <span class="fl">1.2</span>,</span>
<span id="cb213-9"><a href="附录1-r语言编程基础.html#cb213-9" tabindex="-1"></a>              <span class="fl">3.0</span>, <span class="fl">2.8</span>, <span class="fl">2.2</span>, <span class="fl">3.5</span>, <span class="fl">1.5</span>, <span class="fl">2.5</span>,</span>
<span id="cb213-10"><a href="附录1-r语言编程基础.html#cb213-10" tabindex="-1"></a>              <span class="fl">2.2</span>, <span class="fl">1.8</span>, <span class="fl">4.0</span>, <span class="fl">2.9</span>, <span class="fl">3.8</span>, <span class="fl">3.2</span>)</span>
<span id="cb213-11"><a href="附录1-r语言编程基础.html#cb213-11" tabindex="-1"></a>)</span>
<span id="cb213-12"><a href="附录1-r语言编程基础.html#cb213-12" tabindex="-1"></a></span>
<span id="cb213-13"><a href="附录1-r语言编程基础.html#cb213-13" tabindex="-1"></a><span class="fu">ggplot</span>(community_data, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> site)) <span class="sc">+</span></span>
<span id="cb213-14"><a href="附录1-r语言编程基础.html#cb213-14" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> abundance, <span class="at">color =</span> biomass), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb213-15"><a href="附录1-r语言编程基础.html#cb213-15" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">12</span>), <span class="at">name =</span> <span class="st">&quot;丰度&quot;</span>) <span class="sc">+</span></span>
<span id="cb213-16"><a href="附录1-r语言编程基础.html#cb213-16" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="at">high =</span> <span class="st">&quot;darkred&quot;</span>, <span class="at">name =</span> <span class="st">&quot;生物量(kg)&quot;</span>) <span class="sc">+</span></span>
<span id="cb213-17"><a href="附录1-r语言编程基础.html#cb213-17" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb213-18"><a href="附录1-r语言编程基础.html#cb213-18" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;群落物种组成与生物量分布&quot;</span>,</span>
<span id="cb213-19"><a href="附录1-r语言编程基础.html#cb213-19" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;物种&quot;</span>,</span>
<span id="cb213-20"><a href="附录1-r语言编程基础.html#cb213-20" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;样地&quot;</span></span>
<span id="cb213-21"><a href="附录1-r语言编程基础.html#cb213-21" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb213-22"><a href="附录1-r语言编程基础.html#cb213-22" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb213-23"><a href="附录1-r语言编程基础.html#cb213-23" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb213-24"><a href="附录1-r语言编程基础.html#cb213-24" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb213-25"><a href="附录1-r语言编程基础.html#cb213-25" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;gray90&quot;</span>, <span class="at">size =</span> <span class="fl">0.3</span>)</span>
<span id="cb213-26"><a href="附录1-r语言编程基础.html#cb213-26" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
<div id="r语言知识点详解-9" class="section level3 hasAnchor" number="3.11.4">
<h3><span class="header-section-number">3.11.4</span> R语言知识点详解<a href="附录1-r语言编程基础.html#r语言知识点详解-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="ggplot2的图形语法" class="section level4 hasAnchor" number="3.11.4.1">
<h4><span class="header-section-number">3.11.4.1</span> ggplot2的图形语法<a href="附录1-r语言编程基础.html#ggplot2的图形语法" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="基本概念" class="section level5 hasAnchor" number="3.11.4.1.1">
<h5><span class="header-section-number">3.11.4.1.1</span> 基本概念<a href="附录1-r语言编程基础.html#基本概念" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>数据(Data)</strong>：要可视化的数据集</li>
<li><strong>美学映射(Aesthetics)</strong>：数据变量到图形属性的映射</li>
<li><strong>几何对象(Geometries)</strong>：用来表示数据的图形元素</li>
<li><strong>统计变换(Statistics)</strong>：对原始数据的统计总结</li>
<li><strong>坐标系统(Coordinates)</strong>：数据如何映射到平面</li>
<li><strong>分面(Facets)</strong>：将数据分割成子集的方法</li>
<li><strong>主题(Themes)</strong>：控制图形整体外观</li>
</ul>
</div>
<div id="基本语法结构" class="section level5 hasAnchor" number="3.11.4.1.2">
<h5><span class="header-section-number">3.11.4.1.2</span> 基本语法结构<a href="附录1-r语言编程基础.html#基本语法结构" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="附录1-r语言编程基础.html#cb214-1" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> var1, <span class="at">y =</span> var2)) <span class="sc">+</span></span>
<span id="cb214-2"><a href="附录1-r语言编程基础.html#cb214-2" tabindex="-1"></a>  geom_<span class="sc">*</span>() <span class="sc">+</span></span>
<span id="cb214-3"><a href="附录1-r语言编程基础.html#cb214-3" tabindex="-1"></a>  scale_<span class="sc">*</span>() <span class="sc">+</span></span>
<span id="cb214-4"><a href="附录1-r语言编程基础.html#cb214-4" tabindex="-1"></a>  <span class="fu">labs</span>() <span class="sc">+</span></span>
<span id="cb214-5"><a href="附录1-r语言编程基础.html#cb214-5" tabindex="-1"></a>  theme_<span class="sc">*</span>()</span></code></pre></div>
</div>
</div>
<div id="美学映射系统" class="section level4 hasAnchor" number="3.11.4.2">
<h4><span class="header-section-number">3.11.4.2</span> 美学映射系统<a href="附录1-r语言编程基础.html#美学映射系统" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="aes-函数" class="section level5 hasAnchor" number="3.11.4.2.1">
<h5><span class="header-section-number">3.11.4.2.1</span> <code>aes()</code> 函数<a href="附录1-r语言编程基础.html#aes-函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>位置映射</strong>：<code>x</code>、<code>y</code></li>
<li><strong>颜色映射</strong>：<code>color</code>（边框）、<code>fill</code>（填充）</li>
<li><strong>大小映射</strong>：<code>size</code></li>
<li><strong>形状映射</strong>：<code>shape</code></li>
<li><strong>透明度映射</strong>：<code>alpha</code></li>
<li><strong>线型映射</strong>：<code>linetype</code></li>
</ul>
</div>
<div id="映射-vs-设定" class="section level5 hasAnchor" number="3.11.4.2.2">
<h5><span class="header-section-number">3.11.4.2.2</span> 映射 vs 设定<a href="附录1-r语言编程基础.html#映射-vs-设定" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>映射</strong>：<code>aes(color = variable)</code>，颜色根据变量值变化</li>
<li><strong>设定</strong>：<code>geom_point(color = "red")</code>，所有点都是红色</li>
</ul>
</div>
</div>
<div id="几何对象详解" class="section level4 hasAnchor" number="3.11.4.3">
<h4><span class="header-section-number">3.11.4.3</span> 几何对象详解<a href="附录1-r语言编程基础.html#几何对象详解" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="点图相关" class="section level5 hasAnchor" number="3.11.4.3.1">
<h5><span class="header-section-number">3.11.4.3.1</span> 点图相关<a href="附录1-r语言编程基础.html#点图相关" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>geom_point()</code></strong>：散点图</li>
<li><strong><code>geom_jitter()</code></strong>：抖动散点图</li>
<li><strong>参数</strong>：<code>size</code>、<code>shape</code>、<code>alpha</code>、<code>stroke</code></li>
</ul>
</div>
<div id="线图相关" class="section level5 hasAnchor" number="3.11.4.3.2">
<h5><span class="header-section-number">3.11.4.3.2</span> 线图相关<a href="附录1-r语言编程基础.html#线图相关" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>geom_line()</code></strong>：线图</li>
<li><strong><code>geom_path()</code></strong>：路径图</li>
<li><strong><code>geom_smooth()</code></strong>：拟合线</li>
<li><strong>参数</strong>：<code>size</code>、<code>linetype</code>、<code>method</code></li>
</ul>
</div>
<div id="柱状图相关" class="section level5 hasAnchor" number="3.11.4.3.3">
<h5><span class="header-section-number">3.11.4.3.3</span> 柱状图相关<a href="附录1-r语言编程基础.html#柱状图相关" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>geom_col()</code></strong>：柱状图（使用实际值）</li>
<li><strong><code>geom_bar()</code></strong>：柱状图（统计计数）</li>
<li><strong><code>geom_histogram()</code></strong>：直方图</li>
<li><strong>参数</strong>：<code>width</code>、<code>position</code></li>
</ul>
</div>
<div id="分布图相关" class="section level5 hasAnchor" number="3.11.4.3.4">
<h5><span class="header-section-number">3.11.4.3.4</span> 分布图相关<a href="附录1-r语言编程基础.html#分布图相关" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>geom_boxplot()</code></strong>：箱线图</li>
<li><strong><code>geom_violin()</code></strong>：小提琴图</li>
<li><strong><code>geom_density()</code></strong>：密度图</li>
</ul>
</div>
</div>
<div id="标度系统" class="section level4 hasAnchor" number="3.11.4.4">
<h4><span class="header-section-number">3.11.4.4</span> 标度系统<a href="附录1-r语言编程基础.html#标度系统" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="颜色标度" class="section level5 hasAnchor" number="3.11.4.4.1">
<h5><span class="header-section-number">3.11.4.4.1</span> 颜色标度<a href="附录1-r语言编程基础.html#颜色标度" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>连续型</strong>：
<ul>
<li><code>scale_color_gradient()</code>：双色渐变</li>
<li><code>scale_color_gradient2()</code>：三色渐变</li>
<li><code>scale_color_viridis_c()</code>：viridis调色板</li>
</ul></li>
<li><strong>离散型</strong>：
<ul>
<li><code>scale_color_manual()</code>：手动设置颜色</li>
<li><code>scale_color_brewer()</code>：ColorBrewer调色板</li>
</ul></li>
</ul>
</div>
<div id="坐标轴标度" class="section level5 hasAnchor" number="3.11.4.4.2">
<h5><span class="header-section-number">3.11.4.4.2</span> 坐标轴标度<a href="附录1-r语言编程基础.html#坐标轴标度" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>连续型</strong>：
<ul>
<li><code>scale_x_continuous()</code>：连续x轴</li>
<li><code>scale_y_log10()</code>：对数y轴</li>
</ul></li>
<li><strong>离散型</strong>：
<ul>
<li><code>scale_x_discrete()</code>：离散x轴</li>
</ul></li>
<li><strong>日期型</strong>：
<ul>
<li><code>scale_x_date()</code>：日期x轴</li>
</ul></li>
</ul>
</div>
</div>
<div id="分面系统" class="section level4 hasAnchor" number="3.11.4.5">
<h4><span class="header-section-number">3.11.4.5</span> 分面系统<a href="附录1-r语言编程基础.html#分面系统" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="facet_wrap" class="section level5 hasAnchor" number="3.11.4.5.1">
<h5><span class="header-section-number">3.11.4.5.1</span> <code>facet_wrap()</code><a href="附录1-r语言编程基础.html#facet_wrap" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>用途</strong>：按一个变量分面，排列成网格</li>
<li><strong>语法</strong>：<code>facet_wrap(~ variable, ncol = 2)</code></li>
<li><strong>参数</strong>：
<ul>
<li><code>ncol</code>、<code>nrow</code>：列数和行数</li>
<li><code>scales</code>：坐标轴缩放方式</li>
</ul></li>
</ul>
</div>
<div id="facet_grid" class="section level5 hasAnchor" number="3.11.4.5.2">
<h5><span class="header-section-number">3.11.4.5.2</span> <code>facet_grid()</code><a href="附录1-r语言编程基础.html#facet_grid" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>用途</strong>：按两个变量分面，形成矩阵</li>
<li><strong>语法</strong>：<code>facet_grid(rows ~ cols)</code></li>
<li><strong>特殊语法</strong>：
<ul>
<li><code>facet_grid(. ~ variable)</code>：仅按列分面</li>
<li><code>facet_grid(variable ~ .)</code>：仅按行分面</li>
</ul></li>
</ul>
</div>
</div>
<div id="主题系统" class="section level4 hasAnchor" number="3.11.4.6">
<h4><span class="header-section-number">3.11.4.6</span> 主题系统<a href="附录1-r语言编程基础.html#主题系统" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="预设主题" class="section level5 hasAnchor" number="3.11.4.6.1">
<h5><span class="header-section-number">3.11.4.6.1</span> 预设主题<a href="附录1-r语言编程基础.html#预设主题" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong><code>theme_minimal()</code></strong>：简洁主题</li>
<li><strong><code>theme_classic()</code></strong>：经典主题</li>
<li><strong><code>theme_bw()</code></strong>：黑白主题</li>
<li><strong><code>theme_void()</code></strong>：空白主题</li>
</ul>
</div>
<div id="自定义主题元素" class="section level5 hasAnchor" number="3.11.4.6.2">
<h5><span class="header-section-number">3.11.4.6.2</span> 自定义主题元素<a href="附录1-r语言编程基础.html#自定义主题元素" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>文本元素</strong>：<code>element_text()</code>
<ul>
<li><code>size</code>：字体大小</li>
<li><code>color</code>：字体颜色</li>
<li><code>face</code>：字体样式（“bold”、“italic”）</li>
<li><code>hjust</code>、<code>vjust</code>：水平和垂直对齐</li>
</ul></li>
<li><strong>线条元素</strong>：<code>element_line()</code>
<ul>
<li><code>color</code>：线条颜色</li>
<li><code>size</code>：线条粗细</li>
<li><code>linetype</code>：线条类型</li>
</ul></li>
<li><strong>矩形元素</strong>：<code>element_rect()</code>
<ul>
<li><code>fill</code>：填充颜色</li>
<li><code>color</code>：边框颜色</li>
</ul></li>
<li><strong>移除元素</strong>：<code>element_blank()</code></li>
</ul>
</div>
</div>
<div id="图片保存" class="section level4 hasAnchor" number="3.11.4.7">
<h4><span class="header-section-number">3.11.4.7</span> 图片保存<a href="附录1-r语言编程基础.html#图片保存" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="ggsave-函数" class="section level5 hasAnchor" number="3.11.4.7.1">
<h5><span class="header-section-number">3.11.4.7.1</span> <code>ggsave()</code> 函数<a href="附录1-r语言编程基础.html#ggsave-函数" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>语法</strong>：<code>ggsave(filename, plot, width, height, dpi, units)</code></li>
<li><strong>支持格式</strong>：
<ul>
<li>矢量格式：PDF、SVG、EPS</li>
<li>位图格式：PNG、JPEG、TIFF</li>
</ul></li>
<li><strong>推荐设置</strong>：
<ul>
<li>期刊投稿：300-600 DPI</li>
<li>演示文稿：150-300 DPI</li>
<li>网页使用：72-150 DPI</li>
</ul></li>
</ul>
</div>
</div>
<div id="色彩设计原则" class="section level4 hasAnchor" number="3.11.4.8">
<h4><span class="header-section-number">3.11.4.8</span> 色彩设计原则<a href="附录1-r语言编程基础.html#色彩设计原则" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="科学可视化色彩指南" class="section level5 hasAnchor" number="3.11.4.8.1">
<h5><span class="header-section-number">3.11.4.8.1</span> 科学可视化色彩指南<a href="附录1-r语言编程基础.html#科学可视化色彩指南" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>连续数据</strong>：使用渐变色，避免彩虹色</li>
<li><strong>分类数据</strong>：使用对比鲜明的颜色</li>
<li><strong>色盲友好</strong>：避免红绿组合，推荐viridis调色板</li>
<li><strong>发表要求</strong>：考虑黑白印刷效果</li>
</ul>
</div>
<div id="推荐调色板" class="section level5 hasAnchor" number="3.11.4.8.2">
<h5><span class="header-section-number">3.11.4.8.2</span> 推荐调色板<a href="附录1-r语言编程基础.html#推荐调色板" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li><strong>Viridis系列</strong>：色盲友好，打印友好</li>
<li><strong>ColorBrewer</strong>：专业的制图调色板</li>
<li><strong>自然色彩</strong>：模仿自然界的颜色组合</li>
</ul>
</div>
</div>
</div>
<div id="课后练习-9" class="section level3 hasAnchor" number="3.11.5">
<h3><span class="header-section-number">3.11.5</span> 课后练习<a href="附录1-r语言编程基础.html#课后练习-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>题目</strong>：某国家公园植被多样性调查数据：</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="附录1-r语言编程基础.html#cb215-1" tabindex="-1"></a>vegetation_survey <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb215-2"><a href="附录1-r语言编程基础.html#cb215-2" tabindex="-1"></a>  <span class="at">transect =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;山顶&quot;</span>, <span class="st">&quot;山腰&quot;</span>, <span class="st">&quot;山底&quot;</span>), <span class="at">each =</span> <span class="dv">20</span>),</span>
<span id="cb215-3"><a href="附录1-r语言编程基础.html#cb215-3" tabindex="-1"></a>  <span class="at">species_richness =</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">15</span>, <span class="dv">3</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">4</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">35</span>, <span class="dv">5</span>)),</span>
<span id="cb215-4"><a href="附录1-r语言编程基础.html#cb215-4" tabindex="-1"></a>  <span class="at">coverage_percent =</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">60</span>, <span class="dv">10</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">75</span>, <span class="dv">8</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">85</span>, <span class="dv">6</span>)),</span>
<span id="cb215-5"><a href="附录1-r语言编程基础.html#cb215-5" tabindex="-1"></a>  <span class="at">slope_degree =</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">5</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">15</span>, <span class="dv">3</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">5</span>, <span class="dv">2</span>)),</span>
<span id="cb215-6"><a href="附录1-r语言编程基础.html#cb215-6" tabindex="-1"></a>  <span class="at">soil_depth =</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">15</span>, <span class="dv">3</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">4</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">6</span>))</span>
<span id="cb215-7"><a href="附录1-r语言编程基础.html#cb215-7" tabindex="-1"></a>)</span></code></pre></div>
<p>请完成（使用ggplot2高级功能，结合之前学过的所有内容）：</p>
<ol style="list-style-type: decimal">
<li><p>创建物种丰富度与植被覆盖度的散点图，用颜色区分不同海拔带（使用geom_point()和aes()）</p></li>
<li><p>绘制三个海拔带物种丰富度的箱线图，添加个体数据点（使用geom_boxplot()和geom_jitter()）</p></li>
<li><p>创建多面板图，展示不同海拔带的各项指标分布（使用facet_wrap()）</p></li>
<li><p>设计一个期刊级别的综合图表，展示海拔梯度上的植被特征变化（使用多个geom层）</p></li>
<li><p>自定义主题，确保图表符合学术发表标准（使用theme()函数）</p></li>
<li><p>保存高质量图片用于论文发表（使用ggsave()函数）</p></li>
<li><p>与第7课的基础绘图方法对比，总结ggplot2的优势</p></li>
<li><p>尝试创建动态或交互式可视化（选做，可查阅相关资料）</p></li>
</ol>
</div>
</div>
<div id="综合练习-1" class="section level2 hasAnchor" number="3.12">
<h2><span class="header-section-number">3.12</span> 综合练习<a href="附录1-r语言编程基础.html#综合练习-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="练习1-1" class="section level3 hasAnchor" number="3.12.1">
<h3><span class="header-section-number">3.12.1</span> 练习1<a href="附录1-r语言编程基础.html#练习1-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>请用上面所学产生一个斐波那契序列的前46个值，其中斐波那契序列的具体定义如下：</p>
<p><span class="math display">\[F_0=0, F_1=1, F_n=F_{n-1}+F_{n-2} (n \ge 2,n \in \mathbf{N})\]</span></p>
</div>
<div id="练习2" class="section level3 hasAnchor" number="3.12.2">
<h3><span class="header-section-number">3.12.2</span> 练习2<a href="附录1-r语言编程基础.html#练习2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>针对一段给定的字符串：ladjgl5ug6e6wjgl12saj98gd0la，请用R语言提取其中的数字并求和。 要求，给出详细的编码过程及最终结果。</p>
</div>
<div id="练习3" class="section level3 hasAnchor" number="3.12.3">
<h3><span class="header-section-number">3.12.3</span> 练习3<a href="附录1-r语言编程基础.html#练习3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在项目文件夹的data目录下，存在一个天童样地的数据Tiantong_Sample.csv，其中包含7列，分别为：spCN（物种中文名）、sp（物种代码）、tag（个体编码）、gx（个体x坐标）、gy（个体y坐标）、dbh（胸径）、height（个体高度）。请读取该文件，并统计总共有多少个物种、胸径大于10的个体有多少个、平均胸径是多少、平均高度是多少。最后统计每个物种的在天童样地的个体数，并计算shannon多样性指数 。</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="概率与分布.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ecological-statistics.pdf", "ecological-statistics.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
